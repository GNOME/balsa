2001-02-16  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox_imap.c: fix shameful locking issue.
	* libbalsa/message.c: fix crash in libbalsa_message_has_attachment().
	* src/information-dialog.c: use fputs instead of fprintf with 
	format only.
	
2001-02-14  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox_{imap,local}.c:
	* src/balsa-index.c: lock GDK more carefully.
	
2001-02-13  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-index.c: open mailboxes in a thread (as requested in
	one of the bug reports).

2001-02-12  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/body.c:
	* libbalsa/folder-scanners.c:
	* libbalsa/libbalsa.c:
	* libbalsa/mailbox_imap.c: update for mutt-unstable-20010210

2001-02-11  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-index.c: Don't try and select a message if the last
	one is deleted.
	* src/pref-manager.c: Use util functions to create tables, more
	appropriate name for sub-notebook tab.

2001-02-09  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/address-book-vcard.c: KISS: print data directly to file.
	* libbalsa/mailbox.c: fix crash in the cllose retrying code.
	* libbalsa/mailbox_imap.c: improve imap mailbox checking.
	* src/print.c: fix printing after recent BalsAIndex structure
	modification. Remove old crap (this could be done better, I guess).
	
2001-02-07  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-mblist.c: change sorting function to automatically
	place "core" mailboxes (i.e. Inbox, Sentbox...) at the top of the
	mailbox list when sorting by name.

2001-02-06  Pawel Salek  <pawsa@theochem.kth.se>

	* README,INSTALL,NEWS, configure.in: bump version number to 1.1.1

2001-02-04  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/address-book.c: config_pop_prefix on error.
	* libbalsa/mailbox.c: same.
	* libbalsa/mailbox_imap.c: fix and enable IMAP checking support.
	* libbalsa/notify.c: fix and enable imap checking support.
	* src/balsa-index.c: use gtk_signal_connect_object instead of
	gtk_signal_connect, it makes the code simpler. fix msg counting.
	* src/balsa-mblist.c: don't destroy mailbox nodes on repopulate,
	they are owned by balsa_app.mailbox_nodes.
	* src/mailbox-node.[hc]: register scanned IMAP mailboxes. Remove
	SORT_ namespace conflict with libmutt.
	* src/pref-manager.c: don't free gtk_entry_get_text() result.
	* libbalsa/folder-scanners.c: clean up.
	
2001-02-04  Pawel Salek  <pawsa@theochem.kth.se>

	* help/C/balsa.sgml: add description of IMAP folder configuration.
	* libbalsa/folder-scanners.c: be less verbose.
	* libbalsa/mailbox.c: don't retry for ever on error.
	* libbalsa/mailbox_imap.[hc]: implement 
	libbalsa_imap_close_all_connections()
	* libbalsa/message.[ch]: more robust on mailbox accessing
	errors. Return operation status from libbalsa_message_body_ref()
	* src/balsa-index.c: be more robust on errors and provide feedback
	to the user.
	* src/balsa-message.[hc] (balsa_message_set): return
	operation status.
	* src/folder-conf.[hc]: plug in  IMAP folders configuration.
	* src/mailbox-node.c: second part of configuration.
	* src/main.c: shutdown nicely all imap connsection on exit.
	
2001-02-03  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-app.[ch]: Add option to automatically view message
	after newly opening a mailbox.
	* src/balsa-index.c (moveto_handler): only auto view messages on
	mailbox opening if the option is selected.
	* src/pref-manager.c: Put option to auto view messages in the
	Preferences dialog, reorganize "Display" page into subnotebook
	pages.
	* src/save-restore.c: Save and load auto view message option.
		
2001-02-03  Matthew Guenther  <guentherm@asme.org>

	* src/store-address.c (balsa_store_address): Fix cast to GtkCList
	from BalsaIndex.

2001-02-03  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-index.c: don't crash on failed open.
	
2001-02-01  Pawel Salek  <pawsa@theochem.kth.se>

	* acconfig.h: add USE_PIXBUF
	* configure.in: test for gdk_pixbuf
	* libbalsa/server.c: fix destroy method.
	* src/Makefile.am: add folder-conf.[hc]
	* src/address-book.c: fix crash on toggling when no current book.
	* src/balsa-app.[hc]: implement find_gnode_of_folder()
	* src/mailbox-node.[hc]: add imap folder support+config saving
	* src/main-window.c: fix pixbuf build.
	* src/save-restore.[ch]: add config_folder_add() and
	config_folder_update()
	
2001-02-01  Pawel Salek  <pawsa@theochem.kth.se>

	* INSTALL: update info about gtkhtml and RH.
	* README: descripbe --disable-more-warnings
	* libbalsa/misc.[hc]: add  libbalsa_(de)?escape_specials to allow
	reasonable configuration of regexps.
	* src/balsa-app.c: initialize fields to be on the safe side.
	* src/balsa-app.h: change defaults for QuoteRegexp and date.
	* src/balsa-index.[ch]: handle larger fonts nicer. support sorting
	via mailbox-node. Add balsa_index_set_sort_order().
	* src/balsa-mblist.c: handle larger fonts nicely.
	* src/balsa-message.c: don't hang on corrupted regexp.
	* src/expand-alias.c: be less verbose.
	* src/mailbox-node.h: add fields for persistent sort order.
	* src/main-window.c: aviod double sorting on balsa-index creation.
	* src/pref-manager.c: use deescape_specials.
	* src/mailbox-node.c (balsa_mailbox_node_init): initialize sort
	order fields.
	
2001-01-31  Matthew Guenther  <guentherm@asme.org>

	* src/main-window.c (balsa_window_real_open_mailboxnode): previous
	blocking of signal handler causes problems displaying mailbox name
	in title bar, removed.

2001-01-31  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-index.c (balsa_index_load_mailbox_node): select the
	previous message when deleting the last message in the mailbox
	instead of attempting to select the next one.
	* src/main-window.c (balsa_window_real_open_mailboxnode): don't
	handle the first "switch-page" signal when opening a new mailbox.
	
2001-01-31  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-index.c: (balsa_index_init) make build with -Werror

2001-01-30  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-index.c (balsa_index_update_message): redisplay
	selected message when changing view to already opened mailbox.

2001-01-29  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-index.c (balsa_index_load_mailbox_node): fixed casting
	bug.
	* src/balsa-index.c (moveto_handler): now selects first
	unread/last message instead of just moving there when opening a
	mailbox.

2001-01-28  Matthew Guenther  <guentherm@asme.org>

	* src/Makefile.am: remove balsa-index-page.c from compilation.
	* src/address-book.c: add sendmsg-window.h include.
	* src/balsa-app.h: remove balsa-index-page.h include, main-window.h.
	* src/balsa-index-threading.[ch]: changed references to
	BalsaIndexPage to use BalsaIndex, use new class members.
	* src/balsa-index.[ch]: merged BalsaIndexPage and BalsaIndex.  Now
	a subclass of GtkScrolledWindow.
	* src/balsa-mblist.c: changed references to BalsaIndexPage to use
	BalsaIndex, use new class members.
	* src/mailbox-node.h: formatting changes.
	* src/main-window.c: changed references to BalsaIndexPage to use
	BalsaIndex, use new class members.
	* src/main.c: changed references to BalsaIndexPage to use
	BalsaIndex, use new class members.
	
2001-01-24  Pawel Salek  <pawsa@theochem.kth.se>

	* src/address-book.c: fix the infamous address book crash.
	It happened when there was no book defined and the button next 
	to the address field was clicked.
	* src/sendmsg-window.c: add gnome_dialog_close_hides(ab)

2001-01-22  Gediminas Paulauskas  <menesis@delfi.lt>
	
	* libbalsa/send.c: marked "Sending mail" for translating.
		
2001-01-22  Pawel Salek  <pawsa@theochem.kth.se>

	Implement threading configuration.
	* src/balsa-index-page.[ch]: rememberMailboxNode instead of
	LibBalsaMailbox. FIXME: balsa-index-page and balsa-index should 
	be merged together, present structure is an artefact of old GTK.
	* src/balsa-index-threading.h: fix the include list.
	* src/balsa-index.[hc]: add balsa_index_set_threading_type().
	* src/balsa-mblist.[hc]: all the shown mailboxes have now respective
	mailbox_nodes and are in balsa_app.mailbox_nodes.
	* src/mailbox-conf.c: update API.
	* src/mailbox-node.[ch]: add threading field.
	* src/main-window.[hc]: handle mailbox nodes instead of mailboxes.
	add threading UI callbacks.
	* src/save-restore.c: all the shown mailboxes have now respective
	mailbox_nodes and are in balsa_app.mailbox_nodes
	
2001-01-22  Gediminas Paulauskas  <menesis@delfi.lt>
	
	* src/*.c: Changed some terminology and capitalization. Sorry
	for breaking translations.

2001-01-22  Pawel Salek  <pawsa@theochem.kth.se>

	* NEWS, configure.in: balsa-1.1.0 development release.

2001-01-21  Carlos Morgado  <chbm@chbm.nu>

	* src/main-window.c: add message->toggle new/flagged to main 
	window

	* libbalsa/message.c: (libbalsa_message_has_attachment) got	
	a random seg fault there and added *message check and return false
	if null (seems reasonable).

2001-01-20  Matthew Guenther  <guentherm@asme.org>

	* TODO:  Update DND status.
	* help/C/.cvsignore: Add some files to ignore that are created
	when generating ps or rtf output.
	* help/C/balsa.sgml: Add documentation about moving/copying
	messages using drag and drop.
	* src/balsa-index-page.c (balsa_index_page_window_init,
	create_menu): Allow button2 to initiate DND, change "New" to
	"Unread".
	* src/balsa-mblist.c (balsa_mblist_init): Add signal handler for
	"drag_motion", highlight mailboxes when attempting to receive a
	drop.
	
2001-01-19  Pawel Salek  <pawsa@theochem.kth.se>

	* src/mailbox-conf.h: replace "libbalsa.h" with "mailbox-node.h"
	to make the code compile with threads disabled.
	
	Patch from Albrecht Dreﬂ <albrecht.dress@arcormail.de> for sending
	Disposition-Notification requests.
	* libbalsa/message.[hc]: add dispnotify_to field and handle it.
	* libbalsa/send.c: pass dispnotify_to to libmutt.
	* src/balsa-app.h: add "request a disposition notification" field.
	* src/save-restore.c: save&restore req_dispnotify field.
	* src/sendmsg-window.c: add "RDN" menu entries and handlers.
	* help/C/balsa.sgml: add "RDN" description

2001-01-18  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-app.c: try to guess IMAP passwords when possible
	by Berend De Schouwer <bds@jhb.ucs.co.za>.
	* src/main.c: make the initial configuration even more robust.
	* src/balsa-message.c: balsa_get_font_by_charset() always returns
	a font (a default one if needed) so the compose window can have 
	a chance to find out the character width.

2001-01-17  Carlos Morgado  <chbm@chbm.nu>

	* src/mailbox-node.c: (balsa_mailbox_node_get_context_menu)
	returned to old behaviour, not show option to set special type
	when box already is that special type. masks cosmetic bug when
	setting a box to current special type 

2001-01-16  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-index-page.c: (balsa_message_toggle_new) changed
	behaviour to similar to balsa_message_toggle_flagged

2001-01-16   Pawel Salek  <pawsa@theochem.kth.se>

	Jeff Horwitz <jhorwitz75@yahoo.com>'s patch (with minor changes)
	for prepending the signature.
	* src/balsa-app.h: add sig_prepend field.
	* src/pref-manager.c: configure sig_prepend.
	* src/save-restore.c: save&restore sig_repend
	* src/sendmsg-window.c: handle sig_prepend.

	Berend De Schouwer <bds@jhb.ucs.co.za> fix for off-by one
	* libbalsa/address-entry.c: and copy default domain to be safe.
	
2001-01-15   Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/address.c:
	* libbalsa/mailbox.c: handle properly NULL addresses.
	* src/balsa-index.c: workaround peculiar GtkCTree behavior by
	Atsuhiko Yamanaka <ymnk@jcraft.com>. 

2001-01-14  Matthew Guenther  <guentherm@asme.org>

	* website/screenshots.html.in: Add new screenshots from v1.0.1,
	thumbnails.
	* website/screenshots.html.in: New screenshot image files for
	v1.0.1
	* website/screens/thumbnails/: Add directory, thumbnails of
	screenshots.
	
2001-01-13  Gediminas Paulauskas  <menesis@delfi.lt>

	* libbalsa/send.c: (smtp_answer) always NULL-terminate code[], as
	reported by Olaf Fr‡czyk <olaf@cbk.poznan.pl>. Removed unused
	variables: bytes and tmp.

2001-01-13  Gediminas Paulauskas  <menesis@delfi.lt>

	* src/sendmsg-window.c: with SEND_REPLY_GROUP messages act as with
	other replies. Set the size not of the window, but just the text
	widget. Use wraplength for size only when an option is on.

2001-01-12  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-icons.h: BALSA_PIXMAP_ENVELOPE
	* src/balsa-icons.c: BALSA_PIXMAP_ENVELOPE

	* src/balsa-index-page.c: added toggle submenu with flagged and new 
	* src/balsa-index-page.h: added toggle submenu with flagged and new 

2001-01-11   Pawel Salek  <pawsa@theochem.kth.se>

	* src/mailbox-node.c: fix crash on right button click out of mailbox 
	tree.

2001-01-11  Berend De Schouwer <bds@jhb.ucs.co.za>

	* src/sendmsg-window.c: better guess of default compose window size.

2001-01-09  Pawel Salek  <pawsa@theochem.kth.se>

	* src/main-window.c: treat balsa_app.input_inbox elements as 
	MailboxNodes. This patch hopefully concludes the transormation.
	* src/balsa-index-page.c: Jeff Horwitz <jhorwitz75@yahoo.com>'s
	patch for redrawing message preview after message deletion.
	
2001-01-08  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/Makefile.am: add libbalsa/folder-scanners.[hc]
	* libbalsa/mailbox.[hc]:libbalsa fix a condition because
	(cond == TRUE) is different from (cond) (think about it!)
	* libbalsa/mailbox_imap.[hc]: change type of
	libbalsa_mailbox_imap_set_path(gchar*) arg to const gchar*.
	* libbalsa/mailbox_remote.[hc]: add 
	libbalsa_mailbox_remote_set_server().
	* libbalsa/misc.c: remove remainings of old ImapDir code.
	* libbalsa/folder-scanners.[hc]: added.
	* libbalsa/libbalsa.h: remove deprecated imapdir.h

	* src/Makefile.am: remove local-mailbox.[hc]
	* src/balsa-app.c: remove deprecated local-mailbox.h
	* src/balsa-mblist.c: settle styles for empty folders (which
	are plain leaves from GtkCTree point of view).
	* src/mailbox-node.[ch]: implement most of the folder scanner code.
	* src/save-restore.c: add loading folders from config.

	* src/main-window.c: treat balsa_app.input_inbox elements as 
	MailboxNodes.
	
2001-01-07  Pawel Salek  <pawsa@theochem.kth.se>

	* src/mailbox-conf.c: append POP mailbox nodes to 
	balsa_app.input_inbox instead of just mailboxes. MailboxNodes
	handle configuration and other UI issues.
	* src/pref-manager.c:the POP 'mailboxes' are not in mailbox_nodes 
	any more.
	* src/save-restore.c: update accordingly.

2001-01-06  Pablo Saratxaga <pablo@mandrakesoft.com>

	* *.desktop,sounds/*.soundlist: added Azeri strings

2001-01-06  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-app.c: move local dir back to the top.
	* src/save-restore.c: second part of it.
	* src/local-mailbox.c: fix names of local dirs. 
	Remove load_local_mailboxes() - new code made it trivial.

2001-01-06  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/address-entry.c:
	* libbalsa/address-entry.h:
	* src/sendmsg-window.c:
	* src/expand-alias.h:
	* src/expand-alias.c:
	Latest alias expansion stuff from Berend De Schouwer
	<bds@jhb.ucs.co.za>
	* src/mailbox-conf.c: Typo fixed by Nerijus Baliunas
	<nerijus@users.sourceforge.net>

2001-01-06  Pawel Salek  <pawsa@theochem.kth.se>

	Make the  MailboxNode code proper and compile without warnings
	(thanks to Ian Campbell; blame RH 7.0)
	* src/balsa-mblist.c: remove unused variables.
	* src/local-mailbox.c(traverse_find_path): return a value.
	* src/mailbox-node.c: rename functions to the declared in header file.
	* src/main-window.c: add missing header include.
	
2001-01-01  Pawel Salek  <pawsa@theochem.kth.se>
 
	* src/sendmsg-window.c: initialize glist.
	* src/mailbox-node.[hc] : finish restructuring the MailboxNode code,
	separate folder subtree expansion.
	* src/local-mailbox.[hc]: separate local mailbox tree creation from
	local mail folder creation.
	* src/balsa-app.c: same.
	* src/mailbox-conf.c: initial support for mailbox deletion in the
	new paradigm.

2000-12-31  Pawel Salek  <pawsa@theochem.kth.se>

	Restructure MailboxNode code, separate UI code from backend.
	* libbalsa/misc.[hc]: move MailboxNode code to src/mailbox-node
	* src/mailbox-node.[hc]: added.
	* src/Makefile.am: add mailbox-node.[hc]
	* src/balsa-app.[hc]:
	* src/balsa-mblist.[hc]: move mailbox-related UI code to mailbox-node
	* src/local-mailbox.c: adapt partially to new structure.
	* src/mailbox-conf.[hc]: same.
	* src/main-window.c: same.
	* src/main.c: same.
	* src/pref-manager.c: same.
	* src/save-restore.c: same.
	* src/sendmsg-window.c: same.

	* balsa.spec.in: adapt for RH 7.0
	* libbalsa/address-book.h: update comments.
	* libbalsa/mailbox_pop3.c: add needed include for non-threaded version.
	
2000-12-22  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/send.c
	* src/address-book-config.c:
	* src/mailbox-conf.c:
	* src/main-window.c:
	* src/message-window.c:
	* src/pref-manager.c:
	Set wmclass for a bunch of windows to useful values.

2000-12-22  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/mailbox_local.[ch]: New signal "remove-files".
	* libbalsa/mailbox_mbox.c: Implement "remove-files".
	* libbalsa/mailbox_mh.c: Implement "remove-files".
	* libbalsa/mailbox_maildir.c: Implement "remove-files".
	* libbalsa/misc.[ch]: New function
	libbalsa_delete_directory_contents.
	* src/mailbox-conf.c: Use remove-files instead of callng rm -rf!
	Give user choice of remove from list, remove from disk aswell or cancel
	when removing a local mailbox.

2000-12-21  Ian Campbell  <ijc25@cam.ac.uk>

	* src/main-window.c: Show adddress book non-modal.
	* src/address-book.c: Better non-compose mode. Plug some leaks
	* src/information-dialog.c: Don't print a warning message to
	console when showing an error dialog.
	* src/local-mailbox.c: Plug memory leak

2000-12-20  Ian Campbell  <ijc25@cam.ac.uk>

	* src/balsa-mblist.c: When an open mailbox has no unread messages,
	display '0' instead of a blank.

	* libbalsa/mailbox.c: Tidy some indentation.

2000-12-20  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/libbalsa.c (libbalsa_init): set_option(OPTMHPURGE) so
	MH messages are really deleted rather than moved to ,<number>. (We
	don't need to keep these , files, since we delete to trash)

	* libbalsa/libbalsa.c (libbalsa_init): Properly construct Fqdn
	from hostname and domainname. This makes Message-ID generation
	much securer.

	* libbalsa/misc.c (libbalsa_get_hostname): Strip domain name on
	systems which return it.
	(libbalsa_get_domainname): New function. Gets domain name.

2000-12-19  Ian Campbell  <ijc25@cam.ac.uk>

	* src/balsa-message.c: Add a very simple link_clicked handler to
	the html widget (calls gnome_show_url).

	Initial implementation of Reply to Group function. Still needs
	configuration options.
	
	* libbalsa/mailbox.[ch]: Add mailing_list_address as a field. Add
	configuration loading and saving of this field.
	* src/balsa-index-page.[ch]: add balsa_message_replytogroup which
	uses mailbox->mailing_list_address if set, or else tries to guess
	from a header
	* src/main-window.c: Add Reply to Group menu item.
	* src/sendmsg-window.[ch]: Handle SEND_REPLY_GROUP as a compose type.
	
2000-12-18  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in: bump version to 1.0.1
	* INSTALL: list packages needed for building balsa. 

2000-12-17  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/mailbox_local.c (libbalsa_mailbox_local_new): If the
	mailbox doesn't exist, and create is TRUE then create an Mbox
	style mailbox.

2000-12-17  Pawel Salek  <pawsa@theochem.kth.se>
	Berend De Schouwer <bds@jhb.ucs.co.za> patch for improved
	alias expansion.
	
	* libbalsa/Makefile.am: add address-entry widget to the file list.
	* libbalsa/address-entry.[hc]: the subclassed GtkEntry for mail 
	address edition with alias support.
	* src/expand-alias.[hc]: move code to address_entry widget.
	* src/sendmsg-window.c: update API apriopriately.
	
2000-12-16  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-mblist.c (mblist_drag_cb): Refresh destination index
	page after transferring to fix segfault bug.
	* src/main-window.c: Add drag and drop to notebook tabs of other
	mailboxes.
	* src/sendmsg-window.c: Set locale font for other fields than To:
	and Subject:
	
2000-12-15  Matthew Guenther  <guentherm@asme.org>

	* libbalsa/messages.[ch]: Add function libbalsa_messages_copy.
	* src/balsa-index-page.c: Removed old DND cruft, implemented
	drag-data-get signal handler.
	* src/balsa-mblist.c: Add drag-data-received signal handler.
	
2000-12-15  Ian Campbell  <ijc25@cam.ac.uk>

	* src/balsa-message.c (save_part): If the file selected to save
	the part to exists, ask user to confirm overrighing the file.

2000-12-12  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/mailbox.[ch]: Remove LibBalsaMailboxType, since each
	type therein is now a separate class (and so hasa type id). Rename
	libbalsa_mailbox_valid to libbalsa_mailbox_type_from_path for
	clarity.
	* src/local-mailbox.c: Don't use LibBalsaMailboxType.
	
2000-12-12  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/libbalsa.c (libbalsa_init): Need to register new
	mailboxes at init time so that config loading will work

2000-12-12  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/mailbox_mbox.c:
	* libbalsa/mailbox_mbox.h:
	* libbalsa/mailbox_maildir.c:
	* libbalsa/mailbox_maildir.h:
	* libbalsa/mailbox_mh.c:
	* libbalsa/mailbox_mh.h:
	* libbalsa/Makefile.am:
	New mailbox objects, representing different types of local
	mailbox. Split from LibBalsaMailboxLocal (which is the parent of
	all of these)
	* libbalsa/libbalsa.h: Include headers from above
	* libbalsa/mailbox.c: When loading a mailbox from the config, be
	sure to load the correct sort of local mailbox subclass  if we get
	LibBalsaMailboxLocal as the type. The next time the mailbox is
	saved it should save it's new type correctly.
	* libbalsa/mailbox_local.c: Lots of stuff has moved into
	subclasses. libbalsa_mailbox_local_new now tries to create the
	correct sub class based on the magic number.
	* libbalsa/mailbox_local.h: LibBalsaMailboxLocalType is no longer
	needed (it is implicit in the type of object now).
	
	* src/balsa-mblist.c: Use new interface to mailbox_conf. Populate
	the ContextMenu->New menus with an entry for each type of
	mailbox. Add a menu callback for each type of mailbox that appears
	in the New submenu. 
	* src/balsa-mblist.h: Prototype new menu callbacks
	* src/main-window.c: Populate the File->New menu.
	
	* src/mailbox-conf.c: Substancial rewrite, API is cleaner, lots of
	stuff has been simplified by making the dialog modal and making
	better use of the built in feature of GnomeDialog. New API means
	we don't need to keep track of which page we are on and removes
	MailboxConfPageType. Added ALT+key accelerators to all
	fields. Clarified some field names.
	* src/mailbox-conf.h: Expose new API
	
	* libbalsa/information.h: New message type "FATAL"
	* src/balsa-app.h: Store option for how to display fatal messages.
	* src/information-dialog.[ch]: Handle FATAL error messages. ERROR
	messages no longer cause balsa to exit. Added a new type of
	display - dump to console.
	* src/pref-manager.c: Configure the new FATAL message display
	message. Also use new mailbox-conf interface.
	* src/save-restore.c: Save/Restore FATAL message display
	type. Plug a memory leak. Detecting an MH mailbox is now easier.

	* libbalsa/misc.c: Fix a small thinko.
	
2000-12-11  Ian Campbell  <ijc25@cam.ac.uk>

	* src/sendmsg-window.c: Add support for sending in Romanian.
	* libbalsa/address-book-vcard.c: Fix address_compare for NULL
	parameters.
	* libbalsa/address-book-ldap.c: Only request the attributes we are
	interested in. Ignore some types of non-fatal errors.

2000-12-11  Marius Andreiana  <mandreiana@yahoo.com>

	* po/ro.po: Updated for 1.0 (thanks to Mi∫u Moldovan)
	
2000-12-04  Ian Campbell  <ijc25@cam.ac.uk>

	Much work on the address book back and front ends. 
	
	* libbalsa/address-book.[ch]: New load funciton, takes a callback
	and performs incremental loading, a big win for LDAP I
	hope. Removed address_list member. Added dist_list_mode as per
	address book information.
	* libbalsa/address-book-ldap.c: Implement new load function.
	* libbalsa/address-book-vcard.[ch]: Implement new load function. Use
	stat to determine mtime and only reload when needed.
	* libbalsa/address.[ch]: Add new parameter to to_gchar function,
	selecting which email address to use if there are multiple
	addresses in address_list.
	* libbalsa/misc.c: Use new parameter to libbalsa_address_to_gchar.
	* libbalsa/send.c: Use new parameter to libbalsa_address_to_gchar.
	* src/address-book.[ch]: Turn into a GnomeDialog
	decendant. Eliminate global variables. Update to make use of
	incremental loading of addresses. Improve distribution list
	behavior.
	* src/balsa-message.c: Use new parameter to
	libbalsa_address_to_gchar.
	* src/print.c: Use new parameter to libbalsa_address_to_gchar.
	* src/balsa-app.c: Remove dist_list_mode from global settings.
	* src/save-restore.c: Remove dist_list_mode from global settings.
	* src/main-window.c: Use new address book.
	* src/sendmsg-window.c: Use new address book.
	
2000-12-01  Pawel Salek  <pawsa@theochem.kth.se>
	Lubomir Gelo's <slon@slon.sk> patch for alternative layout.
	* src/balsa-app.h: add alternative_layout field
	* src/main-window.c: do the layout manipulation
	* src/main-window.h: fields for storing panes for layout manipulation
	* src/pref-manager.c: alternative layout configuration (ALC)
	* src/save-restore.c: save&restore ALC

2000-11-30  Pawel Salek  <pawsa@theochem.kth.se>

	Lubomir Gelo's <slon@slon.sk> patch for configuring SMTP port.
	* libbalsa/message.h,libbalsa/misc.h: add port parameter to 
        libbalsa_message_send() and libbalsa_process_queue()
	* libbalsa/send.c: use passed port number where needed.
	* src/balsa-app.[hc]: add smtp_port to balsa_app and set default value.
	* src/main-window.c: call libbalsa_process_queue() with port
	* src/pref-manager.c: port no. configuration.
	* src/save-restore.c: save& restore port no.
	* src/sendmsg-window.c: call libbalsa_message_send() with port no.
	
2000-11-29  Ian Campbell  <ijc25@cam.ac.uk>

	* src/expand-alias.c: Don't expand with address books which don't
	have expansion enabled.

2000-11-27  Matthew Guenther  <guentherm@asme.org>

	* TODO: cleaning up
	* src/balsa-mblist.c (balsa_mblist_init): better ctree row height
	selection, set display info arg depending on global
	* src/spell-check.[ch]: define preprocessor symbol to try and
	avert problems with new versions of pspell.

2000-11-28  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/address-book.[ch]: New function
	libbalsa_address_book_alias_complete.
	* libbalsa/address-book-vcard.[ch]: Implement new function.
	* libbalsa/address-book-ldap.[ch]: Stub for new function.
	* libbalsa/misc.[ch]: New marshalling function.
	* src/expand-alias.c, src/sendmsg-window.c: Make use of new
	address book functionality.

2000-11-27  Pawel Salek  <pawsa@theochem.kth.se>

	* src/spell-check.c, src/print.c: misspellings removed.
	* src/balsa-index-threading.{h,c}: reformatted to follow balsa rules.
	* README: some notes concerning mail filtering and libtool.
	
2000-11-26  Pawel Salek  <pawsa@theochem.kth.se>

	* src/print.c: adapt to new threaded message view.
	* src/main-window.c: don't crash on configuration change when
	toolbar disappears. (fix #31997 and some other)
	
2000-11-25  Pawel Salek  <pawsa@theochem.kth.se>

	* src/main-window.c: remove deprecated code and translate texts in
	menus.
	* libbalsa/mailbox_imap.c: handle error on IMAP mailbox checking.
	* libbalsa/mailbox.c: clean up ibbalsa_mailbox_free_messages()
	
2000-11-24  Pawel Salek  <pawsa@theochem.kth.se>

	Atsuhiko Yamanaka's <ymnk@jcraft.com> patch for multithreaded msg view.
	* libbalsa/mailbox.c: store message's in-reply-to header.
	* libbalsa/message.[hc]: add references_for_threading field to 
	destroy method.
	* libmutt/parse.c: forcing user headers..
	* src/Makefile.am: add balsa-index-threading.{c,h} to the file list.
	* src/balsa-index-page.c: use CTree instead of CList for message index.
	* src/balsa-index.[ch]: the same.
	* src/store-address.c: the same.
	* src/balsa-index-threading.[hc]: the threading support (jwz sorting)
	
	* src/balsa-app.c: remove forgotten include mblist-window.h 
	* src/main-window.c: the same + Atsuhiko's CList->CTree
	* src/main.c: remove not needed mblist-window.h and balsa-mblist.h
	
	
2000-11-22  Carlos Morgado  <chbm@chbm.nu>

	* src/main-window.c: (fill_mailbox_passwords) fix fix, permit 
	empty passwords

2000-11-21  Carlos Morgado  <chbm@chbm.nu>

	* src/main-window.c (fill_mailbox_passwords): fix checking of pop3
	passwords

2000-11-21  Pawel Salek  <pawsa@theochem.kth.se>

	fix #32805.
	* libbalsa/mailbox_pop3.c: omit mailboxes without password field
	* src/main-window.c: implement fill_mailbox_passwords that ask for 
	passwords in the main thread. Remove some old garbage.
	* libbalsa/send.c: compile with threads disabled.

	Patch from Lubomir Gelo <slon@slon.sk> for controlling auto close 
	feature:
	* src/balsa-app.h: define close_mailbox_auto and close_mailbox_timeout
	* src/main-window.c: the timeout-checking code
	* src/pref-manager.c: the configuration part.
	* src/save-restore.c: save-restore part.
	
2000-11-20  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/send.c: place outbox and fccbox in right positions
	* src/balsa-mblist.c: add mblist_default_signal_bindings() for 
	connecting signals that are useful for mailbox tree, but not
	transfer tree.
	* src/main-window.c: use that.
	
2000-11-19  Gediminas Paulauskas  <menesis@delfi.lt>

	* src/spell-check.c: (balsa_spell_check_start) set current encoding
	to pspell config.

2000-11-19  Pawel Salek  <pawsa@theochem.kth.se>

	* Makefile.am: remove deprecated mblist-window.[hc] from the file list.
	* src/balsa-mblist.[hc]: transfer all the used functions from 
	mblist-window in order to clean up the code a bit. Remove old crust.
	* src/balsa-message.c: don't call gtk_editable_claim_selection()
	for unrealized widgets.
	* src/mailbox-conf.c: rename balsa_mblist_redraw() to more apriopriate
	balsa_mblist_repopulate().
	* src/main-window.c: insert mailbox tree in the scrolled window.
	* src/pref-manager.c: balsa_mblist_redraw()-> repopulate(). 
	Remove some crust.
	* src/sendmsg-window.c: changes to remove libbalsa/send.c dependency
	on balsa-app
	* libbalsa/{misc,message}.h: same. API changes.
	* libbalsa/send.c: remove dependency on balsa-app. Use 
	libbalsa_information for error messages.
	
2000-11-16  Carlos Morgado  <chbm@chbm.nu>

	* src/main.c (main): ignore SIGPIPE so we don't die when pop 
	(and imap?) server disconect. there must be a better way of 
	doing this - show me how.
	* libbalsa/pop3.c (fetch_pop_mail): be saner about saving uids 
	so we don't mess up last_uidl when weird stuff happens.
	
2000-11-16  Pawel Salek  <pawsa@theochem.kth.se>
        Atsuhiko Yamanaka's <ymnk@jcraft.com> speedup patch with minor
	changes and updates.
	
	* libbalsa/mailbox.[hc]: implement new "messages-new" and
	"messages-delete" signal for fast insertion and removal of
	multiple messages.
	* libbalsa/message.c: use new signals for moving and removing
	messages. Extra safety in libbalsa_message_body_ref()
	* src/balsa-index-page.c: make sure there is only one idle_handler
	waiting for execution. Use new signals for (re)moving messages.
	* src/balsa-index.c: use new signals for (re)moving messages.
	
2000-11-14  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox_pop3.c: pass last_uid to libbalsa_fetch_pop()
	* libbalsa/pop3.c: use uid.
	* libbalsa/send.c: be more verbose on relaying error.
	* src/sendmsg-window.[ch]: fix #31938:
	Show attachments when one is added to an outgoing message.
	
2000-11-13  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/Makefile.am: plug in new pop3.[hc] files
	* libbalsa/mailbox_pop3.[hc]: use new POP3 code. add filtering
	option.
	* libbalsa/message.h: add prototype of libbalsa_message_queue()
	* libbalsa/misc.h: add prototype of libbalsa_process_queue()
	* libbalsa/send.c: split libbalsa_message_send to _send()
	and process_queue()
	* libbalsa/pop3.[ch]: added.
	* libmutt/Makefile.am: remove old pop.c
	* src/sendmsg-window.[hc]: add Queue=Send Later menu entry.
	* src/main-window.c: use libbalsa_process_queue() for sending
	queued mails.
	* src/mailbox-conf.c: add filter to the configurable POP settings.
	
2000-11-13  Gediminas Paulauskas  <menesis@delfi.lt>

	* intl, .cvsignore: removed this dir completely.
	
2000-11-13  Carlos Morgado <chbm@chbm.nu>

	* src/save-restore.c: remove balsa_app.charset field that is used
	no more.
	* configure.in: added "Use SSL" and "Use GSS"

2000-11-13  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in: add --with-ssl configuration option. ssl support
	compiles now but has not been tested yet.
	* src/balsa-app.[hc]: remove  balsa_app.charset field that is used
	no more.
	* src/balsa-index-page.c: remove gnome_appbar_pop() without _push()
	* src/pref-manager.c: remove charset field, start reorganization
	of the layout to the old one (or the galeon's, if it tell more).
	
2000-11-12  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-mblist.c: additional check on public functions' 
	arguments. In long term, an audit of the balsa_quit() function
	is needed (dependencies between GUI and mailbox backend codes).
	
2000-11-11  Pawel Salek  <pawsa@theochem.kth.se>

	* README, balsa.1.in: document -m option better.
	* AUTHORS: update for 1.0.0.
	* src/main-window.[hc]: don't ignore -c cmd line option (it was always
	overwritten by load_config()). make check_new_messages_cb() public.
	* src/main.c: don't ignore -o cmd line option (see above). parse
	URLs passed as argument to -m option.
	* src/sendmsg-window.[hc]: provide sendmsg_window_set_field() to
	set fields from -m option.
	* libbalsa/message.c: add some harmless but useful sanity tests.

	* configure.in: bump the version number to 1.0.0. 
	Time for a glass of champagne! Thanks to everybody participating!
	

2001-09-22  Pawel Salek  <pawsa@theochem.kth.se>

	Nicolas Evrard <nicoe@wanadoo.be> - "next flagged" button.
	* src/balsa-icons.[hc]: add "next flagged" icons.
	* src/balsa-index.c: implement select_next_flagged().
	* src/main-window.c: "next flagged" menu callbacks.
	* src/message-window.c: ditto.
	* src/toolbar-factory.c:
	* src/toolbar-prefs.c: add the button to the toolset.

	Peter Bloomfield  <PeterBloomfield@MindSpring.com>
	* libbalsa/message.h: add `flow' argument to various libbalsa_message_*
	* libbalsa/mime.[ch]: use `flow' to decide how to wrap lines.
	* libbalsa/misc.[ch]: add a number of *_rfc2646() functions.
	* libbalsa/send.c: set the `format=flowed' attribute in
	add_mutt_body_plain().
	* src/balsa-app.[ch]: add recognize_rfc2646_format_flowed,
	send_rfc2646_format_flowed and browse_wrap_length.
	* src/balsa-message.c: wrap lines for display according to prefs.
	* src/main-window.[ch]: defines update_view_menu(), used to
	synchronize the view menu to the prefs window.
	* src/pref-manager.c. user control over whether to reflow
	paragraphs in incoming `format=flowed' messages, and whether to
	generate outgoing `format=flowed' messages.
	* src/save-restore.c: save and restore wrap preferences.

	* src/sendmsg-window.[ch]: wrap lines for sending and for display
	accordingly to prefs.
	catch `Enter' keystrokes to trim trailing spaces, when generating a
	`format=flowed' message.
	
2001-09-23  Carlos Morgado  <chbm@chbm.nu>

	* src/sendmsg-window.c (quoteBody): make "forward quoted"
	quote

2001-09-22  Carlos Morgado  <chbm@chbm.nu>

	* configure.in: patch from wil <wil@dready.org>
	propagate --with-ssl=path to libmutt
	
2001-09-22  Pawel Salek  <pawsa@theochem.kth.se>

	* Makefile.am: fix --disable-nls build of tarball.
	* libbalsa/misc.[hc]: fix #60834: an ever-lasting MIME problem due
	to immortal gnome-mime bug.
	* libbalsa/files.c: continuation.
	* libbalsa/send.c: same.
	* src/print.c: same.
	
	Albrecht Dreﬂ's attachment forwarding and msg postpone patch (#60874).
	* libbalsa/body.c: MessageBody::mime_type always useful.
	* libbalsa/message.[hc]: implement libbalsa_message_save().
	* libbalsa/mime.[hc]: make process_mime_part() global.
	* libbalsa/send.c: postponing messages with attachments fixed.
	* src/balsa-app.h: add forward_attached field.
	* src/balsa-index.c: new forwarding UI code.
	* src/main-window.[hc]: same.
	* src/message-window.c: same.
	* src/main.c: add_attachment() API modified.
	* src/pref-manager.c: choose default forward method.
	* src/save-restore.c: s&r it.
	* src/sendmsg-window.[hc]: the meat of attachment forwarding code.
	
	Stephen P. Wall <Steve_Wall@redcom.com>:
	* src/balsa-icons.[hc]: reply_to_group toolbar icon.
	* src/balsa-index.[hc]: reply to grup UI modified.
	* src/balsa-mblist.c: enable/disable empty trash toolbar button.
	* src/main-window.c: empty trash toolbar button disable/enable.
	* src/toolbar-factory.[hc]: empty trash, reply group and close mbox
	buttons.
	* src/toolbar-prefs.c: continued.
	
2001-09-21  Abel Cheung  <maddog@linux.org.hk>

	* balsa.desktop: Rename zh_TW.Big5 -> zh_TW.

2001-09-20  Pawel Salek  <pawsa@theochem.kth.se>

	* src/folder-conf.c: do not disconnect already disconnected data
	(Peter Bloomfield).

2001-09-19  Pawel Salek  <pawsa@theochem.kth.se>

	* src/print.c: print no/selected/all headers (Albrecht Dreﬂ).
	* src/balsa-message.c: interpret mixed/alternative dispositions
	(#59998, Toralf Lund).

2001-09-19  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-index.c: propagate unread status to top parent,
	update style when index is created
	
2001-09-18  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-message.c: preview url in the status bar (hitched97
	<hitched97@myrealbox.com> + Albrecht Dreﬂ
	<albrecht.dress@arcormail.de>).

	Toralf Lund <toralf@kscanners.no>:
	* src/balsa-index.[hc]: thread expansion and collapsing (#60002).
	* src/main-window.c: menus for thread e&c (#57659).
	* src/sendmsg-window.c: message save when composing (#60176).
	
2001-09-18  Pawel Salek  <pawsa@theochem.kth.se>

	* README, NEWS, configure.in: well deserved 1.2.0 release.
	* src/sendmsg-window.c: hush gtk_file_selection warnings whenever
	possible (fixed for gtk+-1.2.9, remains for gtk+-1.2.10). 
	Fix memory leaks (Peter Bloomfield).
	
2001-09-17  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox.c: passing NULL mailbox to mailbox_destroy is 
	an error.
	* libbalsa/mailbox_imap.c: properly destroy the mailbox.
	* libbalsa/mailbox_maildir.c:
	* libbalsa/mailbox_mbox.c: chain up destroy.
	* src/main-window.c: 
	* src/balsa-mblist.c: second part of d&d fixes.
	* src/main.c: exit balsa. Carefully. (avoid referencing partially
	destroyed UI).

2001-09-17  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-mblist.c: Peter Bloomfield - when dnding
	selection goes back to source mailbox

2001-09-15  Peter Bloomfield <PeterBloomfield@MindSpring.com>

	* src/balsa-index.c: re-enable D&D target highlighting.
	* src/balsa-mblist.c: fix signed-unsigned comparison.
	
2001-09-14  Carlos Morgado  <chbm@chbm.nu>

	* TODO: 1.4 targets
	
2001-09-13  Pawel Salek  <pawsa@theochem.kth.se>

	* src/save-restore.c: fix #60293: preserve mailbox order.
	
2001-09-12  Pawel Salek  <pawsa@theochem.kth.se>

	* src/pref-manager.c: it is legal to call update_mail_servers() 
	when pref window is closed.
	
	Proper mailbox referencing by Peter Bloomfield 
	<PeterBloomfield@MindSpring.com>:
	* src/mailbox-node.c: ref and sink mailbox on create.
	* src/main.c: unref specials on exit.
	* src/save-restore.c: referencing special mailboxes.

2001-09-10  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/mailbox_pop3.c (libbalsa_mailbox_pop3_check): WorksForMe(tm)
	seems to work for other people too. looks nicer

2001-09-06  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/send.c: make gcc happier, make return of libbalsa_message_postpone
	safer

2001-09-06  Pawel Salek  <pawsa@theochem.kth.se>

	* src/main.c, src/sendmsg-window.c: fix couple of ugly warning in
	the code I have just commited.

2001-09-06  Carlos Morgado  <chbm@chbm.nu>

	* src/sendmsg-window.c: removed autopostpone_message_cb. no longer
	needed

2001-09-06  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in: add -Werror for CVS users.
	* libbalsa/mailbox_pop3.c: Melanie's fix for ugly problem.
	* libbalsa/send.c: do not use unintialized vars.
	* src/main-window.c: send delete signal when quit requested.
	* src/Makefile.am: remove empty main.h from the file list.
	* src/sendmsg-window.[ch]: message saving-on-quit support.
	* src/expand-alias.c, src/information-dialog.c:
	* src/toolbar-factory.c, src/toolbar-prefs.c: don't include main.h
	* src/main.c: clean up the cleanup on exit code.

2001-09-05  Carlos Morgado  <chbm@chbm.nu>

	* src/sendmsg-window.c (postpone_message_cb): don't destroy the
	message if postpone fails

	* libbalsa/send.c: patch from Anders Larsen <bulk@alarsen.net> 
	to permit draftbox on imap. same juju as imap on ...
	clean a couple of (void *)0
		
	* src/main-window.c: MENU_FILE_PRINT_POS was defined twice. eek.

2001-09-04  Carlos Morgado  <chbm@chbm.nu>

	* src/folder-conf.c: unbreak folder set config window 

2001-09-04  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/message.c: initialize LibBalsaMessage::dispnotify field.
	* src/pref-manager.c: automatic scrollbars in the servers window.

2001-09-01  Wang Jian  <lark@linux.net.cn>

	* configure.in(ALL_LINGUAS): Changed from zh_CN.GB2312 to zh_CN

2001-08-31  Pawel Salek  <pawsa@theochem.kth.se>

	* src/main-window.c, src/sendmsg-window.c: add some shortcuts (#57657).
	
2001-08-31  Pawel Salek  <pawsa@theochem.kth.se>

	* README, NEWS, configure.in: release balsa-1.2.pre3
	* src/sendmsg-window.c: some people believe English means American
	English.
	
2001-08-31  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/send.c: not trigger #59671. fix in 1.3

2001-08-30  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-index-threading.c: 
	* src/filter-edit-callbacks.c: indentation ;)	

	* configure.in: removed TEMPORARILY --with-sasl for 1.2

2001-08-29  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/pop3.c:  case-insensitive handling of server answers.
	(Brian Stafford)
	* src/main-window.c: selective mailbox check fix (Toralf Lund).
	* src/balsa-message.c: clean up URL handling code (Albrecht Dreﬂ).

2001-08-28  Matthew Guenther  <guentherm@asme.org>

	* src/sendmsg-window.h: make read_widget array bigger for postpone
	menu/toolbar items.
	* src/sendmsg-window.c: return check for send sanity to include
	postponement, check from field in addition to to field to
	determine sendability.

2001-08-28  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/mailbox_pop3.c: fix descriptor leak

2001-08-28  Pawel Salek  <pawsa@theochem.kth.se>

	Brian Stafford <brian@stafford.uklinux.net> ESMTP TLS patch extended.
	* acconfig.h: rename 
	HAVE_SMTP_STARTLS->HAVE_SMTP_TLS_CLIENT_CERTIFICATE
	* configure.in: use renamed #define.
	* libbalsa/address-book-ldap.c: add <sys/time.h>
	* libbalsa/message.[ch]: add tls_mode flag to message_send.
	* libbalsa/misc.h: add tls_mode flag to process queue.
	* libbalsa/pop3.c: simplify getaddrinfo() part.
	* libbalsa/send.c: enable/disable TLS.
	* src/balsa-app.[hc]: certificate_passphrase field.
	* src/balsa-message.c: pass user TLS choice to libbalsa_message_send().
	* src/pref-manager.c: configure TLS and the passphrase.
	* src/save-restore.c: save and restore TLS settings.
	* src/sendmsg-window.c: use TLS setting to libbalsa_message_send().
	* README: some instructions.

	Melanie Thielker <balsa@t-data.com> recently-used mailbox (MRU)
	patch.
	* src/balsa-app.[hc]: folder_mru and drag_default_is_move fields.
	* src/balsa-index.c: populate transfer menu with MRU list.
	* src/balsa-mblist.c: disconnect mailbox signals on destroy. 
	Use default Move/Copy action.
	* src/main-window.c: restore all headers option before saving.
	* src/message-window.c: populate Move menu with MRU list.
	* src/pref-manager.c: configure default d&d action.
	* src/save-restore.c: save&restore default d&d action.
	
2001-08-27  Pawel Salek  <pawsa@theochem.kth.se>

	* src/sendmsg-window.c: fix ##59535 introduced two days ago.

2001-08-25  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in: clean up and fix; check if libESMTP has TLS
	* libbalsa/Makefile.am: remove duplicate compiler options.
	* libinit_balsa/Makefile.am: 
	* src/Makefile.am: Same.
	* src/filter-edit-callbacks.c: 
	* src/balsa-app.h: last signed-unsigned comparisons removed.
	* libbalsa/address-book-ldif.c: remove redundant assignment
	(spotted by Stephen P. Wall <Steve_Wall@redcom.com>).
	* libbalsa/send.c: enable TLS in SMTP whenever possible.
	* src/main-window.c: don't imap_check_test() NULLs.
	* Makefile.am: clean up versioning.
	* balsa.spec.in: replace BALSA_SHORT_VERSION-> BALSA_VERSION

	SMTP TLS support by Brian Stafford.
	* acconfig.h:  add HAVE_SMTP_STARTLS 
	* src/balsa-app.[hc]: add smtp_certificate_passphrase field.
	* src/pref-manager.c: configure passpahrase.
	* src/save-restore.c: save and restore it.
	
2001-08-24  Pawel Salek  <pawsa@theochem.kth.se>

	Clean up using hints from Morten Welinder <terra@diku.dk>
	* configure.in: test warning options recognized by gcc.
	* libbalsa/address-book-ldap.c:
	* libbalsa/address-entry.[hc]:
	* libbalsa/misc.c: 
	* libbalsa/pop3.c:
	* src/balsa-app.h: 
	* src/balsa-mblist.c:
	* src/balsa-message.c:
	* src/pref-manager.c:
	* src/sendmsg-window.c: fix signed-unsigned comparisions.

	* libbalsa/mailbox_pop3.c:  use g_strerror() instead of sys_errlist[]

2001-08-23  Carlos Morgado  <chbm@chbm.nu>

	* src/mailbox-conf.c: remove pop3s

2001-08-23  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in, NEWS, README: release 1.2.pre2

2001-08-23  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-index.c: do not crash when there is an index without 
	associated mailbox_node (Peter Bloomfield).
	* src/main.c, src/threads.h: remove not used appbar_lock mutex.
	* libbalsa/mailbox_imap.c: fix crash on multiple deletion of 
	IMAP mailboxes.
	* libbalsa/address-entry.c: don't free useful values on Ctrl-K.

	Albrecht Dreﬂ - protocol handlers improvements:
	* libbalsa/message.[hc]: remove libbalsa_message_get_text_content().
	* libbalsa/mime.[hc]: improve process_mime_part() instead.
	* src/balsa-app.h: add support for stripping HTML.
	* src/pref-manager.c: modification in preferences...
	* src/save-restore.c: ... and saving and restoring.
	* src/sendmsg-window.c: strip HTML if requested.

2001-08-22  Carlos Morgado  <chbm@chbm.nu>

	based on patch from M . Thielker <balsa@t-data.com>
	* src/main-window.c: 
	* libbalsa/mailbox_pop3.c: 
	* libbalsa/mailbox_pop3.h: 
	use tmp mbox to download files and copy them to inbox. 
	allows inbox in imap.

2001-08-21  Pawel Salek  <pawsa@theochem.kth.se>

	Ali Akcaagac <ali.akcaagac@stud.fh-wilhelmshaven.de>'s patch:
	* src/pixmap/*.xpm:
	* src/balsa-icons.[hc]: clean up code; replace old icons with new 
	versions.

2001-08-20  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/address-entry.c: fix some memory leaks.
	* libbalsa/folder-scanners.c (libbalsa_scanner_imap_dir): free state.
	* src/main-window.c : streamline the mailbox checking code. (Peter B).
	* src/store-address.c: fix memory leak (Ali Akcaagac).
	* src/folder-conf.c: Peter Bloomfield's patch cleaning the code.
	
2001-08-19  Carlos Morgado  <chbm@chbm.nu>

	* src/folder-conf.c: 
	* src/mailbox-conf.c: 
	(based on Peter Bloomfield's patch) change port when SSL
	is toogled
	
2001-08-19  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/server.c: fix to signal marshaller when not using SSL
	spoted by Manuel A. McLure <manuel@mclure.org>

2001-08-19  Carlos Morgado  <chbm@chbm.nu>

	* acconfig.h:
	* configure.in: USE_SSL
	
	* src/mailbox-node.c: 
	* libbalsa/folder-scanners.c: generate imaps paths 
	* src/mailbox-conf.c: 
	* src/folder-conf.c: ssl toogle in mbox config dialogs
	* libbalsa/server.h: 
	* libbalsa/server.c: 
	* libbalsa/mailbox_imap.c: know about ssl

	Merged patch from Manuel A. McLure <manuel@mclure.org> and myself.
		
2001-08-17  Carlos Morgado  <chbm@chbm.nu>

	* src/save-restore.c: 
	* src/balsa-mblist.c: 
	* src/balsa-index.c: 
	* src/balsa-app.c: 
	* src/balsa-app.h: 
	Peter Bloomfield: cleanup to mblist
	Ali Akcaagac: cleanup to mblist, remember size column width
	
2001-08-16  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/send.c: patch from Manuel McLure <manuel@mclure.org>
	to use mailbox->url instead of reconstructing it

	* src/store-address.c: fix from Ali Akcaagac to yesterday's
	patch

2001-08-15  Pawel Salek  <pawsa@theochem.kth.se>

	Ali Akcaagac <ali.akcaagac@stud.fh-wilhelmshaven.de> - fix some
	address book issues, including organization handling.
	* libbalsa/address-book-vcard.c: don't save empty fields.
	* libbalsa/address.[hc]: add middle-name.
	* src/store-address.c: parse for middle name.

2001-08-14  Pawel Salek  <pawsa@theochem.kth.se>

	PeterBloomfield@MindSpring.com>:
	* src/mailbox-conf.c: rescan from higher up the tree after deleting 
	an IMAP mailbox.
	* libbalsa/notify.[hc]: use a callback to test if a mailbox should be
	checked for mail or not.
	* src/main-window.c: provide imap_check_test() determining if
	given IMAP mailbox should be checked for new mail.

	* src/print.c: Paper selection implemented (Albrecht Dreﬂ).
	
2001-08-13  Pawel Salek  <pawsa@theochem.kth.se>

	Take care of #53566. Stephen P. Wall <Steve_Wall@redcom.com>.
	(treated as bug fix, not a new feature).
	* libbalsa/address-book-ldif.{h,c}: LDIF support.
	* libbalsa/Makefile.am: add address-book-ldif.{h,c}
	* libbalsa/libbalsa.[hc]: register LibBalsaAddressBookLdif type.
	* src/address-book-config.c: add LDIF configuration support.
	* src/address-book.c: list full name instead of Ids.
	* src/pref-manager.c: recognize LDIF address book type.

	* src/main-window.c: remove debugging output.
	* help/C/balsa.sgml: information on forcing alias expansion.
	* src/balsa-index-threading.c: fix msg threading 
	(Andrew Ferguson <andrew@owsla.cjb.net>).

2001-08-11  Pawel Salek  <pawsa@theochem.kth.se>

	* help/C/balsa.sgml: update LDAP-related tips.
	* libbalsa/address-book-ldap.c: add timeout, clean up code.
	* src/address-book-config.c: add keyboard shortcuts.
	* src/balsa-app.[hc]: add a default value to create_check().
	* src/mailbox-conf.c:
	* src/folder-conf.c: use new create_check() API.
	
	
2001-08-11  Carlos Morgado  <chbm@chbm.nu>

	* src/expand-alias.h: expand_alias_find_match() proto fixup

2001-08-11  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/address-book.[hc]: distinguish fast and slow=expensive
	address books.
	* libbalsa/address-book-ldap.c: is_expensive = TRUE
	* libbalsa/address-entry.[hc]: attempt to fix cursor jumping.
	char_offset[] was read out of range (probably related to #52902)
	Support for Ctrl-R to look up expensive address books.
	* src/balsa-index.c: append dots when showing multiple recipents
	in the msg index. Clean up.
	* src/expand-alias.c: expand_alias_find_match() can do now fast or
	expensive lookups.
	
2001-08-10  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in: --with-iconv configure option (Brian Stafford)
	* src/balsa-index-threading.c: clean-up.
	* src/balsa-index.c: fix #57659.
	* src/balsa-message.c: add missing mailto: protocol handler.
	* src/main.c: move URL parsing code to src/sendmsg-window.c
	* src/sendmsg-window.[hc] : new location of URL parsing code.
	* src/main-window.c: set paned size when mblist is not shown
	(Melanie Thielker).
	

2001-08-09  Pawel Salek  <pawsa@theochem.kth.se>

	* src/main-window.c:
	* libbalsa/send.c: clean up the sending progress dialog.
	
2001-08-08  Pawel Salek  <pawsa@theochem.kth.se>

	* README: clarify the print page size syntax.
	* src/balsa-message.c: Albrecht Dreﬂ <albrecht.dress@arcormail.de>
	speedup and clean up of the URL code. + some bug fixes.

	* balsa.spec.in: don't pass CFLAGS to libmutt, it's enough to pass
	the flags to configure script.
	* NEWS, onfigure.in: bump version number to 1.2.pre2
	

2001-08-07  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-index.c: fix #58642: closing mailbox after idle
	callback has been registered but before the mailbox preview had
	time to update.

	Peter Bloomfield <PeterBloomfield@MindSpring.com> "imap servers
	in preferences" patch:
	* src/folder-conf.c: update_mail_servers() when needed.
	* src/mailbox-conf.c: same.
	* src/pref-manager.c: the server enumeration and edition support.
	
2001-08-06  Pawel Salek  <pawsa@theochem.kth.se>

	* Makefile.am: tar's I option is obsolete, use j.
	* src/main.c: gconf_init returns GError instead of GConfError 
	as of GConf-1.0.
	* libbalsa/mailbox_imap.c (imap_delete_folder): unsubscribe
	mailbox before deletion.
	* libbalsa/filter-private.h:
	* libbalsa/filter.h: regexps are private to filters.
	* src/mailbox-node.c: remove memory leak and clean up the code.

2001-08-03  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-app.c: walk over the mailbox_nodes tree in the 
	POST_ORDER sequence.
	
2001-08-01  Pawel Salek  <pawsa@theochem.kth.se>

	* help/C/balsa.sgml: documentation updates (Peter Bloomfield).

	Introduce URL field for mailbox to uniquely identify it.
	* libbalsa/mailbox.[hc]: add url field.
	* libbalsa/mailbox_imap.[hc]: use url field.
	* libbalsa/mailbox_local.[hc]: remove redundant path field.
	* libbalsa/mailbox_maildir.c: do not use removed path field.
	* libbalsa/mailbox_mbox.c: same.
	* libbalsa/mailbox_mh.c: same.
	* libbalsa/notify.c: use URL field.
	* libbalsa/send.c: do not use removed path field.
	* src/balsa-app.c: same.
	* src/balsa-icons.[hc]: add icons for draftbox and sentbox.
	* src/balsa-mblist.c: use new icons.
	* src/folder-conf.c: same.
	* src/mailbox-conf.c: do not use removed path field.
	* src/mailbox-node.c: same.

	* libbalsa/folder-scanners.c: make the output less verbose.
	* src/balsa-app.c: remove duplicated mailboxes in local tree.
	* src/mailbox-node.c: use the URL power to place special mailboxes
	in proper places of the folder tree.
	* src/pref-manager.c: show list widget so it can compute its size
	properly (Albrecht Dreﬂ).
	
2001-07-31  Pawel Salek  <pawsa@theochem.kth.se>

	* src/main-window.c: menu entry for message view source.
	* libbalsa/Makefile.am: add source-viewer.c
	* libbalsa/libbalsa.h: add libbalsa_show_message_source() header.
	* libbalsa/source-viewer.c: the actual code for message source
	browsing.
	* libbalsa/folder-scanners.c: do not double free regex.
	
2001-07-28  Pawel Salek  <pawsa@theochem.kth.se>

	* src/address-book.c: do not crash on changing distribution mode
	when there is no address book.

2001-07-27  Pawel Salek  <pawsa@theochem.kth.se>

	Make balsa compile with --disable-threads and --disable-nls
	* configure.in: AM_GNU_GETTEXT -> AM_GNOME_GETTEXT
	* libbalsa/send.c: fix non-MT build.
	* src/main-window.c: fix non-MT build.
	* src/main.c: fix non-NLS build.

	* help/C/balsa.sgml: some basic info about different mailbox types.
	More inline text is needed.
	* src/folder-conf.c: folder fixes from Peter Bloomfield.
	* src/information-dialog.c: break lines for status.

2001-07-25  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/pop3.c: use pclose() on popen()-ed FILE.
	* src/toolbar-factory.c: ugly but reliable toolbar clearing.
	* src/sendmsg-window.c: release_toolbar on destroying.
	
	Albrecht Dreﬂ <albrecht.dress@arcormail.de>:
	* src/balsa-index.c: justify the message size to right.
	* src/main.c: set locale.
	* src/spell-check.c: use new PCRE to handle national characters
	better.

2001-07-24  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/misc.c(libbalsa_set_charset): set SendCharset as well.
	* libbalsa/identity.c: remove testing uninitialized variable.
	* libbalsa/mailbox_local.c: squash unitialized variable warning.
	* src/balsa-app.[hc]: persistent threading_type.
	* src/balsa-index.c: use persistent threading type.
	* src/save-restore.c: save and restore it.

	* src/balsa-message.c: Albrecht Dress
	<albrecht.dress@arcormail.de>: RE updates + #55548 fix. Emmanuel
	<e.allaud@wanadoo.fr>: correct find_beg_and_end() in the corner
	case when str+pos points on a \n.

	* src/main-window.c: update threading_type to mirror menu settings.
	* src/address-book-config.c: squash unitialized variable warnings.
	* src/mailbox-node.c: same.
	* src/sendmsg-window.c: same.

	* src/toolbar-factory.c:  M . Thielker <balsa@t-data.com> + me:
	do not make assumptions about GtkToolbar structure. Add more
	comments.

	* configure.in: do not include -lesmtp twice.
	
2001-07-23  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/send.c: the send mail progress dialog (Brian Stafford
	<brian@stafford.uklinux.net>). 

	Configurable page scrolling step by Lynn Kerby <lfk@kerbit.net>
	* src/balsa-app.[hc]: add pgdownmod and pgdown_percent fields.
	* src/balsa-message.c: use them.
	* src/pref-manager.c: and configure...
	* src/save-restore.c: and save&restore.
	
2001-07-21  Carlos Morgado  <chbm@chbm.nu>

	* configure.in: fix sasl reporting
	patch from Ali Akcaagac to check from balsa-enable libesmtp

2001-07-20  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/Makefile.am: add missing PCRE_CFLAGS.
	* src/balsa-app.[hc]: remove balsa_message_{move,copy} wrappers.
	* src/balsa-index.c: use libbalsa functions instead of wrappers.
	* src/balsa-mblist.[hc]: remove crap. allow mailbox selection without
	opening.
	* src/main-window.c: fix "all headers" toolbar button handlers.
	* src/toolbar-factory.[hc]: use TOOLBAR_ enums instead of magic ints.
	* src/message-window.c: same.
	* src/sendmsg-window.c: same.

2001-07-19  Pawel Salek  <pawsa@theochem.kth.se>

	* AUTHORS: update Ian Campbell's address.
	* INSTALL: add info about gnome-print, libESMTP and pcre.
	* src/balsa-mblist.c: fix hotspot calculation with shown headers
	M. Thielker <balsa@t-data.com>
	* src/spell-check.c: fix regexp's.
	* src/toolbar-factory.c: fix hit translations.

2001-07-18  Carlos Morgado  <chbm@chbm.nu>

	* configure.in:
	* acconfig.h: USE_SASL

	* libbalsa/send.c: new libmutt/rfc2047

	* libbalsa/mailbox_imap.c: 
	* libbalsa/folder-scanners.c: removed ImapCRAM. was it ever used ?

2001-07-18  Pawel Salek  <pawsa@theochem.kth.se>

	Perl Compatible Regular Expressions by 
	Albrecht Dreﬂ <albrecht.dress@arcormail.de>:
	* acconfig.h: add HAVE_PCRE
	* configure.in: look for PCRE library.
	* src/Makefile.am: add PCRE_CFLAGS flags to CFLAGS and libs to
	LIBS.
	* src/quote-color.[hc]: make is_a_quote() take const regex()
	* src/spell-check.c: use PCRE.
	* libbalsa/filter.h: same.

	* libbalsa/send.c: fix BCC handling 
	(Brian Stafford <brian@stafford.uklinux.net>).

	* src/main-window.c: add shortcut to customize.
	* src/toolbar-prefs.c: get rid of _usize().
	* po/POTFILES.in: add missing files.
	
2001-07-16  Pawel Salek  <pawsa@theochem.kth.se>

        IMAP flag handling and new mail notification
	(balsa-imapflags.patch) by M. Thielker <balsa@t-data.com>
	with minor some changes.
	* sounds/balsa.soundlist, sounds/email.soundlist:
	add German descriptions.
	* src/balsa-app.[hc]: add notify_new_mail_sound,
	notify_new_mail_dialog, check_imap, check_imap_inbox fields.
	* src/balsa-index.c: implement new message notification scheme.
	* src/main-window.[hc]: second part.
	* src/pref-manager.c: configure new mail notification scheme.
	* src/save-restore.c: save its data and restore it.

	* src/toolbar-prefs.[hc]: fix translating strings.
	* src/balsa-message.c: set wmclass of "Save MIME Part" dialog.
	
2001-07-16  Carlos Morgado  <chbm@chbm.nu>

	* src/toolbar-prefs.c: fix make with pedantic options

2001-07-16  Pawel Salek  <pawsa@theochem.kth.se>

	Peter Bloomfield's <bloomfld@eos.ncsu.edu> IMAP mailbox rename
	patch.
	* libbalsa/mailbox_imap.[hc]: libbalsa_imap_rename_subfolder() added.
	* src/folder-conf.[hc]: (sub)folder rename support.
	folder_conf_imap_sub_node() made global.
	* src/mailbox-node.c: add IMAP mailbox deletion support.
	* help/C/balsa.sgml: help for this all.
	
2001-07-15  Pawel Salek  <pawsa@theochem.kth.se>

	all-bars3.patch from M. Thielker <balsa@t-data.com>
	* src/Makefile.am: add toolbar-prefs.[hc] and toolbar-factory.[hc]
	* src/balsa-app.h: add toolbar_count, toolbar_ids, toolbars and
	toolbar_wrap_button_text fields.
	* src/balsa-icons.[hc]: add flag_new.xpm and mark_all.xpm and 
	all_headers.xpm
	* src/main-window.c: switch to new customizable toolbars.
	* src/message-window.c: same.
	* src/sendmsg-window.c: same.
	* src/pixmaps/all_headers.xpm:
	* src/pixmaps/flag_new.xpm: 
	* src/pixmaps/mark_all.xpm: add pixmaps.
	* src/print.c: add extra warning function when gnome-print
	unavailable.
	* src/save-restore.c: save/read toolbars.
	* src/toolbar-factory.[hc]: implement toolbar creation.
	* src/toolbar-prefs.[hc]: implement toolbar configuration.
	
2001-07-14  Pawel Salek  <pawsa@theochem.kth.se>

	* src/main-window.c: add menu shortcut for identities.
	* src/save-restore.c: remove from the config files removed identities.
	* src/sendmsg-window.c: add menu shortcuts.
	* libbalsa/identity.c: fix focus issues, memory leaks. 
	
2001-07-13  Pawel Salek  <pawsa@theochem.kth.se>

	* README, NEWS, configure.in: release balsa-1.1.7
	* src/sendmsg-window.[hc]: use identity data to select
	signature (christophe barbe <christophe.barbe.ml@online.fr>).
	* balsa.1.in: add information about recently added command line
	options.

2001-07-12  Pawel Salek  <pawsa@theochem.kth.se>

	* src/mailbox-node.c: Peter Bloomfield's <bloomfld@eos.ncsu.edu> 
	duplicate folder squashing. 

	Maciej Golebiewski's <s30125@lycos.com> message size/line patch.
	And index refreshing on changed date format.
	* libbalsa/mailbox.c: 
	* libbalsa/message.[hc]: give access to message length an line count.
	* src/balsa-app.[hc]: add line_length field.
	* src/balsa-index.[hc]: Add the msg size support and format refreshing.
	* src/main-window.c: format switching support.
	* src/pref-manager.c: same.
	* src/save-restore.c: save line_length.

	Melanie Thielker's <balsa@t-data.com> "always queue" patch.
	* src/save-restore.c: save always_queue_sent_mail.
	* src/balsa-app.[hc]: add  always_queue_sent_mail field.
	* src/sendmsg-window.c: use this variable.
	
	* libbalsa/send.c: use accessors to access message's subject.
	* src/balsa-index-threading.c:
	* src/balsa-message.c: 
	* src/print.c: same.

	* src/main.c: add command line flag for POP3 debugging.
	* libbalsa/pop3.[hc]: POP3 debugging cleaned.
	
2001-07-11  Pawel Salek  <pawsa@theochem.kth.se>

	Make Identity a clean(?) libbalsa object.
	* libbalsa/identity.[hc]: new location.
	* libbalsa/Makefile.am:
	* src/Makefile.am: updated to reflect new location.
	* libinit_balsa/balsa-druid-page-user.gob: 
	BalsaIdentity->LibBalsaIdentity
	* src/balsa-app.[hc]: remove fields that have been moved to the
	identity object(s).
	* src/balsa-index-threading.c: update accordingly.
	* src/balsa-message.c, src/main-window.c, src/sendmsg-window.c:
	the same.
	* src/save-restore.[hc]: make the identity itself responsible for
	saving.
	
	* libbalsa/libbalsa.h: remove some garbage.
	
2001-07-11  Pawel Salek  <pawsa@theochem.kth.se>

	* src/sendmsg-window.c: fix widget disabling when check-spelling. 
	
	Peter Bloomfield's <bloomfld@eos.ncsu.edu> patch for
	creation and deletetion of IMAP subfolders.
	* libbalsa/mailbox_imap.[hc]: implement libbalsa_imap_new_subfolder(),
	libbalsa_imap_delete_folder()
	* src/balsa-app.c: fix destroy_mailbox_tree().
	* src/folder-conf.c:  folder_conf_imap_sub_node(), 
	and other functions for IMAP browsing implemented.
	* src/mailbox-conf.c: IMAP (sub)folder removal.
	* src/mailbox-node.c: IMAP subfolder creation. some cleanup.
	* src/main-window.c: IMAP subfolder creation menu entry.

	Lynn Kerby's <lfk@kerbit.net> fix for paper size:
	* src/print.c: warn if the papersize read from the conf is invalid.

	christophe barbe <christophe.barbe@online.fr>
	* src/balsa-index.c: automatic scrollbars, reasonable width of the
	popup menu of trafer folder for message transfer.

	Manuel McLure <manuel@mclure.org>+M. Thielker <balsa@t-data.com>
	IMAP mailbox can be used as sentbox. #51537
	* libbalsa/mailbox_imap.[hc]: make reset_mutt_passwords() global
	* libbalsa/send.c: implement the fcc operation (path setting and
	authorization).
	
2001-07-09  Pawel Salek  <pawsa@theochem.kth.se>

	M. Thielker <balsa@t-data.com>: hush gcc-3.0 warnings.
	* src/balsa-index-threading.c, src/filter-edit-callbacks.c: add break

	christophe barbe <christophe.barbe@online.fr>:
	* src/sendmsg-window.c: get rid of widget_set_usize().
	* src/balsa-app.[hc]: store suggested window dimensions.
	* src/save-restore.c: save suggested compose window dimensions.

	Peter Bloomfield <bloomfld@eos.ncsu.edu>
	* src/balsa-mblist.c: mailbox opening for mixed mailbox/folder nodes
	via expand/collapse signals.

2001-07-09  Carlos Morgado  <chbm@chbm.nu>

	* src/sendmsg-window.c: separator before identity button

2001-07-07  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/pop3.c: use reentrant getaddrinfo instead of gethostbyname.
	* src/balsa-mblist.c: make use of the MailboxNode expansion status.
	* src/main-window.c: update maintainer/author list.
	* src/print.c: fix printing messages containing tabs.

2001-07-06  Matthew Guenther <guentherm@asme.org>

	* src/balsa-identity.c (config_dialog_ok_cb): Save and sync
	identity info to disk when the dialog is OK'd.
	* src/balsa-icons.[ch]: Add new identity icon.
	* src/main-window.c: Use new icon for Identities... menu item.
	* src/pref-manager.c: Remove large blocks of commented out code.
	* src/save-restore.[ch]: Move function config_identities_save to
	public header file.
	* src/sendmsg-window.[ch]: Add toolbar button and use new icon for
	both toolbar and menu item.  Also fix spell-check menu item icon.
	* src/pixmaps/identity.xpm: New icon for menuitems or buttons
	relating to identities.
	
2001-07-06  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-mblist.c: wrong mailbox was offered to delete when 
	mailbox switching using tabs (Peter Bloomfield).
	* src/balsa-index.c: open a new message (when available) after
	transfer. Do not show wrong warning messages after multiple delete.
	* libbalsa/address-entry.c: place cursor at the beginning (Emmanuel).
	* libbalsa/filter-funcs.c: clear one more field.
	* libbalsa/filter-private.h: fix field names (not yet used).
	* src/address-book.c: remove redundant test.

	* balsa.spec.in: cleaned up (Spider <spider@darkmere.wanfear.com>)

2001-07-01  Carlos Morgado  <chbm@chbm.nu>

	* src/main.c: 
	* src/sendmsg-window.h: 
	* src/sendmsg-window.c: 
	* src/balsa-app.h:
	patch from "W. Michael Petullo" <balsa@flyn.org> that adds
	attachments options on the command line

2001-06-27  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-mblist.c: return to old DnD behaviour.
	revert a rather unfortunate mblist update bug introduced
	by commit mistake on 06-17

2001-06-26  Carlos Morgado  <chbm@chbm.nu>

	* src/mailbox-node.c: don't segfault on root=NULL in 
	add_local_mailbox and add_local_folder
	* libbalsa/folder-scanners.c (libbalsa_scanner_local_dir): 
	handle nested MH boxes better

2001-06-24  Carlos Morgado  <chbm@chbm.nu>

	* src/mailbox-node.c (traverse_find_path): don't ignore
	directories. (fixes duplicate-dir bug - why is maildir
	being scanned twice anyway ?)

2001-06-20  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-mblist.c: clean up the code and fix #56454 partially
	(the password issue remains).
	
2001-06-20  Pawel Salek  <pawsa@theochem.kth.se>

	* README, NEWS, configure.in: release 1.1.6
	
2001-06-20  Pawel Salek  <pawsa@theochem.kth.se>

	Rename libbalsa_mailbox_commit_changes() to more apriopriate
	libbalsa_mailbox_sync_backend() (When I think about it now,
	sync_with_libmutt() would be more specific...). And also:
	* src/balsa-mblist.c: get rid of one more balsa_index_reset();
	clean up the code.
	* libbalsa/message.c: fix message counting and uninitialized
	variable usage. Fix message copying from readonly mailboxes.
	* libbalsa/send.c: commiting closed mailboxes makes no sense.
	* src/balsa-index.c: yet another balsa_index_reset() removed.
	* src/main-window.c: two balsa_index_reset() removed.
	* src/sendmsg-window.c: commit()->sync_backend()
	* libbalsa/mailbox.[hc]: closing mailbox that are still referred forces
	sync_backend(). commit()->sync_backend()
	
2001-06-19  Pawel Salek  <pawsa@theochem.kth.se>

	Fix the message index flipping on message transfer and deletion.
	Do not parse mailboxes when opening them just for appending.

	* src/balsa-index.c: remove append argument from 
	libbalsa_mailbox_open() calls. Do not use balsa_index_reset()
	* src/balsa-mblist.c: clean up signals.
	* src/main-window.c: 
	* src/sendmsg-window.c: use updated libbalsa_mailbox_open() API.
	* libbalsa/mailbox.h: define LibBalsaMailboxAppendHandle
	* libbalsa/mailbox.c: add OPEN_MAILBOX_APPEND signal and its handler.
	* libbalsa/mailbox_imap.c: 
	* libbalsa/mailbox_local.c: add OPEN_MAILBOX_APPEND handlers.
	* libbalsa/mailbox_pop3.c: use updated libbalsa_mailbox_open() API.
	* libbalsa/message.c: clean up message copy and move methods
	* libbalsa/misc.[hc]: add new marschaller.
	* libbalsa/send.c: use updated libbalsa_mailbox_open() API.
	
2001-06-19  Pawel Salek  <pawsa@theochem.kth.se>

	Peter Bloomfield <bloomfld@eos.ncsu.edu>
	* libbalsa/address-entry.c:
	* src/balsa-app.c: 
	* src/balsa-index.c: fix mispellings and uninitialized variables.
	* src/mailbox-node.c: revert to more memory-friendly version.

	Emmanuel <e.allaud@wanadoo.fr>:
	* src/expand-alias.c: end the loop earlier when possible.
	* src/balsa-mblist.c: remove some crap.
	
2001-06-18  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-identity.c (identity_list_update): Properly initialize
	pointer to NULL

2001-06-18  Carlos Morgado  <chbm@chbm.nu>

	* src/sendmsg-window.c: change the quit_add levels from 0 to 1
	as they should be.

2001-06-18  Matthew Guenther  <guentherm@asme.org>

	* libinit_balsa/balsa-druid-page-user.gob: Change initialization
	to store user information in a default identity instead of
	balsa_app.
	* src/balsa-identity.[hc]: New files that define the BalsaIdentity
	object type.
	* src/pref-manager.c: Remove configuration items that are now
	configured per identity.
	* src/balsa-app.[hc]: Added a list of loaded identities, and a
	pointer to the currently selected default identity.  
	* src/main-window.c: Added menu item to open the identity manager.
	* src/save-restore.c: rewrote config_identities_(save/load) to
	handle multiple identities, using config_identity_(save/load).
	* src/sendmsg-window.c: Added the ability to change the identity
	used to compose an identity on a per message basis.
	
2001-06-18  Carlos Morgado  <chbm@chbm.nu>

	* src/sendmsg-window.h:
	* src/sendmsg-window.c: autopostpone messages when balsa exits
	
2001-06-17  Carlos Morgado  <chbm@chbm.nu>

	* src/main-window.c (check_messages_thread): check mboxes
	after fetching pop
	* src/balsa-mblist.c: make drag messages only copy not
	move
	* libinit_balsa/balsa-druid-page-directory.gob: tell the user
	about /var/spool/mail

2001-06-16  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalse/send.c: fix -m option when using with libESMTP:
	the sending_mail flag was not set.
	* src/pref-manager.c: capitalize strings to be capitalized.
	* configure.in: link against libiconv library properly (contributed
	by Brian Stafford).
	
2001-06-14  Pawel Salek  <pawsa@theochem.kth.se>

	* src/sendmsg-window.c: work around gnome-mime bug.
	
	Patch from Peter Bloomfield <bloomfld@eos.ncsu.edu> for 
	browsing IMAP folders that can contain both messages and subfolders
	(so far, only leaves could contain messages).

	* libbalsa/folder-scanners.c: modify the scanning scheme.
	* src/balsa-app.c: traverse all nodes, not only leaves, for mailboxes.
	* src/balsa-mblist.c: modify mailbox node unread status computing code.
	* src/mailbox-node.c: traverse all.
	
2001-06-12  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/send.c (libbalsa_message_cb): update to libesmtp-0.8 
	types

2001-06-11  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-app.c: 
	* src/balsa-app.h: 
	balsa_message* - wrappers around libbalsa_message functions that 
	know about the mblist

	* src/main-window.c: 
	* src/balsa-index.c: 
	* src/balsa-mblist.c: use balsa_message functions

	* libbalsa/message.c (libbalsa_message_real_set_read_flag): do
	mark unread properly

	* libbalsa/pop3.c: compile without threads
	Pawel's safe_read_char patch converted to poll()

	* src/sendmsg-window.c: don't remove whitespace from signatures 

2001-06-05  Carlos Morgado  <chbm@chbm.nu>

	* help/C/balsa.sgml: 
	* README:
	update from Brian about libESMTP
	
2001-05-29  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-app.h: helpful macro BALSA_IS_MAILBOX_SPECIAL()
	* src/mailbox-conf.c: treat Esc as cancel action when deleting 
	mailboxes.

2001-05-28  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-index.c (do_delete): fix segfault when deleting from Trash
	* src/main-window.c: make the trash button move to trash again

2001-05-28  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/send.c: display a clear message on message sending failure:
	Fix #55065.

2001-05-27  Pawel Salek  <pawsa@theochem.kth.se>

	Phase out imlib and replace it with gdk-pixbuf. The only
	dependency is now gnome-druid code in libinit_balsa.
	* src/filter-edit-callbacks.c:
	* src/filter-edit-dialog.c: provide gdk-pixbuf alternative to
	imlib functions.
	* src/main-window.c: clean up imlib/gdk-pixbuf code.

2001-05-26  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-message.c: clean BalsaPartInfo (de)allocation.
	* src/main.c: clean thread initialization/destroying.
	* libbalsa/address.c: KISS, just a bit.

2001-05-25  Carlos Morgado  <chbm@chbm.nu>

	* libinit_balsa/balsa-druid-page-user.gob: fix 1st page with
	no esmtp

	* src/save-restore.c (config_global_load): build with no esmtp 
	and -Werror

2001-05-25  Pawel Salek  <pawsa@theochem.kth.se>

	* help/C/balsa.sgml: use PNG V1.1 DTD, 1.0 is deprecated.
	* src/spell-check.c: fix #54123: 0.12 compatibility.
	* src/balsa-app.[hc]: add save_dir field storing the last
	directory path, an attachment or other message par was saved to.

	* src/balsa-message.c: change the save mime part window to more
	user friendly one.
	* src/save-restore.c: save and restore attach_dir and save_dir.
	* src/main-window.c: enable/disable move to trash entry as well.
	
2001-05-23  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/folder-scanners.c: patch for MH nested mailboxes from 
	Gordon Oliver <gordo@pincoya.com>.
	* src/main-window.c:
	* src/balsa-index.[ch]: make distinction between "Move to Trash" and
	"Delete" message clear.
	* src/balsa-message.c: remove dependence on libmutt.
	
2001-05-22  Pawel Salek  <pawsa@theochem.kth.se>

	Merge libESMTP branch to HEAD. Affected file list:
	* NEWS, README, acconfig.h, balsa.spec.in, configure.in,
	* help/C/Makefile.am, help/C/README, help/C/balsa.sgml, 
	* libbalsa/address.[hc], libbalsa/message.h, libbalsa/misc.h,
	* libbalsa/send.c, libinit_balsa/balsa-druid-page-user.gob,
	* src/balsa-app.[hc], src/balsa-message.c, src/main-window.c,
	* src/pref-manager.c, src/print.c, src/save-restore.c, 
	* src/sendmsg-window.c.

2001-05-22  Pawel Salek  <pawsa@theochem.kth.se>

	* balsa.spec.in: new, RH-7.1 compatible spec file.
	* src/save-restore.c: convert old SMTP config.
	* NEWS, README, configure.in: release 1.1.5.

2001-05-18  Pawel Salek  <pawsa@theochem.kth.se>

	* src/print.c: don't crash when encountering empty lines.
	* src/balsa-message.c: use elaborate but relatively strict
	regex for URLs.

2001-05-18  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-message.c:  dingus-click-pointer patch from
        Albrecht Dreﬂ <albrecht.dress@arcormail.de>

2001-05-16  Pawel Salek  <pawsa@theochem.kth.se>

	* help/C/balsa.sgml: signature doc updates from 
	Julian M Catchen <julian@catchen.org>.
	* help/C/README: some updates relevant to RH 7.1.
	* help/C/Makefile.am: do not force particular stylesheet location.

2001-05-15  Carlos Morgado  <chbm@chbm.nu>

	* src/pref-manager.c (open_preferences_manager): fix typo in ifdef

2001-05-15  Pawel Salek  <pawsa@theochem.kth.se>

	Daniel Foster <daniel-l@34SP.com>:
	* libbalsa/address-entry.c: more natural address pasting.
	* src/sendmsg-window.c: menu entry for appending the signature

2001-05-14  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/send.c (libbalsa_process_queue): small patch from Brian 

2001-05-13  Carlos Morgado  <chbm@chbm.nu>

	* src/sendmsg-window.c (read_signature): 
	* libbalsa/misc.h: 
	* libbalsa/misc.c (libbalsa_readfile_nostat): 
	patch from Julian M Catchen <julian@catchen.org> with small tweaks


2001-05-13  Carlos Morgado  <chbm@chbm.nu>

	* libinit_balsa/balsa-druid-page-user.gob:
	* src/sendmsg-window.c:
	* src/save-restore.c: 
	* src/pref-manager.c:
	* src/main-window.c:
	* src/balsa-message.c:
	* src/balsa-app.h: 
	* src/balsa-app.c: 
	* libbalsa/send.c: 
	* libbalsa/misc.h: 
	* libbalsa/message.h: 
	* libbalsa/address.h: 
	* libbalsa/address.c: 
	* acconfig.h: 
	* configure.in: 
	added --with-esmtp configure option. --with-esmtp=no totally
	disables the (e)smtp capacities and uses local sendmail
	
2001-05-11  Pawel Salek  <pawsa@theochem.kth.se>

	(bugfix from AD)
	* libbasa/message.c (libbalsa_message_charset): 
	* src/print.c: don't free strings you don't own. 
       
2001-05-10  Pawel Salek  <pawsa@theochem.kth.se>
	
	From Albrecht Dreﬂ <albrecht.dress@arcormail.de>:
	* src/print.c: compute the number of pages properly.
	* src/balsa-app.h: added field for url color
	* src/save-restore.c: save and restore this entry
	* src/pref-manager.c: add "Hyperlink color" in the Colors notebook
	* src/balsa-message.c: the stuff to detect and store url's, and to
	call the browser.
	From Jacob Ils¯ Christensen <firelake@mail1.stofanet.dk>:
	* src/balsa-mblist.c: upate the mailbox message count column properly.
	
2001-05-07  Carlos Morgado  <chbm@chbm.nu>

	Applied libESMTP patch from Brian Stafford. 
	created branch 'libESMTP'.
	
	* src/save-restore.c: changed SMTP* to ESMTP* on .gnome/balsa 

2001-05-05  Pawel Salek  <pawsa@theochem.kth.se>

	A set of patches from Albrecht Dreﬂ <albrecht.dress@arcormail.de>
	* src/print.c: rewritten: multipart printing, including icons,
	images etc.
	* src/sendmsg-window.c: don't double free a string. guess the file
	type properly.
	* libbalsa/send.c:
	* libbalsa/files.c: try harder guessing the file type.
	* libbalsa/message.c: fix the message part charset recognition.

2001-04-30  Pawel Salek  <pawsa@theochem.kth.se>

	* src/print.c: handle cases when conversion to utf-8 fails.

2001-04-17  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in, NEWS: release balsa-1.1.4

2001-04-20  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/send.c: encode BASE64 non-text message parts: Fix #52891.
	
2001-04-17  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/address-entry.c: workaround for incorrectly handled
	address cutting. Cutting the text by mouse leads to ", , "
	appearing in the address entry, and the code cannot handle empty
	addresses. FIXME!
	
	* configure.in: require gnome-print-0.25 to allow printing non-english
	texts.
	* src/print.c: utf8-enabled printing support by 
	Albrecht Dreﬂ <albrecht.dress@arcormail.de>
	
2001-04-17  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/libbalsa_private.h: CLIENT_CONTEXT() macro: type cast
	is not a l-value in strict C. fix #53050.
	* libbalsa/mailbox.h: change type of context fld to struct _CONTEXT*.
	
2001-04-16  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/server.c: (libbalsa_server_load_config) fix bug #52914
	(mailboxes without password field in config)

2001-04-15  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-index.[hc]: Add balsa_index_set_first_new_message to
	find the first unread message in an index by row, instead of by
	message number.  Change balsa_index_set_threading_type to use
	this.

2001-04-06  Pawel Salek  <pawsa@theochem.kth.se>

	* src/main.c: GConf-1.0.0 compatibility. remove duplicate of
	empty_trash function.
	* src/balsa-app.[hc]: move balsa_find_index_by_mailbox to where it 
	belongs and give it a more apriopriate name.
	* src/balsa-mblist.c:
	* src/balsa-index.[ch]: use renamed function above. fix the 
	crash on "empty trash" #51701.
	* src/main-window.[hc]: share the empty_trash() function.
	
2001-04-06  Pawel Salek  <pawsa@theochem.kth.se>

	* src/main-window.c:
	* libbalsa/mailbox_local.c, libbalsa/mailbox.c:
	Fix the GDK locking as approved in #52420.

2001-04-05  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-index-threading.c: (chop_re) fix stoping condition

2001-04-03  Pawel Salek  <pawsa@theochem.kth.se>

	* src/main-window.c: lock GDK in balsa_window_progress_timeout().
	
2001-04-02  Carlos Morgado  <chbm@chbm.nu>

	* src/main-window.c (show_about_box): bugs. -> bugzilla.

2001-03-30  Pawel Salek  <pawsa@theochem.kth.se>
	Patch from Stephen P. Wall <Steve_Wall@redcom.com>

	* src/balsa-app.h: change the max color depth; add reply_string 
	and forward_string fields.
	* src/balsa-index-threading.c: guess reply messages more intelligently.
	* src/balsa-message.c: new quote color code.
	* src/main-window.c: update author list.
	* src/pref-manager.c: configure reply_string, forward_string and 
	colors.
	* src/save-restore.c: s&r reply_string, forward_string and 
	colors.
	* src/sendmsg-window.c: better reply/fwd subject generation using
	defined strings.
	
2001-03-29  Pawel Salek  <pawsa@theochem.kth.se>

	* help/C/balsa.sgml: update IMAP folders section.
	* NEWS, configure.in: release 1.1.3.
	* libbalsa/mailbox_imap.c: extra g_return_if_fail test
	* libbalsa/notify.c: handle NULL paths as equal to "".	

2001-03-26  Pawel Salek  <pawsa@theochem.kth.se>

	* src/pref-manager.c, src/sendmsg-window.c: remove remainings of
	the old printing code.

2001-03-26  Stanislav Brabec  <utx@penguin.cz> 

        * configure.in: Added Czech to ALL_LINGUAS.

2001-03-22  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/body.c: save temporary file only when needed.
	* src/balsa-app.c: remove not used header files.
	* src/balsa-message.c: translate critical error messages.
	* src/expand-alias.c: remove not used header files. add static
	in make_rfc822 definition.
	* src/mailbox-conf.c, src/save-restore.c: remove not used header files.

	Patch from Albrecht Dreﬂ <albrecht.dress@arcormail.de> 
	for Message Disposition Notification (MDN) reply feature.
	* acconfig.h: add BALSA_MDN_REPLY define.
	* configure.in: support --enable-mdn-reply configuration option.
	* libbalsa/body.[hc]: add body->mime_type field.
	* libbalsa/mailbox.c: copy the message->dispnotify_to field from
	mutt's data.
	* libbalsa/send.c: support sending MDN notifications.
	* src/balsa-app.h : add MDN configuration fields.
	* src/balsa-message.c: fundamental MDN support & UI.
	* src/save-restore.c: read & save MDN configuration.
	* src/pref-manager.c: MDN configuration.
	
2001-03-21  Pawel Salek  <pawsa@theochem.kth.se>

	* src/save-restore.c: 
	* src/balsa-app.[hc]: remove remainings of old printing code.
	* src/pref-manager.c: clean up the code.
	* libbalsa/address-book-vcard.c: fix the list merging bug.
	* libbalsa/mailbox_local.c:
	* libbalsa/mailbox.c: hopefully fix the deadlocking problem on 
	SMP machines.
	
2001-03-18  Matthew Guenther  <guentherm@asme.org>

	* libbalsa/mailbox_maildir.c (libbalsa_mailbox_maildir_create):
	don't issue an error if the mailbox is parsed as Maildir.

2001-03-16  Carlos Morgado  <chbm@chbm.nu>

	* src/mailbox-node.c: added code to save and restore sorting and
	threading options per node.  

	* src/mailbox-conf.c:  don't add mailboxes under mail/ to config
	(unfinished)

2001-03-14  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/mailbox_maildir.c: (libbalsa_mailbox_maildir_create)
	* libbalsa/mailbox_mh.c: (libbalsa_mailbox_mh_create) teach balsa
	about creating maildirs and mh. (tested against mutt)
	
2001-03-14  Pawel Salek  <pawsa@theochem.kth.se>

	* src/folder-conf.c: use balsa_mailbox_node_rescan()
	* src/mailbox-node.[hc]: define balsa_mailbox_node_rescan().
	Add "Rescan" option to right mouse button folder menu.
	
2001-03-12  Pawel Salek  <pawsa@theochem.kth.se>

	Patch from rached ben mustapha <rbenmustapha@cvf.fr>:
	* src/balsa-index.h: fix indentation.
	* src/balsa-mblist.[ch]: add& use currently_selected_ctree_node;
	mark tabs with unread messages.
	* src/main-window.c: add missing balsa_mblist_focus_mailbox() call.
	Patch from Berend De Schouwer <bds@jhb.ucs.co.za>: 
	* libbalsa/address-entry.c: fix focus bug; cleanup code.
	* libbalsa/address-book-ldap.c: remove debugging output.

2001-03-08  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in: fix HEIMDAL build (Dmitry G. Mastrukov's patch).
	
2001-03-06  Pawel Salek  <pawsa@theochem.kth.se>

	* src/folder-conf.[hc]: IMAP folder deletion support.
	* src/mailbox-node.c: 
	* src/save-restore.[hc]: same.
	* src/mailbox-conf.c: fix #51769.
	* src/main-window.c: add "New Imap folder" to the File menu.
	
2001-03-05  Pawel Salek  <pawsa@theochem.kth.se>

	* src/main-window.c: update open_mailbox_list on timeout mbox close
	
2001-03-05  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/mailbox_local.c: 
	* libbalsa/mailbox_maildir.c:
	* libbalsa/mailbox_mbox.c:
	* libbalsa/mailbox_mh.c: better handling of errors, MH and maildirs
	
2001-03-05  Pawel Salek  <pawsa@theochem.kth.se>

	* src/main-window.c: do mailbox notify_check() in the checking thread.
	* libbalsa/body.c: security fix: use safe_fopen.
	* libbalsa/folder-scanners.c: make scanning work for Cyrus IMAPD.
	
2001-03-03  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/folder-scanners.[hc]: repsect libbalsa_ namespace.
	Scanning IMPA folders both in LIST and LSUB modes works now with
	UW-IMAP server.
	* libbalsa/mailbox_imap.c: support for subscribing to remote
	folders.
	* src/balsa-mblist.c: show empty folders properly.
	* src/folder-conf.c:
	* src/balsa-app.[hc]: improve edition of IMAP folders.
	* src/mailbox-node.c: same. + subscription support.
	
2001-03-02  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox_imap.c: take care of Timeout to allow checking 
	multiple mailboxes in a row.
	* src/folder-conf.c: 'subscribed' configuration accessed not-yet 
	created widgets.
	* src/mailbox-conf.c: remove old crap. Fix mailbox deletion.
	* src/mailbox-node.c: add some debugging output for folder 
	configuration.
	* src/main.c: fix detection of inititial run.
	* src/save-restore.c: same.
	* src/sendmsg-window.c: armour file attachinng code. Russian 
	language fixes from Dmitry G. Mastrukov <dmitry@taurussoft.org>
	* NEWS, README: update for 1.1.2
	* help/C/balsa.sgml: update IMAP help.
	* libbalsa/mailbox_local.c: remove redundant casts.
	* libbalsa/misc.[hc]: libbalsa_set_charset() returns old charset.
	* libbalsa/server.c: handle properly missing passwords.
	* src/save-restore.c: fix setting special mailboxes.
	
	* src/balsa-icons.[hc]: rached <rached@benmur.net>'s patch
	* src/main-window.c:    for little close button on notebook's tabs.
	* src/pixmaps/small-close.xpm: 
	
2001-02-28  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/mailbox_local.c: (libbalsa_mailbox_local_set_path)
	fixed silly bug introduced 3 days ago (my bad)

2001-02-27  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/address-book-ldap.c: RFC2254 compatibility patch from 
	Berend De Schouwer.
	* src/mailbox-node.c: don't crash on mailbox that cannot be open.
	* src/main-window.c: disable temporarily  progress gtk_main_loop
	when compiled with MT enabled.

2001-02-26  Pawel Salek  <pawsa@theochem.kth.se>

	* src/main/window.c: fix "-o" option

2001-02-25  Carlos Morgado  <chbm@chbm.nu>

	* src/main-window.c: (real_open_mbnode) fix nasty gdk deadlock
	when opening non-existing mbox

	* libbalsa/mailbox_local.c: (libbalsa_mailbox_local_set_path) use 
	libbalsa_mailbox_*_create  

	* libbalsa/mailbox_mbox.[ch]: libbalsa_mailbox_mbox_create 
	* libbalsa/mailbox_maildir.[ch]: libbalsa_mailbox_maildir_create
	* libbalsa/mailbox_mh.[ch]: libbalsa_mailbox_mh_create

	
2001-02-24  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-mblist.[hc]: implement mblist_remove_mailbox_node().
	* src/mailbox-conf.[hc]: use mblist_remove_mailbox_node() instead of 
	mblist_repopulate(). callaback for mailbox edition from menu fixed.
	* src/main-window.c: fix mailbox edition from menu; release gdk_lock
	
2001-02-23  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/send.c:  remove redundant pthread_exit().
	* src/balsa-index.c: 
	* src/main-window.c: improve MT mailbox opening so the signals are 
	handled in correct order.
	* src/balsa-message.c: armouring gdk_pixbuf.
	* src/sendmsg-window.c: check if the sending thread exited before
	quitting when handling "--compose" option"
	
2001-02-22  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/address-entry.c: bug fix from 
	Berend De Schouwer <bds@jhb.ucs.co.za>.
	* libbalsa/message.c: don't crash when trying to operate on
	closed mailboxes.
	* libbalsa/libbalsa.c: skip empty mutt error messages.
	
2001-02-21  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-index-threading.c (threading_jwz, threading_simple):
	use balsa window progress bar to indicate state of threading.
	* src/main-window.[ch]: changed progress bar utilities to use
	attached data instead of global variables, also lookup progress
	bar relative to the window given.  Make routines to allow
	functions to increment the progress bar as well as use it in
	activity mode.


2001-02-21  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/mailbox_local.c: (libbalsa_mailbox_local_set_path) fix
	bug reported on list, create local mbox when needed.

2001-02-18  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-index.c: fix threading.
	* src/main-window.[hc]: update threading menu when mailbox index
	switched.

2001-02-18  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/folder-scanners.[hc]: 
	initial support for subscribed mailboxes.
	* libbalsa/mailbox.c: lock mailbox in libbalsa_mailbox_load_messages().
	* libbalsa/mailbox_imap.c:
	* libbalsa/mailbox_local.c: locking fixes.
	* src/balsa-app.[hc]: collect some common widget creation code:
	create_entry, create_label, create_check. Read paper size for 
	printing from configuration.
	* src/balsa-index.c: performance improvements; fix for view_on_open
	disabled.
	* src/folder-conf.c: initial support for subscribed mailboxes.
	* src/mailbox-node.[hc]: same.
	* src/information-dialog.c: print new line after message.
	* src/mailbox-conf.c: move commonly used function to balsa-app
	* src/main-window.c: gdk_pixbuf fixes.
	* src/print.c: use paper size from configuration.
	* src/save-restore.c: save&restore paper size from configuration.
	
2001-02-18  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-index.c: start progress bar in activity mode when
	loading a mailbox.
	* src/main-window.[ch]: add
	balsa_window_increase_activity/balsa_window_decrease_activity to
	public interface to start status bar into activity mode.
	
2001-02-16  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-index.c: make it compile with -Werror with and without
	BALSA_USE_THREADS
	* src/mailbox-conf.c:
	* src/mailbox-node.c:  some one-liners in mailbox&folder 
	configuration.
	
2001-02-16  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-index.c: make compile with -Werror 

2001-02-16  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox_imap.c: fix shameful locking issue.
	* libbalsa/message.c: fix crash in libbalsa_message_has_attachment().
	* src/information-dialog.c: use fputs instead of fprintf with 
	format only.
	
2001-02-14  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox_{imap,local}.c:
	* src/balsa-index.c: lock GDK more carefully.
	
2001-02-13  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-index.c: open mailboxes in a thread (as requested in
	one of the bug reports).

2001-02-12  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/body.c:
	* libbalsa/folder-scanners.c:
	* libbalsa/libbalsa.c:
	* libbalsa/mailbox_imap.c: update for mutt-unstable-20010210

2001-02-11  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-index.c: Don't try and select a message if the last
	one is deleted.
	* src/pref-manager.c: Use util functions to create tables, more
	appropriate name for sub-notebook tab.

2001-02-09  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/address-book-vcard.c: KISS: print data directly to file.
	* libbalsa/mailbox.c: fix crash in the cllose retrying code.
	* libbalsa/mailbox_imap.c: improve imap mailbox checking.
	* src/print.c: fix printing after recent BalsAIndex structure
	modification. Remove old crap (this could be done better, I guess).
	
2001-02-07  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-mblist.c: change sorting function to automatically
	place "core" mailboxes (i.e. Inbox, Sentbox...) at the top of the
	mailbox list when sorting by name.

2001-02-06  Pawel Salek  <pawsa@theochem.kth.se>

	* README,INSTALL,NEWS, configure.in: bump version number to 1.1.1

2001-02-04  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/address-book.c: config_pop_prefix on error.
	* libbalsa/mailbox.c: same.
	* libbalsa/mailbox_imap.c: fix and enable IMAP checking support.
	* libbalsa/notify.c: fix and enable imap checking support.
	* src/balsa-index.c: use gtk_signal_connect_object instead of
	gtk_signal_connect, it makes the code simpler. fix msg counting.
	* src/balsa-mblist.c: don't destroy mailbox nodes on repopulate,
	they are owned by balsa_app.mailbox_nodes.
	* src/mailbox-node.[hc]: register scanned IMAP mailboxes. Remove
	SORT_ namespace conflict with libmutt.
	* src/pref-manager.c: don't free gtk_entry_get_text() result.
	* libbalsa/folder-scanners.c: clean up.
	
2001-02-04  Pawel Salek  <pawsa@theochem.kth.se>

	* help/C/balsa.sgml: add description of IMAP folder configuration.
	* libbalsa/folder-scanners.c: be less verbose.
	* libbalsa/mailbox.c: don't retry for ever on error.
	* libbalsa/mailbox_imap.[hc]: implement 
	libbalsa_imap_close_all_connections()
	* libbalsa/message.[ch]: more robust on mailbox accessing
	errors. Return operation status from libbalsa_message_body_ref()
	* src/balsa-index.c: be more robust on errors and provide feedback
	to the user.
	* src/balsa-message.[hc] (balsa_message_set): return
	operation status.
	* src/folder-conf.[hc]: plug in  IMAP folders configuration.
	* src/mailbox-node.c: second part of configuration.
	* src/main.c: shutdown nicely all imap connsection on exit.
	
2001-02-03  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-app.[ch]: Add option to automatically view message
	after newly opening a mailbox.
	* src/balsa-index.c (moveto_handler): only auto view messages on
	mailbox opening if the option is selected.
	* src/pref-manager.c: Put option to auto view messages in the
	Preferences dialog, reorganize "Display" page into subnotebook
	pages.
	* src/save-restore.c: Save and load auto view message option.
		
2001-02-03  Matthew Guenther  <guentherm@asme.org>

	* src/store-address.c (balsa_store_address): Fix cast to GtkCList
	from BalsaIndex.

2001-02-03  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-index.c: don't crash on failed open.
	
2001-02-01  Pawel Salek  <pawsa@theochem.kth.se>

	* acconfig.h: add USE_PIXBUF
	* configure.in: test for gdk_pixbuf
	* libbalsa/server.c: fix destroy method.
	* src/Makefile.am: add folder-conf.[hc]
	* src/address-book.c: fix crash on toggling when no current book.
	* src/balsa-app.[hc]: implement find_gnode_of_folder()
	* src/mailbox-node.[hc]: add imap folder support+config saving
	* src/main-window.c: fix pixbuf build.
	* src/save-restore.[ch]: add config_folder_add() and
	config_folder_update()
	
2001-02-01  Pawel Salek  <pawsa@theochem.kth.se>

	* INSTALL: update info about gtkhtml and RH.
	* README: descripbe --disable-more-warnings
	* libbalsa/misc.[hc]: add  libbalsa_(de)?escape_specials to allow
	reasonable configuration of regexps.
	* src/balsa-app.c: initialize fields to be on the safe side.
	* src/balsa-app.h: change defaults for QuoteRegexp and date.
	* src/balsa-index.[ch]: handle larger fonts nicer. support sorting
	via mailbox-node. Add balsa_index_set_sort_order().
	* src/balsa-mblist.c: handle larger fonts nicely.
	* src/balsa-message.c: don't hang on corrupted regexp.
	* src/expand-alias.c: be less verbose.
	* src/mailbox-node.h: add fields for persistent sort order.
	* src/main-window.c: aviod double sorting on balsa-index creation.
	* src/pref-manager.c: use deescape_specials.
	* src/mailbox-node.c (balsa_mailbox_node_init): initialize sort
	order fields.
	
2001-01-31  Matthew Guenther  <guentherm@asme.org>

	* src/main-window.c (balsa_window_real_open_mailboxnode): previous
	blocking of signal handler causes problems displaying mailbox name
	in title bar, removed.

2001-01-31  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-index.c (balsa_index_load_mailbox_node): select the
	previous message when deleting the last message in the mailbox
	instead of attempting to select the next one.
	* src/main-window.c (balsa_window_real_open_mailboxnode): don't
	handle the first "switch-page" signal when opening a new mailbox.
	
2001-01-31  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-index.c: (balsa_index_init) make build with -Werror

2001-01-30  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-index.c (balsa_index_update_message): redisplay
	selected message when changing view to already opened mailbox.

2001-01-29  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-index.c (balsa_index_load_mailbox_node): fixed casting
	bug.
	* src/balsa-index.c (moveto_handler): now selects first
	unread/last message instead of just moving there when opening a
	mailbox.

2001-01-28  Matthew Guenther  <guentherm@asme.org>

	* src/Makefile.am: remove balsa-index-page.c from compilation.
	* src/address-book.c: add sendmsg-window.h include.
	* src/balsa-app.h: remove balsa-index-page.h include, main-window.h.
	* src/balsa-index-threading.[ch]: changed references to
	BalsaIndexPage to use BalsaIndex, use new class members.
	* src/balsa-index.[ch]: merged BalsaIndexPage and BalsaIndex.  Now
	a subclass of GtkScrolledWindow.
	* src/balsa-mblist.c: changed references to BalsaIndexPage to use
	BalsaIndex, use new class members.
	* src/mailbox-node.h: formatting changes.
	* src/main-window.c: changed references to BalsaIndexPage to use
	BalsaIndex, use new class members.
	* src/main.c: changed references to BalsaIndexPage to use
	BalsaIndex, use new class members.
	
2001-01-24  Pawel Salek  <pawsa@theochem.kth.se>

	* src/address-book.c: fix the infamous address book crash.
	It happened when there was no book defined and the button next 
	to the address field was clicked.
	* src/sendmsg-window.c: add gnome_dialog_close_hides(ab)

2001-01-22  Gediminas Paulauskas  <menesis@delfi.lt>
	
	* libbalsa/send.c: marked "Sending mail" for translating.
		
2001-01-22  Pawel Salek  <pawsa@theochem.kth.se>

	Implement threading configuration.
	* src/balsa-index-page.[ch]: rememberMailboxNode instead of
	LibBalsaMailbox. FIXME: balsa-index-page and balsa-index should 
	be merged together, present structure is an artefact of old GTK.
	* src/balsa-index-threading.h: fix the include list.
	* src/balsa-index.[hc]: add balsa_index_set_threading_type().
	* src/balsa-mblist.[hc]: all the shown mailboxes have now respective
	mailbox_nodes and are in balsa_app.mailbox_nodes.
	* src/mailbox-conf.c: update API.
	* src/mailbox-node.[ch]: add threading field.
	* src/main-window.[hc]: handle mailbox nodes instead of mailboxes.
	add threading UI callbacks.
	* src/save-restore.c: all the shown mailboxes have now respective
	mailbox_nodes and are in balsa_app.mailbox_nodes
	
2001-01-22  Gediminas Paulauskas  <menesis@delfi.lt>
	
	* src/*.c: Changed some terminology and capitalization. Sorry
	for breaking translations.

2001-01-22  Pawel Salek  <pawsa@theochem.kth.se>

	* NEWS, configure.in: balsa-1.1.0 development release.

2001-01-21  Carlos Morgado  <chbm@chbm.nu>

	* src/main-window.c: add message->toggle new/flagged to main 
	window

	* libbalsa/message.c: (libbalsa_message_has_attachment) got	
	a random seg fault there and added *message check and return false
	if null (seems reasonable).

2001-01-20  Matthew Guenther  <guentherm@asme.org>

	* TODO:  Update DND status.
	* help/C/.cvsignore: Add some files to ignore that are created
	when generating ps or rtf output.
	* help/C/balsa.sgml: Add documentation about moving/copying
	messages using drag and drop.
	* src/balsa-index-page.c (balsa_index_page_window_init,
	create_menu): Allow button2 to initiate DND, change "New" to
	"Unread".
	* src/balsa-mblist.c (balsa_mblist_init): Add signal handler for
	"drag_motion", highlight mailboxes when attempting to receive a
	drop.
	
2001-01-19  Pawel Salek  <pawsa@theochem.kth.se>

	* src/mailbox-conf.h: replace "libbalsa.h" with "mailbox-node.h"
	to make the code compile with threads disabled.
	
	Patch from Albrecht Dreﬂ <albrecht.dress@arcormail.de> for sending
	Disposition-Notification requests.
	* libbalsa/message.[hc]: add dispnotify_to field and handle it.
	* libbalsa/send.c: pass dispnotify_to to libmutt.
	* src/balsa-app.h: add "request a disposition notification" field.
	* src/save-restore.c: save&restore req_dispnotify field.
	* src/sendmsg-window.c: add "RDN" menu entries and handlers.
	* help/C/balsa.sgml: add "RDN" description

2001-01-18  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-app.c: try to guess IMAP passwords when possible
	by Berend De Schouwer <bds@jhb.ucs.co.za>.
	* src/main.c: make the initial configuration even more robust.
	* src/balsa-message.c: balsa_get_font_by_charset() always returns
	a font (a default one if needed) so the compose window can have 
	a chance to find out the character width.

2001-01-17  Carlos Morgado  <chbm@chbm.nu>

	* src/mailbox-node.c: (balsa_mailbox_node_get_context_menu)
	returned to old behaviour, not show option to set special type
	when box already is that special type. masks cosmetic bug when
	setting a box to current special type 

2001-01-16  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-index-page.c: (balsa_message_toggle_new) changed
	behaviour to similar to balsa_message_toggle_flagged

2001-01-16   Pawel Salek  <pawsa@theochem.kth.se>

	Jeff Horwitz <jhorwitz75@yahoo.com>'s patch (with minor changes)
	for prepending the signature.
	* src/balsa-app.h: add sig_prepend field.
	* src/pref-manager.c: configure sig_prepend.
	* src/save-restore.c: save&restore sig_repend
	* src/sendmsg-window.c: handle sig_prepend.

	Berend De Schouwer <bds@jhb.ucs.co.za> fix for off-by one
	* libbalsa/address-entry.c: and copy default domain to be safe.
	
2001-01-15   Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/address.c:
	* libbalsa/mailbox.c: handle properly NULL addresses.
	* src/balsa-index.c: workaround peculiar GtkCTree behavior by
	Atsuhiko Yamanaka <ymnk@jcraft.com>. 

2001-01-14  Matthew Guenther  <guentherm@asme.org>

	* website/screenshots.html.in: Add new screenshots from v1.0.1,
	thumbnails.
	* website/screenshots.html.in: New screenshot image files for
	v1.0.1
	* website/screens/thumbnails/: Add directory, thumbnails of
	screenshots.
	
2001-01-13  Gediminas Paulauskas  <menesis@delfi.lt>

	* libbalsa/send.c: (smtp_answer) always NULL-terminate code[], as
	reported by Olaf Fr‡czyk <olaf@cbk.poznan.pl>. Removed unused
	variables: bytes and tmp.

2001-01-13  Gediminas Paulauskas  <menesis@delfi.lt>

	* src/sendmsg-window.c: with SEND_REPLY_GROUP messages act as with
	other replies. Set the size not of the window, but just the text
	widget. Use wraplength for size only when an option is on.

2001-01-12  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-icons.h: BALSA_PIXMAP_ENVELOPE
	* src/balsa-icons.c: BALSA_PIXMAP_ENVELOPE

	* src/balsa-index-page.c: added toggle submenu with flagged and new 
	* src/balsa-index-page.h: added toggle submenu with flagged and new 

2001-01-11   Pawel Salek  <pawsa@theochem.kth.se>

	* src/mailbox-node.c: fix crash on right button click out of mailbox 
	tree.

2001-01-11  Berend De Schouwer <bds@jhb.ucs.co.za>

	* src/sendmsg-window.c: better guess of default compose window size.

2001-01-09  Pawel Salek  <pawsa@theochem.kth.se>

	* src/main-window.c: treat balsa_app.input_inbox elements as 
	MailboxNodes. This patch hopefully concludes the transormation.
	* src/balsa-index-page.c: Jeff Horwitz <jhorwitz75@yahoo.com>'s
	patch for redrawing message preview after message deletion.
	
2001-01-08  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/Makefile.am: add libbalsa/folder-scanners.[hc]
	* libbalsa/mailbox.[hc]:libbalsa fix a condition because
	(cond == TRUE) is different from (cond) (think about it!)
	* libbalsa/mailbox_imap.[hc]: change type of
	libbalsa_mailbox_imap_set_path(gchar*) arg to const gchar*.
	* libbalsa/mailbox_remote.[hc]: add 
	libbalsa_mailbox_remote_set_server().
	* libbalsa/misc.c: remove remainings of old ImapDir code.
	* libbalsa/folder-scanners.[hc]: added.
	* libbalsa/libbalsa.h: remove deprecated imapdir.h

	* src/Makefile.am: remove local-mailbox.[hc]
	* src/balsa-app.c: remove deprecated local-mailbox.h
	* src/balsa-mblist.c: settle styles for empty folders (which
	are plain leaves from GtkCTree point of view).
	* src/mailbox-node.[ch]: implement most of the folder scanner code.
	* src/save-restore.c: add loading folders from config.

	* src/main-window.c: treat balsa_app.input_inbox elements as 
	MailboxNodes.
	
2001-01-07  Pawel Salek  <pawsa@theochem.kth.se>

	* src/mailbox-conf.c: append POP mailbox nodes to 
	balsa_app.input_inbox instead of just mailboxes. MailboxNodes
	handle configuration and other UI issues.
	* src/pref-manager.c:the POP 'mailboxes' are not in mailbox_nodes 
	any more.
	* src/save-restore.c: update accordingly.

2001-01-06  Pablo Saratxaga <pablo@mandrakesoft.com>

	* *.desktop,sounds/*.soundlist: added Azeri strings

2001-01-06  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-app.c: move local dir back to the top.
	* src/save-restore.c: second part of it.
	* src/local-mailbox.c: fix names of local dirs. 
	Remove load_local_mailboxes() - new code made it trivial.

2001-01-06  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/address-entry.c:
	* libbalsa/address-entry.h:
	* src/sendmsg-window.c:
	* src/expand-alias.h:
	* src/expand-alias.c:
	Latest alias expansion stuff from Berend De Schouwer
	<bds@jhb.ucs.co.za>
	* src/mailbox-conf.c: Typo fixed by Nerijus Baliunas
	<nerijus@users.sourceforge.net>

2001-01-06  Pawel Salek  <pawsa@theochem.kth.se>

	Make the  MailboxNode code proper and compile without warnings
	(thanks to Ian Campbell; blame RH 7.0)
	* src/balsa-mblist.c: remove unused variables.
	* src/local-mailbox.c(traverse_find_path): return a value.
	* src/mailbox-node.c: rename functions to the declared in header file.
	* src/main-window.c: add missing header include.
	
2001-01-01  Pawel Salek  <pawsa@theochem.kth.se>
 
	* src/sendmsg-window.c: initialize glist.
	* src/mailbox-node.[hc] : finish restructuring the MailboxNode code,
	separate folder subtree expansion.
	* src/local-mailbox.[hc]: separate local mailbox tree creation from
	local mail folder creation.
	* src/balsa-app.c: same.
	* src/mailbox-conf.c: initial support for mailbox deletion in the
	new paradigm.

2000-12-31  Pawel Salek  <pawsa@theochem.kth.se>

	Restructure MailboxNode code, separate UI code from backend.
	* libbalsa/misc.[hc]: move MailboxNode code to src/mailbox-node
	* src/mailbox-node.[hc]: added.
	* src/Makefile.am: add mailbox-node.[hc]
	* src/balsa-app.[hc]:
	* src/balsa-mblist.[hc]: move mailbox-related UI code to mailbox-node
	* src/local-mailbox.c: adapt partially to new structure.
	* src/mailbox-conf.[hc]: same.
	* src/main-window.c: same.
	* src/main.c: same.
	* src/pref-manager.c: same.
	* src/save-restore.c: same.
	* src/sendmsg-window.c: same.

	* balsa.spec.in: adapt for RH 7.0
	* libbalsa/address-book.h: update comments.
	* libbalsa/mailbox_pop3.c: add needed include for non-threaded version.
	
2000-12-22  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/send.c
	* src/address-book-config.c:
	* src/mailbox-conf.c:
	* src/main-window.c:
	* src/message-window.c:
	* src/pref-manager.c:
	Set wmclass for a bunch of windows to useful values.

2000-12-22  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/mailbox_local.[ch]: New signal "remove-files".
	* libbalsa/mailbox_mbox.c: Implement "remove-files".
	* libbalsa/mailbox_mh.c: Implement "remove-files".
	* libbalsa/mailbox_maildir.c: Implement "remove-files".
	* libbalsa/misc.[ch]: New function
	libbalsa_delete_directory_contents.
	* src/mailbox-conf.c: Use remove-files instead of callng rm -rf!
	Give user choice of remove from list, remove from disk aswell or cancel
	when removing a local mailbox.

2000-12-21  Ian Campbell  <ijc25@cam.ac.uk>

	* src/main-window.c: Show adddress book non-modal.
	* src/address-book.c: Better non-compose mode. Plug some leaks
	* src/information-dialog.c: Don't print a warning message to
	console when showing an error dialog.
	* src/local-mailbox.c: Plug memory leak

2000-12-20  Ian Campbell  <ijc25@cam.ac.uk>

	* src/balsa-mblist.c: When an open mailbox has no unread messages,
	display '0' instead of a blank.

	* libbalsa/mailbox.c: Tidy some indentation.

2000-12-20  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/libbalsa.c (libbalsa_init): set_option(OPTMHPURGE) so
	MH messages are really deleted rather than moved to ,<number>. (We
	don't need to keep these , files, since we delete to trash)

	* libbalsa/libbalsa.c (libbalsa_init): Properly construct Fqdn
	from hostname and domainname. This makes Message-ID generation
	much securer.

	* libbalsa/misc.c (libbalsa_get_hostname): Strip domain name on
	systems which return it.
	(libbalsa_get_domainname): New function. Gets domain name.

2000-12-19  Ian Campbell  <ijc25@cam.ac.uk>

	* src/balsa-message.c: Add a very simple link_clicked handler to
	the html widget (calls gnome_show_url).

	Initial implementation of Reply to Group function. Still needs
	configuration options.
	
	* libbalsa/mailbox.[ch]: Add mailing_list_address as a field. Add
	configuration loading and saving of this field.
	* src/balsa-index-page.[ch]: add balsa_message_replytogroup which
	uses mailbox->mailing_list_address if set, or else tries to guess
	from a header
	* src/main-window.c: Add Reply to Group menu item.
	* src/sendmsg-window.[ch]: Handle SEND_REPLY_GROUP as a compose type.
	
2000-12-18  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in: bump version to 1.0.1
	* INSTALL: list packages needed for building balsa. 

2000-12-17  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/mailbox_local.c (libbalsa_mailbox_local_new): If the
	mailbox doesn't exist, and create is TRUE then create an Mbox
	style mailbox.

2000-12-17  Pawel Salek  <pawsa@theochem.kth.se>
	Berend De Schouwer <bds@jhb.ucs.co.za> patch for improved
	alias expansion.
	
	* libbalsa/Makefile.am: add address-entry widget to the file list.
	* libbalsa/address-entry.[hc]: the subclassed GtkEntry for mail 
	address edition with alias support.
	* src/expand-alias.[hc]: move code to address_entry widget.
	* src/sendmsg-window.c: update API apriopriately.
	
2000-12-16  Matthew Guenther  <guentherm@asme.org>

	* src/balsa-mblist.c (mblist_drag_cb): Refresh destination index
	page after transferring to fix segfault bug.
	* src/main-window.c: Add drag and drop to notebook tabs of other
	mailboxes.
	* src/sendmsg-window.c: Set locale font for other fields than To:
	and Subject:
	
2000-12-15  Matthew Guenther  <guentherm@asme.org>

	* libbalsa/messages.[ch]: Add function libbalsa_messages_copy.
	* src/balsa-index-page.c: Removed old DND cruft, implemented
	drag-data-get signal handler.
	* src/balsa-mblist.c: Add drag-data-received signal handler.
	
2000-12-15  Ian Campbell  <ijc25@cam.ac.uk>

	* src/balsa-message.c (save_part): If the file selected to save
	the part to exists, ask user to confirm overrighing the file.

2000-12-12  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/mailbox.[ch]: Remove LibBalsaMailboxType, since each
	type therein is now a separate class (and so hasa type id). Rename
	libbalsa_mailbox_valid to libbalsa_mailbox_type_from_path for
	clarity.
	* src/local-mailbox.c: Don't use LibBalsaMailboxType.
	
2000-12-12  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/libbalsa.c (libbalsa_init): Need to register new
	mailboxes at init time so that config loading will work

2000-12-12  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/mailbox_mbox.c:
	* libbalsa/mailbox_mbox.h:
	* libbalsa/mailbox_maildir.c:
	* libbalsa/mailbox_maildir.h:
	* libbalsa/mailbox_mh.c:
	* libbalsa/mailbox_mh.h:
	* libbalsa/Makefile.am:
	New mailbox objects, representing different types of local
	mailbox. Split from LibBalsaMailboxLocal (which is the parent of
	all of these)
	* libbalsa/libbalsa.h: Include headers from above
	* libbalsa/mailbox.c: When loading a mailbox from the config, be
	sure to load the correct sort of local mailbox subclass  if we get
	LibBalsaMailboxLocal as the type. The next time the mailbox is
	saved it should save it's new type correctly.
	* libbalsa/mailbox_local.c: Lots of stuff has moved into
	subclasses. libbalsa_mailbox_local_new now tries to create the
	correct sub class based on the magic number.
	* libbalsa/mailbox_local.h: LibBalsaMailboxLocalType is no longer
	needed (it is implicit in the type of object now).
	
	* src/balsa-mblist.c: Use new interface to mailbox_conf. Populate
	the ContextMenu->New menus with an entry for each type of
	mailbox. Add a menu callback for each type of mailbox that appears
	in the New submenu. 
	* src/balsa-mblist.h: Prototype new menu callbacks
	* src/main-window.c: Populate the File->New menu.
	
	* src/mailbox-conf.c: Substancial rewrite, API is cleaner, lots of
	stuff has been simplified by making the dialog modal and making
	better use of the built in feature of GnomeDialog. New API means
	we don't need to keep track of which page we are on and removes
	MailboxConfPageType. Added ALT+key accelerators to all
	fields. Clarified some field names.
	* src/mailbox-conf.h: Expose new API
	
	* libbalsa/information.h: New message type "FATAL"
	* src/balsa-app.h: Store option for how to display fatal messages.
	* src/information-dialog.[ch]: Handle FATAL error messages. ERROR
	messages no longer cause balsa to exit. Added a new type of
	display - dump to console.
	* src/pref-manager.c: Configure the new FATAL message display
	message. Also use new mailbox-conf interface.
	* src/save-restore.c: Save/Restore FATAL message display
	type. Plug a memory leak. Detecting an MH mailbox is now easier.

	* libbalsa/misc.c: Fix a small thinko.
	
2000-12-11  Ian Campbell  <ijc25@cam.ac.uk>

	* src/sendmsg-window.c: Add support for sending in Romanian.
	* libbalsa/address-book-vcard.c: Fix address_compare for NULL
	parameters.
	* libbalsa/address-book-ldap.c: Only request the attributes we are
	interested in. Ignore some types of non-fatal errors.

2000-12-11  Marius Andreiana  <mandreiana@yahoo.com>

	* po/ro.po: Updated for 1.0 (thanks to Mi∫u Moldovan)
	
2000-12-04  Ian Campbell  <ijc25@cam.ac.uk>

	Much work on the address book back and front ends. 
	
	* libbalsa/address-book.[ch]: New load funciton, takes a callback
	and performs incremental loading, a big win for LDAP I
	hope. Removed address_list member. Added dist_list_mode as per
	address book information.
	* libbalsa/address-book-ldap.c: Implement new load function.
	* libbalsa/address-book-vcard.[ch]: Implement new load function. Use
	stat to determine mtime and only reload when needed.
	* libbalsa/address.[ch]: Add new parameter to to_gchar function,
	selecting which email address to use if there are multiple
	addresses in address_list.
	* libbalsa/misc.c: Use new parameter to libbalsa_address_to_gchar.
	* libbalsa/send.c: Use new parameter to libbalsa_address_to_gchar.
	* src/address-book.[ch]: Turn into a GnomeDialog
	decendant. Eliminate global variables. Update to make use of
	incremental loading of addresses. Improve distribution list
	behavior.
	* src/balsa-message.c: Use new parameter to
	libbalsa_address_to_gchar.
	* src/print.c: Use new parameter to libbalsa_address_to_gchar.
	* src/balsa-app.c: Remove dist_list_mode from global settings.
	* src/save-restore.c: Remove dist_list_mode from global settings.
	* src/main-window.c: Use new address book.
	* src/sendmsg-window.c: Use new address book.
	
2000-12-01  Pawel Salek  <pawsa@theochem.kth.se>
	Lubomir Gelo's <slon@slon.sk> patch for alternative layout.
	* src/balsa-app.h: add alternative_layout field
	* src/main-window.c: do the layout manipulation
	* src/main-window.h: fields for storing panes for layout manipulation
	* src/pref-manager.c: alternative layout configuration (ALC)
	* src/save-restore.c: save&restore ALC

2000-11-30  Pawel Salek  <pawsa@theochem.kth.se>

	Lubomir Gelo's <slon@slon.sk> patch for configuring SMTP port.
	* libbalsa/message.h,libbalsa/misc.h: add port parameter to 
        libbalsa_message_send() and libbalsa_process_queue()
	* libbalsa/send.c: use passed port number where needed.
	* src/balsa-app.[hc]: add smtp_port to balsa_app and set default value.
	* src/main-window.c: call libbalsa_process_queue() with port
	* src/pref-manager.c: port no. configuration.
	* src/save-restore.c: save& restore port no.
	* src/sendmsg-window.c: call libbalsa_message_send() with port no.
	
2000-11-29  Ian Campbell  <ijc25@cam.ac.uk>

	* src/expand-alias.c: Don't expand with address books which don't
	have expansion enabled.

2000-11-27  Matthew Guenther  <guentherm@asme.org>

	* TODO: cleaning up
	* src/balsa-mblist.c (balsa_mblist_init): better ctree row height
	selection, set display info arg depending on global
	* src/spell-check.[ch]: define preprocessor symbol to try and
	avert problems with new versions of pspell.

2000-11-28  Ian Campbell  <ijc25@cam.ac.uk>

	* libbalsa/address-book.[ch]: New function
	libbalsa_address_book_alias_complete.
	* libbalsa/address-book-vcard.[ch]: Implement new function.
	* libbalsa/address-book-ldap.[ch]: Stub for new function.
	* libbalsa/misc.[ch]: New marshalling function.
	* src/expand-alias.c, src/sendmsg-window.c: Make use of new
	address book functionality.

2000-11-27  Pawel Salek  <pawsa@theochem.kth.se>

	* src/spell-check.c, src/print.c: misspellings removed.
	* src/balsa-index-threading.{h,c}: reformatted to follow balsa rules.
	* README: some notes concerning mail filtering and libtool.
	
2000-11-26  Pawel Salek  <pawsa@theochem.kth.se>

	* src/print.c: adapt to new threaded message view.
	* src/main-window.c: don't crash on configuration change when
	toolbar disappears. (fix #31997 and some other)
	
2000-11-25  Pawel Salek  <pawsa@theochem.kth.se>

	* src/main-window.c: remove deprecated code and translate texts in
	menus.
	* libbalsa/mailbox_imap.c: handle error on IMAP mailbox checking.
	* libbalsa/mailbox.c: clean up ibbalsa_mailbox_free_messages()
	
2000-11-24  Pawel Salek  <pawsa@theochem.kth.se>

	Atsuhiko Yamanaka's <ymnk@jcraft.com> patch for multithreaded msg view.
	* libbalsa/mailbox.c: store message's in-reply-to header.
	* libbalsa/message.[hc]: add references_for_threading field to 
	destroy method.
	* libmutt/parse.c: forcing user headers..
	* src/Makefile.am: add balsa-index-threading.{c,h} to the file list.
	* src/balsa-index-page.c: use CTree instead of CList for message index.
	* src/balsa-index.[ch]: the same.
	* src/store-address.c: the same.
	* src/balsa-index-threading.[hc]: the threading support (jwz sorting)
	
	* src/balsa-app.c: remove forgotten include mblist-window.h 
	* src/main-window.c: the same + Atsuhiko's CList->CTree
	* src/main.c: remove not needed mblist-window.h and balsa-mblist.h
	
	
2000-11-22  Carlos Morgado  <chbm@chbm.nu>

	* src/main-window.c: (fill_mailbox_passwords) fix fix, permit 
	empty passwords

2000-11-21  Carlos Morgado  <chbm@chbm.nu>

	* src/main-window.c (fill_mailbox_passwords): fix checking of pop3
	passwords

2000-11-21  Pawel Salek  <pawsa@theochem.kth.se>

	fix #32805.
	* libbalsa/mailbox_pop3.c: omit mailboxes without password field
	* src/main-window.c: implement fill_mailbox_passwords that ask for 
	passwords in the main thread. Remove some old garbage.
	* libbalsa/send.c: compile with threads disabled.

	Patch from Lubomir Gelo <slon@slon.sk> for controlling auto close 
	feature:
	* src/balsa-app.h: define close_mailbox_auto and close_mailbox_timeout
	* src/main-window.c: the timeout-checking code
	* src/pref-manager.c: the configuration part.
	* src/save-restore.c: save-restore part.
	
2000-11-20  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/send.c: place outbox and fccbox in right positions
	* src/balsa-mblist.c: add mblist_default_signal_bindings() for 
	connecting signals that are useful for mailbox tree, but not
	transfer tree.
	* src/main-window.c: use that.
	
2000-11-19  Gediminas Paulauskas  <menesis@delfi.lt>

	* src/spell-check.c: (balsa_spell_check_start) set current encoding
	to pspell config.

2000-11-19  Pawel Salek  <pawsa@theochem.kth.se>

	* Makefile.am: remove deprecated mblist-window.[hc] from the file list.
	* src/balsa-mblist.[hc]: transfer all the used functions from 
	mblist-window in order to clean up the code a bit. Remove old crust.
	* src/balsa-message.c: don't call gtk_editable_claim_selection()
	for unrealized widgets.
	* src/mailbox-conf.c: rename balsa_mblist_redraw() to more apriopriate
	balsa_mblist_repopulate().
	* src/main-window.c: insert mailbox tree in the scrolled window.
	* src/pref-manager.c: balsa_mblist_redraw()-> repopulate(). 
	Remove some crust.
	* src/sendmsg-window.c: changes to remove libbalsa/send.c dependency
	on balsa-app
	* libbalsa/{misc,message}.h: same. API changes.
	* libbalsa/send.c: remove dependency on balsa-app. Use 
	libbalsa_information for error messages.
	
2000-11-16  Carlos Morgado  <chbm@chbm.nu>

	* src/main.c (main): ignore SIGPIPE so we don't die when pop 
	(and imap?) server disconect. there must be a better way of 
	doing this - show me how.
	* libbalsa/pop3.c (fetch_pop_mail): be saner about saving uids 
	so we don't mess up last_uidl when weird stuff happens.
	
2000-11-16  Pawel Salek  <pawsa@theochem.kth.se>
        Atsuhiko Yamanaka's <ymnk@jcraft.com> speedup patch with minor
	changes and updates.
	
	* libbalsa/mailbox.[hc]: implement new "messages-new" and
	"messages-delete" signal for fast insertion and removal of
	multiple messages.
	* libbalsa/message.c: use new signals for moving and removing
	messages. Extra safety in libbalsa_message_body_ref()
	* src/balsa-index-page.c: make sure there is only one idle_handler
	waiting for execution. Use new signals for (re)moving messages.
	* src/balsa-index.c: use new signals for (re)moving messages.
	
2000-11-14  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox_pop3.c: pass last_uid to libbalsa_fetch_pop()
	* libbalsa/pop3.c: use uid.
	* libbalsa/send.c: be more verbose on relaying error.
	* src/sendmsg-window.[ch]: fix #31938:
	Show attachments when one is added to an outgoing message.
	
2000-11-13  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/Makefile.am: plug in new pop3.[hc] files
	* libbalsa/mailbox_pop3.[hc]: use new POP3 code. add filtering
	option.
	* libbalsa/message.h: add prototype of libbalsa_message_queue()
	* libbalsa/misc.h: add prototype of libbalsa_process_queue()
	* libbalsa/send.c: split libbalsa_message_send to _send()
	and process_queue()
	* libbalsa/pop3.[ch]: added.
	* libmutt/Makefile.am: remove old pop.c
	* src/sendmsg-window.[hc]: add Queue=Send Later menu entry.
	* src/main-window.c: use libbalsa_process_queue() for sending
	queued mails.
	* src/mailbox-conf.c: add filter to the configurable POP settings.
	
2000-11-13  Gediminas Paulauskas  <menesis@delfi.lt>

	* intl, .cvsignore: removed this dir completely.
	
2000-11-13  Carlos Morgado <chbm@chbm.nu>

	* src/save-restore.c: remove balsa_app.charset field that is used
	no more.
	* configure.in: added "Use SSL" and "Use GSS"

2000-11-13  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in: add --with-ssl configuration option. ssl support
	compiles now but has not been tested yet.
	* src/balsa-app.[hc]: remove  balsa_app.charset field that is used
	no more.
	* src/balsa-index-page.c: remove gnome_appbar_pop() without _push()
	* src/pref-manager.c: remove charset field, start reorganization
	of the layout to the old one (or the galeon's, if it tell more).
	
2000-11-12  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-mblist.c: additional check on public functions' 
	arguments. In long term, an audit of the balsa_quit() function
	is needed (dependencies between GUI and mailbox backend codes).
	
2000-11-11  Pawel Salek  <pawsa@theochem.kth.se>

	* README, balsa.1.in: document -m option better.
	* AUTHORS: update for 1.0.0.
	* src/main-window.[hc]: don't ignore -c cmd line option (it was always
	overwritten by load_config()). make check_new_messages_cb() public.
	* src/main.c: don't ignore -o cmd line option (see above). parse
	URLs passed as argument to -m option.
	* src/sendmsg-window.[hc]: provide sendmsg_window_set_field() to
	set fields from -m option.
	* libbalsa/message.c: add some harmless but useful sanity tests.

	* configure.in: bump the version number to 1.0.0. 
	Time for a glass of champagne! Thanks to everybody participating!
	

2002-12-12  Pawel Salek  <pawsa@theochem.kth.se>

	* src/sendmsg-window.c: switch signatures properly even if one of
	them is empty.
	* libbalsa/source-viewer.c: position cursor at the top.
	* libbalsa/mailbox_{local,imap,pop3}.c:
	* src/main-window.c: quick fix for double-lock problems. the true
	solution is to remove gdk_thread locks from libbalsa. (Emmanuel)

2002-12-10 20:57  PeterB

	* src/toolbar-prefs.c: refresh GtkTreeView list of current buttons
	when restoring standard layout.

2002-12-08  Pawel Salek  <pawsa@theochem.kth.se>

	* src/filter-run.h, src/filter-run-dialog.c: GNOME2-ify
	dialog. Keep properly open count.
	* src/main-window.c: remove next/prev from default set of tools.

2002-12-06  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/Makefile.am: remove threads.h
	* libbalsa/{filter,message,send}.c:
	* libbalsa/mailbox{,_imap,_local,_pop3}.c: remove threads.h
	* libbalsa/libbalsa_private.h: add extern mailbox_lock.
	* libbalsa/mailbox.h: add notification types.
	* libbalsa/send.h: add send progress procedures.
	* src/{main-window,save-restore}.c: change notification constants'
	names.
	* src/threads.h: remove libbalsa specific code.
	* src/toolbar-{factory,prefs}.c: remove threads.h
	
2002-12-04 PeterB

	* src/: balsa-app.h, main-window.c, main-window.h,
	message-window.c, message-window.h, save-restore.c,
	sendmsg-window.c, sendmsg-window.h, toolbar-factory.c,
	toolbar-factory.h, toolbar-prefs.c: Rewrite and deprecation cleanup
	of toolbar code.

2002-12-02  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-app.h: simplify QuoteRegex so even simple regex libs
	can parse it (spell check failed miserably on this).

2002-11-30  Pawel Salek <pawsa@theochem.kth.se>

	Start working on external address book editor + code cleanup.
	* libbalsa/address-book.c: reduce number of dependencies.
	* libbalsa/filter.[hc]: remove balsa_app dependencies.
	* libbalsa/libbalsa.c: mailbox_lock is a LibBalsaMailbox thing.
	* libbalsa/mailbox.[ch]: add "progress-notify" signal.
	* libbalsa/mailbox_pop3.[hc]: add "config-changed" signal.
	* libbalsa/misc.[hc]: add marshaller used by progress-notify.
	* libbalsa/pop3.[ch]: adapt to "progress-notify" signal.
	* src/Makefile.am: add ab-main.c
	* src/{sendmsg,main}-window.c: use new address book preview code.
	* src/main.c: initialize filters code.
	* src/save-restore.c: setup pop3 callbacks.
	* src/toolbar-prefs.c: remove redundant #include.
	
2002-11-21  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/libbalsa.c: Initialize MH* libmutt variables (#99067).
	* src/spell-check.c: UTF-8 conversion for pspell (#98335, Toralf Lund).

2002-11-05  Pawel Salek <pawsa@theochem.kth.se>

	* Makefile.am: remove intl from SUBDIRS.
	* autogen.sh: run glib-gettextize "manually".
	* balsa.spec.in: change help file location.
	* configure.in: AM_GNU_GETTEXT -> AM_GLIB_GNU_GETTEXT and cleanup.

2002-11-05  Peter Bloomfield <PeterB@cvs.gnome.org>

        * libbalsa/files.c, src/sendmsg-window.c: move tests for icon
          files to libbalsa.
        * src/balsa-app.c (balsa_app_destroy): fix #96795.

2002-11-02  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/main-window.c: use (locked) balsa_app.mailbox_nodes for
	message counting, instead of (unlocked)
	balsa_app.mblist_tree_store; use a weak_pointer instead of global
	new_mail_dialog_visible; replace deprecated items.
	* src/sendmsg-window.c: replace deprecated items.
	* src/spell-check.[ch]: replace deprecated items; move structure 
	declarations from spell-check.h to spell-check.c.
	* src/message-window.c, print.c, quote-color.c, save-restore.c:
	* src/store-address.c, toolbar-factory.c: replace deprecated items.
	* src/balsa-index.c: keep keyboard focus in message body.
	* src/balsa-message.[ch]: remove balsa_message_clear (unnecessary).
	* src/main-window.[ch]: grab the focus to the message index only when 
	switching notebook pages; store idle-handler ids as GObject data.
	* src/main.c: move initialization of balsa_app.visual and 
	balsa_app.colormap to balsa-app.c; set GNOME_PARAM_APP_PREFIX and 
	GNOME_PARAM_APP_DATADIR on startup.
	* src/balsa-app.c: initialize balsa_app.visual and balsa_app.colormap 
	here instead of in main.c.
	
2002-10-30  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/main.c: do not hang when called with -m (#97168).

2002-10-28  Pawel Salek <pawsa@theochem.kth.se>

	* NEWS, configure.in: release balsa-2.0.3

2002-10-28  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/filter-edit-callbacks.c: explain Filter date format.
	* src/mailbox-node.c: use user name in imap URL.

	* src/balsa-app.[ch], src/main-window.c, src/pref-manager.c:
	* src/save-restore.c, src/sendmsg-window.c:
	* src/toolbar-factory.c: Remove balsa_app.toolbar_style.
	* src/pref-manager.c: Replace deprecated items; implement 
	HIG-recommended style.
	
2002-10-27  Carlos Morgado  <chbm@chbm.nu>

	* src/sendmsg-window.c: added Hebrew and UTF-8 
	to language list

2002-10-27  Carlos Morgado  <chbm@chbm.nu>
	
	* libbalsa/filter.c (match_condition): fix no-threads build

2002-10-23  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.c: clear preview after deleting last message.
	* src/address-book-config.c: do not use same strings in different
	contexts (#96548).
	* libbalsa/address-book-ldap.c: do not crash on severed LDAP
	connections (PS).
	* src/folder-conf.c: do not crash on subfolder creation (#96720, EA).

2002-10-20  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.[hc]: streamline message deletion and removal.

2002-10-20  Emmanuel <e.allaud@wanadoo.fr>

	* libbalsa/filter-file.c: date config file format: %Y-%m-%d 
	* libbalsa/filter.[hc]: fix the locking issues with body filtering;
	* libbalsa/mailbox.c, libbalsa/mailbox_pop3.c: use new filter 
	API (API change coming from previous fix).

2002-10-17  Pawel Salek <pawsa@theochem.kth.se>

	* configure.in: added he to the list of languages.

2002-10-15  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-app.c, src/main.c: remove deprecated items; move 
	g_object_unref(balsa_app.colormap) from main() to balsa_app_destroy().
	
2002-10-12  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/misc.[ch]: implement libbalsa_utf8_sanitize.
	* src/balsa-index.c, src/balsa-message.c: use it.
	* libbalsa/source-viewer.c: use g_strescape to ascii-ize text, even if 
	it does use octal escapes!

2002-10-09  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-app.[ch]: define default print fonts.
	* src/save-restore.c: save and restore fonts.
	* src/print.c: print font selection.
	* src/main-window.c: shortcuts in search dialog (PS).

2002-09-29  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-mblist.c: fix edition of unselectable folders.
	* src/{mailbox,folder}-conf.c: add new shortcuts and unify
	existing ones (PS).
	
2002-09-27  Pawel Salek <pawsa@theochem.kth.se>

	* src/main-window.c: remove deprecated items (PB). Apply filters (EA).

2002-09-26  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-message.c: keyboard manipulation of attachments.

2002-09-25  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.c: show popup menu with Shift-F10
	* src/balsa-message.c, src/sendmsg-window.c: ditto. (+shortcuts by PS)

2002-09-24  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/address-book-config.c: check external program load and save
	paths; simplify code.
	* src/balsa-index.c: fix Ctrl+N and Ctrl+G; cut down on explicit
	scrolling.
	* src/folder-conf.c, src/mailbox-conf.c: BalsaMailboxNode is a GObject.
	
2002-09-24  Pawel Salek <pawsa@theochem.kth.se>

	* src/address-book.c: declare columns correctly. Unref addresses (PB).
	* src/balsa-app.[hc]: create balsa_app_destroy().
	* src/main.c: clean up exit code.
	
2002-09-23  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/address-book-config.[ch]: don't use gtk_dialog_run with a
	GnomeFileEntry in the dialog. 
	* src/pref-manager.c: new balsa_address_book_config_new api.
	* libbalsa/send.c: do not send deleted messages in outbox (#93666).
	
2002-09-21  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-app.c (ask_password_mt): upport deadlock
	fix from HEAD

2002-09-21  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/libbalsa.c: add utf-8 as fallback on SendCharset
	* src/save-restore.c: fix reassigning sentbox
	* libbalsa/mailbox_imap.c: add user to imap url

2002-09-20  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/mailbox-node.[ch], src/balsa-app.c,src/main.c: 
	BalsaMailboxNode subclasses GObject.
	* src/balsa-index.[ch]: give up on scrolling with use_align = 
	FALSE; ref/unref the mailbox_node.

	* src/mailbox-node.c: initial sort by date.
	* src/main-window.c: use balsa_window_idle_replace to clear the 
	preview; remove some dynamic casts.

	* src/balsa-icons.c: replace deprecated items.
	* src/balsa-mblist.c: avoid passing NULL strings to 
	g_ascii_strcasecmp.
	* src/folder-conf.c, src/mailbox-conf.c: replace deprecated 
	items; use GtkMessageDialog; handle dialog responses.
	* src/information-dialog.c: port the list from GtkCList to 
	GtkTreeView; replace other deprecated items.

2002-09-18  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/pop3.c: msg count instead of byte count (HEAD:20020623)
	* libbalsa/send.c: gdk_threads lock operations that can trigger GDK.
	* Makefile.am: place balsa icon properly.
	* balsa.desktop: define category.
	* balsa.spec.in: adapt to a proper location.
	* doc/xmldocs.make: change doc location to the standard one.
	* doc/C/balsa-manual-C.omf: define relation tag.
	* libbalsa/mailbox.c, src/mailbox-conf.c: remove debug output.
	* libbalsa/send.c, src/main-window.c: define proper shortcuts.

2002-09-17  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-mblist.c: port #91445 (edit->filter crash) from
	HEAD

	* src/save-restore.c: fix CRITICAL (PB) 

2002-09-17  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.[ch]: allow keyboard access and multiple 
	selection; move preview management to main-window.c; improve 
	scrolling.	
	* src/balsa-message.c: don't grab focus to the message.
	* src/main-window.[ch]: idle handler for setting the preview 
	message.

2002-09-16  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/mailbox_imap.c (get_cache_name):  add username to 
	cache dirname (#92442)

2002-09-15  Pawel Salek <pawsa@theochem.kth.se>

	* src/balsa-message.c: show reply-to header if requested (EA).
	* NEWS,configure.in: release 2.0.2

2002-09-12  Pawel Salek <pawsa@theochem.kth.se>

	* src/main-window.c, src/balsa-index.[hc]: clean up index switching
	after recent changes (PB).
	* libbalsa/send.c: compile without libesmtp (EA).

2002-09-11  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.[hc]: handle idle handlers in a safer way.

2002-09-10  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/pop3.c: gdk_thread_ locks were redundant there.

2002-09-10  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.[hc]: modify bndx_find_row to find next in thread,
	excluding messages to be removed; fix bndx_messages_remove to use
	bndx_find_row, and simplify it. postpone signalling main-window to
	an idle handler, to avoid mailbox deadlock; add previous_message
	and next_message to BalsaIndex, to inform main-window.
	* src/main-window.c: set sensitivity of next and previous message
	buttons.
	
2002-09-09  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-index.c: 2nd message is not previous from
	1st (PB)

2002-09-09  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/mailbox.[ch]: remove misguided "messages-delete-all" signal.
	* src/balsa-index.[ch]: change signal handlers for mailbox
	signals, and signalling to main-window; make balsa_index_transfer
	a BalsaIndex method; remove sync-backend as an exported method
	(and a left-over, dead,balsa_index_select_row).
	* src/balsa-mblist.c,src/message-window.c : use new api for
	balsa_index_transfer.
	* src/main-window.c: use simplified signals from BalsaIndex;
	manage sensitivity of previous, next, and next unread buttons; use
	new api for balsa_index_transfer.
	* src/sendmsg-window.c: remove calls to balsa_index_sync_backend.

2002-09-09  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/address-book-ldap.c: fix class struct size declaration.
	* libbalsa/libbalsa.c: ask_cert() can be called now from all threads.
	* src/balsa-mblist.c: remove dependence on threads.
	* src/toolbar-{prefs,factory}.c: ditto.
	* src/mailbox-node.c: disable scanning in a thread until a
	reliable scheme is developed.
	* src/main.c: remove unused, thread-related variables.
	
2002-09-08  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/filter-edit-{callbacks, dialog}.c, src/filter-edit.h, 
	* src/filter-{run,export}-dialog.c, src/filter-run.h: 
	remove/replace deprecated items; rename build_option_menu as
	fe_build_option_menu, and declare it in src/filter-edit.h instead
	of locally.


2002-09-07  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/filter-funcs.[ch]: add a utility and a helper for
	making GtkTreeView filter lists.
	* src/address-book.c, src/balsa-index.c: tighter GtkTreeView code.
	* src/filter-edit-{dialog,callbacks}.c, src/filter-edit.h,
	* src/filter-export-{dialog,callbacks}.c,
	* src/filter-run-{dialog,callbacks}.c, src/filter-run.h: replace
	GtkClist with GtkTreeView and friends; add some more sensitivity
	management.
	* src/information-dialog.c: show actually the dialog.
	* libbalsa/address-book-ldap.c: remove deprecated functions (PS).
	* libbalsa/mailbox_pop3.c: fix build with threads disabled (PS).
	* libbalsa/send.c: same (Emmanuel).
	* src/address-book-config.c: fix LDAP dialog creation + GTK_->G_ (PS).
	* src/information-dialog.c: show the information dialog.

2002-09-02  Emmanuel <e.allaud@wanadoo.fr>

	* libbalsa/address-book-{ldif,vcard}.c, address-entry.c, address.c:
	* libbalsa/mailbox.c,mailbox_imap.c, message.c:
	* src/balsa-index-threading.c,balsa-index.c, balsa-mblist.c:
	* src/print.c, save-restore.c, sendmsg-window.c: 
	g_list_append() may be expensive, _prepend() is safer.

2002-08-30  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/message.[ch]: libbalsa_message_charset returns a newly
	allocated canonical charset instead of a const pointer to the
	original charset.
	* src/print.c, src/sendmsg-window.c: g_free the string returned by 
	libbalsa_message_charset. Use single callback for language menus.
	* src/store-address.c: don't mangle utf-8 when truncating.

2002-08-29  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/sendmsg-window.c: libmutt does iconv, not we.
	* src/main-window.c: reduce number of msg threading callbacks.

2002-08-28  Pawel Salek <pawsa@theochem.kth.se>

	make doc register with scrollkeeper properly.
	* Makefile.am: help renamed to doc. gnome/apps/Internet->applications
	* balsa.spec.in: test on native GNOME2 system (null).
	* configure.in: generate doc/Makefile.
	* doc/*: collect pieces from old doc and adapt them to recent
	scrollkeeper changes.

2002-08-27  Peter Bloomfield + Emmanuel

	* libbalsa/filter-file.c: mem leak + redundant code removal + mem
	leak.
	* libbalsa/filter-funcs.[hc]: old code did g_strdup on a possibly
	NULL string, avoid that + small speedup.
	* libbalsa/filter-private.h: add user header condition type.
	* libbalsa/filter.[ch]: handle search on user header.
	* libbalsa/mailbox_pop3.c: handle password, don't leave tmp files
	behind.
	* src/balsa-app.c: fix node_lock()'ing.
	* src/filter-edit-{dialog,callbacks}.c: edit user header
	conditions.
	* src/filter-edit.h: remove redundant #include.
	* src/filter-export-{dialog,callbacks}.c: complete port to
	GtkDialog.
	* src/filter-export.h: ditto.

	* src/filter-run-{dialog,callbacks}.c: ditto. some new icons.
	name should have been replaced by url.
	* src/filter-run.h: associated changes in function prototypes.
	* src/mailbox-node.c: leave threads on scanning local mailboxes as
	well.
	
2002-08-27  Pawel Salek <pawsa@theochem.kth.se>

	* src/mailbox-node.c: gcc-3.2 compiles non-standard C but we 
	do not want such a code.

2002-08-26  Pawel Salek <pawsa@theochem.kth.se>

	serialize IMAP scanning and UI operations to avoid deep-nested
	locking.
	* libbalsa/folder-scanners.[hc]: reduce number of locks held
	simultanenously.
	* src/balsa-message.c: refresh status bar properly.
	* src/mailbox-node.c: serialize scanning and UI.
	* src/main.c: do not start scanning thread here, this is an
	implementation detail.
	
2002-08-26  Carlos Morgado  <chbm@chbm.nu>

	* src/mailbox-conf.c: fix add mailbox (PB) 

2002-08-25  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/misc.c: yet another shot at format=flowed.

2002-08-24  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/misc.c: removed cruft charset related functions
	* libbalsa/libbalsa.c: utf-8 -> UTF-8 

	* libbalsa/send.c: don't set Charset, keep utf-8 
	(uncomplete)

	* libbalsa/mailbox.c: 
	* libbalsa/mailbox_local.c: 
	fix --disable-threads build
	
2002-08-22  Carlos Morgado  <chbm@chbm.nu>

	* src/Makefile.am: 
	* configure.in: 
	fix build without esmtp

2002-08-22  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/misc.c: format=flowed mistreated signatures. Fix it.

2002-08-21  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.c: remove deprecated code; scroll to newly
	viewable children.
	* src/balsa-mblist.[ch]: remove deprecated code; port
	balsa_mblist_mru_option_menu_set/get from HEAD.
	* src/balsa-message.[ch]: remove deprecated code; simplify MDN
	dialog.
	* src/expand-alias.c: explicitly include <string.h>.
	* src/sendmsg-window.c: use balsa_mblist_mru_option_menu_get; get
	body and accumulate addresses from a mailto URL.

2002-08-20  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/filter-file.c: remove redundant #include.
	* libbalsa/libbalsa.c, libbalsa/misc.h: store ID of main thread.
	pass UI operations to the main thread explicitely.
	* libbalsa/mailbox.c: allow thread cancelation only in safe places.
	* libbalsa/folder-scanners.c: do not lock GDK after all.
	* src/balsa-app.c: pass UI operations to the main thread
	explicitely.
	* src/main-window.c: disable thread cancelation in arbitrary places.
	* src/main.c: cancel all threads on quit.

2002-08-18  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* autogen.sh: build both with vicious-scripts and on RH beta (PS).
	* libbalsa/body.c: convert all texts by html (PB+PS).
	* libbalsa/folder-scanners.c: allow for NULL path in
	libbalsa_scanner_imap_dir.
	* libbalsa/source-viewer.c: convert to us-ascii.
	* libinit_balsa/balsa-druid-page-user.c: remove another dead line
	and other silliness.
	* src/address-book-config.c, src/balsa-app.c,
	src/balsa-index-threading.c: remove deprecated code.
	* src/address-book.[ch]: port BalsaAddressBook lists to GtkTreeView.
	* src/sendmsg-window.c: append addresses from book to current
	 addresses.

2002-08-15 Steve Wall  <hitched97@myrealbox.com>

	* configure.in: libestmp -I flag.
	* libbalsa/filter-file.c: Solaris needs __EXTENSIONS__ for strptime
	* libinit_balsa/Makefile.am: fix maintainer-clean target (PS).
	* libinit_balsa/balsa-druid-page-user.c: remove dead code.
	
2002-08-14  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/server.[ch]: LibBalsaServer subclasses GObject.
	* libbalsa/mailbox_imap.c, src/mailbox-conf.c, src/mailbox-node.c, 
	src/save-restore.c: change LibBalsaServer references.
	* libbalsa/misc.[ch]: remove deprecated code; impl. 
	libbalsa_marshal_VOID__POINTER_INT.
	* libbalsa/send.c: remove deprecated code; save and restore Charset.
	* libbalsa/source-viewer.c: remove deprecated code; GtkTextView has no 
	interface to GtkEditable.
	* libinit_balsa/balsa-druid-page-directory.c, 
	libinit_balsa/balsa-druid-page-finish.c: remove deprecated code.
	* libinit_balsa/init_balsa.c: set wmclass for druid.
	* libbalsa/Makefile.am, libinit_balsa/Makefile.am: disable
	deprecated items.
	
2002-08-14  Pawel Salek <pawsa@theochem.kth.se>

	* Makefile.am, configure.in: build gettext related stuff smarter.
	* autogen.sh: pass --intl smarter.

2002-08-13  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/message.[ch]: LibBalsaMessage subclasses GObject;
	remove deprecated code.
	* libbalsa/mailbox.c,src/balsa-message.c, src/sendmsg-window.c:
	LibBalsaMessage change.
	* libbalsa/identity.h: fix a typo and reformat.
	* libbalsa/server.c, libbalsa/threads.h: include gtk/gtk.h (prolly
	only temporarily).
	* src/balsa-index.c: LibBalsaMessage change, and improve
	bndx_messages_remove (Manu).
	* src/balsa-mblist.c: gtk_tree_view_scroll_to_cell doesn't support
	nonalign = FALSE (yet).
	* src/message-window.c: LibBalsaMessage change, and destroy window
	if message is finalized.

2002-08-11  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/toolbar-factory.c, src/toolbar-prefs.c: use
	GTK_ICON_SIZE_LARGE_TOOLBAR
	* libbalsa/message.c: port threading fix from HEAD.
	
2002-08-06  Pawel Salek <pawsa@theochem.kth.se>

	Compile with updated auto*build tools.
	* autogen.sh: work also for distributions with "native" gnome2.
	* Makefile.am: remove acconfig.h regeneration.
	* configure.in: add missing templates to AC_DEFINE
	* help/xmldocs.make: auto* tools get confused over leading -. Remove.
	* libbalsa/filter-funcs.c: prevent gcc3 warnings.
	* src/address-book.c, src/balsa-app.c,src/filter-edit-callbacks.c:
	ditto.	
	* src/balsa-index.c: collapse fixes (Peter B).

2002-08-06  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.c: fix message selection change on msg delete.
	
2002-08-03  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.c: fix next unread for deep threads.
	fix message deletion.

2002-07-31  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/libbalsa.c: set the wmclass for the TLS certificate dialog.
	* libbalsa/mailbox.[ch], libbalsa/mailbox_imap.[ch], 
	  libbalsa/mailbox_local.[ch], libbalsa/mailbox_maildir.[ch], 
	  libbalsa/mailbox_mbox.[ch], libbalsa/mailbox_mh.[ch], 
	  libbalsa/mailbox_pop3.[ch], libbalsa/mailbox_remote.[ch]: port 
	  LibBalsaMailbox* from GtkObject to GObject.

	* libbalsa/misc.[ch]: impl. libbalsa_marshal_BOOLEAN__VOID.
	* libbalsa/send.c: cleanup of fcc code.

	* src/balsa-index.c: don't use an unimplemented GtkTreeView feature; 
	LibBalsaMailbox is now a GObject.

	* src/balsa-mblist.c, src/mailbox-conf.c, src/mailbox-node.c,
	src/main.c, src/save-restore.c, src/sendmsg-window.c:
	LibBalsaMailbox is now a GObject.

	* src/balsa-message.c: headers should not be editable.
	* src/main-window.c: gtk_notebook_remove_page() unrefs the page.

2002-07-28 Steve Wall <hitched97@myrealbox.com>

	* src/balsa-message.c: fix #85728.
	* src/main-window.c: fix menu item numbers.
	* src/message-window.c: add message print menu entry.

2002-07-24  Carlos Morgado  <chbm@chbm.nu>

	* src/store-address.c:
	* src/sendmsg-window.c: 
	* src/print.c: 
	* src/message-window.c: 
	* src/main.c: 
	* src/main-window.c: 
	* src/balsa-mblist.c: 
	* src/balsa-index.h: 
	* src/balsa-index.c: 
	* src/balsa-index-threading.c: 
	* src/balsa-icons.h: 
	* src/balsa-icons.c: 
	* src/balsa-app.h: 
	* src/balsa-app.c: 
	* libbalsa/mailbox.c: 
	* libbalsa/mailbox-filter.c: 
	* libbalsa/libbalsa.c: 
	* libbalsa/identity.c: 
	* libbalsa/folder-scanners.c: 
	* libbalsa/filter.c: 
	from Peter, unglify toolbar icons - they were being stretched,
	remove some more deprecated code - move from gtk_obj to gobj

	* libbalsa/libbalsa.c: set Charset to UTF-8. this should make
	libmutt convert to utf-8 and let pango sort it out
		
	
2002-07-21  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added Vietnamese (vi) to ALL_LINGUAS

2002-06-28  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/folder-scanners.c:
	* src/balsa-mblist.c: more conservative imap scanning locking scheme.

2002-06-26  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-mblist.c: use "pixbuf" property of
	GtkCellRendererPixbuf instead of "stock-id"
	* src/balsa-index.c,  src/balsa-mblist.[hc], src/main-window.c,
	src/message-window.c: update status bar properly.
	
2002-06-26  Pawel Salek <pawsa@theochem.kth.se>

	* src/Makefile.am, balsa.spec.in: remove last gdbm experiment traces.
	* src/address-book-config.[hc]: proper parenting.
	* src/address-book.c: handle close button (#86495). Show both arrows.
	* src/pref-manager.c: add some mnemonics.

2002-06-25  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/libbalsa.c: improve certificate window layout. Use GtkDialog
	* src/main-window.c: compile with --disable-threads
	* src/main.c: GDK-lock idle functions.
	* src/message-window.c: open messages in separate window in idle
	function, not during window creation - this could lock WM.

2002-06-23  Pawel Salek <pawsa@theochem.kth.se>

	* src/folder-conf.c: fix IMAP subfolder creation (broken on 06-09).
	* libbalsa/folder-scanners.c: do not lock GDK when scanning imap.
	* src/mailbox-node.c: Adjust accordingly.
	* libbalsa/libbalsa.[hc]: set certificates file. GUI for cert
	acceptance.
	* src/mailbox-conf.c: IMAP mailboxes do need name entry.
	
2002-06-23  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/address.c: don't mangle the heap when full_name is empty.
	* src/balsa-mblist.c: align columns in the mb list.

2002-06-17  Pawel Salek <pawsa@theochem.kth.se>

	* balsa.spec.in: package help files.
	* src/balsa-mblist.c: right-justify the mailbox counts (Peter).

2002-06-13  Peter Bloomfield  <PeterBloomfield@MindSpring.com>
	
	* src/balsa-index.c, src/balsa-mblist.[ch], src/message-window.[ch]:
	- consolidate the mru code into balsa-mblist.c;
	- define a new GtkOptionMenu mru widget. 
	* libbalsa/message.[ch], src/print.c, src/balsa-message.c:
	replace fcc_mailbox with fcc_url.
	* libbalsa/send.c: eliminate mqi->fcc.
	* src/balsa-app.[ch], src/save-restore.c: add and manage 
	balsa_app.fcc_url
	* src/sendmsg-window.[ch]: use the mru option menu for the fcc-box.
	* src/main.c: use UTF-8 always for translated text (Christophe
	Fergeau <christophe.fergeau@laposte.net>)

2002-06-10  Pawel Salek <pawsa@theochem.kth.se>

	* configure.in, NEWS: release balsa-2.0.1

2002-06-09  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/folder-scanners.c: debug printf->libbalsa_information.
	* libbalsa/mailbox.h: comment on field usage.
	* libbalsa/mailbox_imap.[ch]:lock mutt+rename/subscribe error checking.
	* src/balsa-app.h: senbox is special, too.
	* src/folder-conf.c: fix (hopefully for everybody) renaming.
	* src/mailbox-conf.c: cleanup renaming (many problems with local
	mailbox renaming fixed).
	* src/mailbox-node.[ch]: add balsa_mailbox_local_rescan_parent().
	a mailbox can have only one special function.
	* src/save-restore.c: changing special mailboxes adapted.

2002-06-07 Steve Wall <hitched97@myrealbox.com>

	* src/pref-manager.c: convert the three radio buttons to a single
	option menu. Break two extremely long strings into pieces.  String
	capitalization.

2002-06-05  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/filter.c:
	* src/balsa-{app.[hc],index.c,mblist.[hc]}:
	* src/mailbox-{conf,node}.c, main{,-window}.c
	* src/{message,sendmsg}-window.c: 
	* src/save-restore.c: (#84220) centralize Balsa's `find by ...'
	functions in src/balsa-app.c, and replace `find by name' with
	`find_by_url' where it was easy to do so. They also simplify the
	`most recently used' code by using the new search functions.
	* configure.in: with-esmtp accepts a parameter (#83592). (PS)

2002-06-03  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox_imap.c: access cache in binary mode to preserve
	message sizes.

2002-06-01  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-mblist.[ch]: replace GtkCTree with GtkTreeView and
	friends.
	* src/balsa-app.[ch]: new GtkTreeStore member of BalsaApplication.
	* src/balsa-icons.[ch]: move the mailbox icons from BalsaIconName
	to GtkIconFactory.

	* libbalsa/filter.c, src/balsa-index.c, src/folder-conf.c, 
	src/mailbox-conf.c, src/mailbox-node.c, src/main-window.c, src/main.c, 
	src/pref-manager.c, src/sendmsg-window.c: use new api for balsa-mblist.
	* libbalsa/identity.c: correct gtk_object ->g_object conversions.

2002-05-31  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/misc.c: 
	* libbalsa/Makefile.am: 
	* libbalsa/libbalsa_private.h: 
	* libbalsa/libbalsa.h: 
	* libbalsa/libbalsa.c: 
	* libbalsa/send.c:
	* libbalsa/send.h:
	* libbalsa/message.h: 
	* libbalsa/message.c: 
	* libbalsa/body.c: 
	* libbalsa/mailbox_imap.c: 
	More stuff from HEAD
	
2002-05-28  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/message.c: 
	* libbalsa/mailbox.h: 
	* libbalsa/mailbox.c: 
	* libbalsa/mailbox_imap.c: 
	* libbalsa/body.h: 
	* libbalsa/body.c: 
	* libbalsa/send.c: 
	* src/sendmsg-window.c: upport of all my stuff since start of
	BALSA_2 from HEAD 

2002-05-21  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/abook-completion.c:
	* libbalsa/address-book-{ldap,ldif,vcard}.c:
	* libbalsa/address-{book,entry}.[ch]:
	* libbalsa/address.[ch], libbalsa/{mailbox,mailbox}.c
	* src/{address-book,expand-alias,pref-manager,sendmsg-window}.c:
	* src/store-address.c: remove deprecated code from LibBalsaAddress
	and LibBalsaAddressEntry, transform addresses to GObjects - and
	associated changes.

2002-05-20  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/abook-completion.c, libbalsa/address-book-extern.[ch]:
	* libbalsa/address-book-{ldap,ldif,vcard}.[ch]:
	* libbalsa/address-book.[ch]
	* libbalsa/misc.[ch], src/address-book-config.c, src/expand-alias.c:
	* src/pref-manager.c: remove deprecated code, transform address
	books to GObjects.

2002-05-19  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/mailbox_imap.c: get rid of gdbm message cache - too
	resource-hungry. One could disable mutt's cache now.

2002-05-19  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/identity.c: grab focus, finalize the conversion to GObject.

2002-05-18  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/identity.c: make the dialogs more usable.

2002-05-18  Emmanuel <e.allaud@wanadoo.fr>

	* libbalsa/mailbox.[ch]: remove unused code.
	* src/balsa-index-threading.c: fix two issues introduced 2 days ago.
	* src/balsa-index.[ch]: make local functions static.
	* src/filter-edit-dialog.c: make dialog resizeable.
	
2002-05-16  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/mailbox.c: reimplement libbalsa_mailbox_get_type()
	without using mx_get_magic() that modified mailbox ctime.
	* libbalsa/mailbox{local,maildir,mbox,mh}.c: use it. (#81751)
	* src/balsa-index-threading.c: reduce threading scaling from N^2 to N.
	* src/balsa-index.c: specify sibling to save some time.
	* src/main-window.c: fix searching.
	
2002-05-16  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/identity.c: improve a11y of identities dialog.

2002-05-15  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/filter.[ch]: build_imap_query() added.
	* libbalsa/mailbox.[hc]: libbalsa_mailbox_real_get_matching_added().
	* libbalsa/mailbox_imap.c: optimized searching for imap.
	* libbalsa/misc.[hc]: libbalsa_marshal_POINTER__INT_POINTER() added.
	* src/balsa-index.c: restructure to use new searching code.

2002-05-14  Pawel Salek <pawsa@theochem.kth.se>

	* src/balsa-index-threading.c: cleanup by Emmanuel (extended).
	* src/mailbox-node.c: Solaris libc cannot print null string (#80149).

	* src/main-window.[ch]: do not switch threadin option more
	frequently than necessary (Emmanuel). Disable increment progress
	in MT mode - it only increased the load.

2002-05-12  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/identity.c: double-click selects default identity.
	* src/sendmsg-window.c: GtkDialog->GtkMessageDialog to save 5 lines.

2002-05-11  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-app.[hc]: make balsa_stock_button_with_label use
	mnemonics; remove balsa_stock_hbox_with_label.
	* src/balsa-index.c: use GtkImageMenuItem methods.

	* libbalsa/identity.[hc]: replace GtkCList with GtkTreeView/Model;
	use GtkDialog methods to manage dialog buttons; run the `manage
	identities' dialog and return the result instead of returning the
	dialog.

	* src/main-window.c: pick up the result from the `manage
	identities' dialog instead of running it.

2002-05-10  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/files.[hc] (libbalsa_icon_finder): return icon mime
	type if requested.
	* libbalsa/misc.c: gnome-vfs requires absolute paths and unusually
	interprets const return type (#81359).
	* src/{balsa-message.c, print.c}: use updated API.
	* src/sendmsg-window.[hc]: ditto.
	
2002-05-08  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/address.[hc]: libbalsa_address_new_*from_string()
	should take a const gchar * argument.
	* libbalsa/address-entry.[hc]: remove wrappers for
	GtkEntry/Editable methods.
	* src/sendmsg-window.c: use GtkEntry/Editable methods on
	LibBalsaAddressEntry widgets, instead of wrapped versions.
	* src/save-restore.c: rot13 ESMTP certificate passphrase before saving.

2002-05-07  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/message.c: libmutt fastcloses mailbox when it should not.
	(copy few thousands msgs between IMAP mboxes to trigger).
	* src/filter-edit-{callbacks,dialog}.c: make filters UI sensitive.
	* src/filter-edit.h: fe_enable_right_page() header added.

2002-05-07  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.c: implement an `Other...' dialog in place of the
	`Folder' submenu for selecting a move destination from a
	BalsaMBList.

2002-05-05  Emmanuel <e.allaud@wanadoo.fr>

	* src/address.c: fix #80502

2002-05-01  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-message.c: gnome_icon_list bug fixed; revert workaround.
	* src/sendmsg-window.c: change send shortcut.
	* libbalsa/files.c: look for document icons in proper place.

2002-04-30  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/send.c: be more verbose on most common SMTP
	configuration error (submission vs smtp).

2002-04-28  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/sendmsg-window.c: alternative mailbox referencing scheme.
	* src/balsa-message.c: work around gnome_icon_list(?) bug.

2002-04-27  Pawel Salek <pawsa@theochem.kth.se>

	* configure.in, {libbalsa,src}/Makefile.am, libbalsa/mailbox.[ch]:
	* libbalsa/mailbox_{local,pop3}.c, libbalsa/message.c: 
	* src/balsa-app.[hc], src/balsa-index.[hc], src/mailbox-node.c: 
	* src/main-window.c, src/save-restore.[hc], balsa.spec.in:
	filters/searching not optional any longer.
 	Emmanuel Allaud's patch (+minor modifications) to fix filtering on
 	receiving 	

	* src/main-window.c: do not use deprecated API (Peter Bloomfield).
	* src/balsa-app.c: do not crash when replying a message from a
	mailbox tree that was rescanned in meantime (Peter).
	
2002-04-24  Pawel Salek <pawsa@theochem.kth.se>

	* NEWS, configure.in: release balsa-2.0.0
	* libbalsa/libbalsa.[hc]: define global libbalsa_rot13().
	* libbalsa/server.c: use it.
	* src/save-restore.c: store passwords mangled in private section.

2002-04-24  Hasbullah Bin Pit <sebol@ikhlas.com>

	* configure.in: Added Malay (ms)to ALL_LINGUAS.
	* po/ms.po: Added Malay Translation.

2002-04-23  Pawel Salek <pawsa@theochem.kth.se>

	* Makefile.am, balsa.spec.in, {sounds,images}/Makefile.am:
	* configure.in, libbalsa/files.c, libinit_balsa/helper.c:
	* src/main-window.c, src/main.c:
	make it possible to build 2.0.0 rpm. (mostly icon locations).
	* src/sendmsg-window.c: libmutt does not conversion to UTF-8.
	* src/balsa-message.c: nail down wrong VIEWPORT conversions (Peter B).

2002-04-21 Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-app.c: reliable nested mailbox_nodes locking.
	* src/address-book-config.c, folder-conf.c, pref-manager.c:
	The help-display improved. 
	* src/sendmsg-window.c: fix some whining about floating
	references, and eliminates some memory-leaking deadwood.

2002-04-21  Pawel Salek <pawsa@theochem.kth.se>

	* Makefile.am: omf-install is a created dir, remove from SUBDIRS.
	* configure.in: do not create Makefile in omf-install.
	* libbalsa/identity.c: do not destroy on double click: response.
	* src/balsa-app.c: scan locking fixed.
	* src/balsa-message.c: fix "mixed parts" support (Peter Bloomfield).
	* src/mailbox-node.c, src/main.c: proper locking on scanning.
	Scan threading is not perfect (it locks too much) but further
	improvements require too many changes to be accepted for the
	moments.

2002-04-19  Pawel Salek <pawsa@theochem.kth.se>

	* src/mailbox-nodes.c: make mailbox node locks upgradeable ro->rw.

2002-04-18  Pawel Salek <pawsa@theochem.kth.se>

	Scan mailboxes in a thread.
	* configure.in: add gnome-vfs-module.
	* src/balsa-app.[hc]: add mailbox_nodes_lock functions.
	* src/balsa-index.c, balsa-mblist.c, filter-edit-callbacks.c, 
	folder-conf.c, mailbox-conf.c, mailbox-node.c, main-window.c,
	main.c, message-window.c, pref-manager.c, save-restore.c: use them.

2002-04-17 Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/spell-check.c: utilize GtkDialog more efficiently.
	* src/sendmsg-window.c: when format=flowed and user hits `Enter', 
        properly delete preceding spaces.

2002-04-16  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/libbalsa.c: ask libmutt for data in UTF-8.
	* libbalsa/misc.[hc]: provide libbalsa_set_send_charset().
	* src/balsa-app.c: hide password when typed in in the dialog.
	* src/balsa-message.c: conversion not longer needed.
	* src/sendmsg-window.c: do not always pop up spell-check window
	* src/spell-check.c:    (Peter Bloomfield).

2002-04-15  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/folder-scanners.c: ask for folder passwords.
	* libbalsa/mailbox_imap.c: follow the password convention.
	* libbalsa/server.h: empty ("") passwd is legal.
	* src/address-book.[hc]: next round of porting to GtkDialog.
	* src/balsa-app.c, main.c: port ask_passwd
	* src/balsa-message.c: GnomeDialog->GtkDialog.
	* src/folder-conf.c, information-dialog.c, mailbox-node.c:
	* src/main-window.c, sendmsg-window.c: same.

2002-04-15 Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/spell-check.[ch]: ignore numbers.
	* src/sendmsg-window.[ch]: make spell check widget a separate dialog.
	
2002-04-14  Pawel Salek <pawsa@theochem.kth.se>

	* configure.in: make libgtkhtml default again.
	* libbalsa/address-book-vcard.c: convert strings from locale to
	UTF-8. Forcing this is dumb (IMO).
	* libbalsa/address.h: Fix header.
	* libbalsa/identity.c: complete porting to GtkDialog.
	* libinit_balsa/balsa-druid-page-directory.c: do same.
	* libinit_balsa/{balsa-druid-page-user.c, balsa-initdruid.c}:
	* src/{address-book-config.c, balsa-app.[hc], folder-conf.c:
	* src/mailbox-conf.c: GnomeDialog->GtkDialog.
	* src/pref-manager.c: ref new address book.
	* src/print.c: remove unnecessary paper selection widget (Peter B.).
	* src/spell-check.c: compile the quote regex once per invocation;
	- highlight a bad word by selecting it; - use GtkTextIter to find
	words, instead of a regex (Peter B.).

	* src/main-window.c: disable menus on removing last message from index.
	* src/toolbar-factory.[ch]: releated cleanup.
	* libbalsa/mailbox.[hc]: per-mailbox identity by
	* src/sendmsg-window.c:  Brian Stafford <brian@stafford.uklinux.net>

2002-04-12  Pawel Salek <pawsa@theochem.kth.se>

	* src/print.c: make print work with new API (still some warnings
	displayed occassionally).
	* libbalsa/{send.c,identity.c}: use GtkDialog instead of
	GnomeDialog.
	* src/main-window.c: run identity dialog with gtk_dialog_run().
	
2002-04-11 Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/spell-check.[hc]: make spell checking work.

2002-04-11  Pawel Salek <pawsa@theochem.kth.se>

	* src/print.c: compile with new 2.0 API.

2002-04-10 Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-mblist.c: squash reason of a warning message.
	* src/balsa-message.c: mdn_dialog_delete should return a gboolean
	value.
	* src/filter-run-callbacks.c, src/filter-run.h:
	selected_list_select_row_event_cb should return a gboolean value.
	* src/main-window.c: make notebook tabs a more modest size.
	* src/print.c: gnome-print support uncoditionally compiled in.
	* src/sendmsg-window.c: extbody_dialog_delete should return a
	gboolean value. Fix GtkTextIter error when quoting by dragging,
	and simplify quoting messages.
	* src/toolbar-prefs.c: page_active_cb should return a gboolean value;
	use replace_nl_with_space() uniformly.
	
2002-04-07  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-message.c: GtkViewport is a thinner wrapper than a
	GtkScrolledWindow for the GtkTextView and HtmlView widgets.
	- GtkVbox is a thinner container for the message parts than a 
          GtkTable;
	- have emphasize_url() take care of both url text style and status
          bar text, and rename as pointer_over_url();
        - add 2-pel left and right margins to the GtkTextView widgets.


2002-04-04  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-message.c: improve resizing scheme + cleanup.
	
2002-04-04  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-message.c: resize GtkTextView widget after a timeout;
	use gdk_threads_[enter/leave] in timeout handlers.
	* src/save-restore.c: handle obsolete rgb: color specification.

2002-04-03  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-message.c: color quoted lines; handle urls in
	text/plain messages.
	* src/balsa-app.h: change specifications for default colors.
	* src/balsa-mblist.c: use Pango to set a bold font; clean up
	unread_mailbox_color code; balsa_widget_get_bold_font() is
	obsolete.
	* src/save-restore.c: change specifications for default colors.
	* src/sendmsg-window.c: allocate bad_address_color.

2002-03-27  Pawel Salek <pawsa@theochem.kth.se>

	* src/balsa-message.c:
	* src/print.c: use proper charset names instead of aliases (#76609).
	* src/sendmsg-window.c: ditto. Also, simplify entry creation (PB).

2002-03-26  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/sendmsg-window.c: font selection in compose window.
	* src/balsa-message.[hc]:
	- remove part_count member from BalsaMessage structure;
	- use gnome_icon_list_get_num_icons() instead to get number of icons;
	- set message font for header panel, and override only for subject 
	header;
	- delete obsolete code that uses charset to convert header text;
	- fix hide_all_parts() to remove only widgets that are being shown.
	
2002-03-24  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-message.c: fix remaining font issues.

2002-03-23  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/misc.[hc]: libbalsa_lookup_mime_type must allocate the
	space for its result.
	* libbalsa/files.c:
	* libbalsa/send.c: 
	* src/print.c: free the string returned by libbalsa_lookup_mime_type.
	* src/sendmsg-window.c: use the new GtkFileSelection api.
	* src/pref-manager.c: fix broken font change callback.

2002-03-21  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/server.c: make types in gtk_signal_new consistent with
	each other.
	* src/balsa-index.c: button_event_press_cb should return boolean.
	* src/balsa-mblist.c: don't try to change colors yet.
	* src/main-window.c: revert a lot of recent changes--not needed.
	* src/main.c: initialize threads and gtk.

2002-03-20  Pawel Salek <pawsa@theochem.kth.se>

	* configure.in, acconfig.h: isblank portability test (Steve Wall).
	LibESMTP location parameter fixed.
	* libbalsa/mailbox_imap.c: use GDBM only when available (Steve Wall).
	* libbalsa/body.c: lock properly.
	* libbalsa/misc.c: remove trash from the end of mail (unwrap)
	* src/sendmsg-window.[hc]: choose properly sending charset.

2002-03-19  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/mailbox.c: replace some more LIBBALSA_TYPE_MESSAGEs
	with GTK_TYPE_POINTERs in gtk_signal_new().
	* src/balsa-app.c: be more careful getting the index from a
	mailbox.
	* src/balsa-index.c: omit some more unused arguments.
	* src/balsa-message.c: check for pending relayout in
	balsa_gtk_html_size_request, and use a timer to wait for it to
	complete; - simplify the size_request calculation.
	* src/main-window.c: omit some more unused arguments; append a new
	page in the notebook earlier, to avoid a race condition.

2002-03-18  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/mailbox.c: LIBBALSA_TYPE_MESSAGE -> GTK_TYPE_POINTER
	* src/balsa-app.c: destroy mailbox_node instead of unref'ing it.
	* balsa-index.c: omit unused arg in balsa_index_signals[SELECT_MESSAGE]
	* src/main-window.c: adjust to the arg removal. 
	* balsa_window_select_message_cb(): pick up BalsaIndex *index from
	an argument instead of balsa_window_find_current_index(); change
	notebook tab icon from GTK_ICON_SIZE_BUTTON to GTK_ICON_SIZE_MENU.

2002-03-17  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-app.[hc]: add a convenience function
	balsa_stock_hbox_with_label(), and use it in
	balsa_stock_button_with_label().
	* src/balsa-message.c: leave a destroyed BalsaMessage in a sane
	state. Use new api for gtkhtml.
	* src/balsa-index.c: use balsa_stock_hbox_with_label().
	* src/toolbar-prefs.c: fix broken code for getting the pixmap and
	mask for a stock icon, adding a wrapper to cut down on the #if's.
	* libbalsa/identity.c: fix broken code for getting the pixmap and
	bitmap for a stock icon.
	* src/sendmsg-window.c: connect the "changed" signal to the
	correct object.
	
2002-03-14  Pawel Salek <pawsa@theochem.kth.se>

	* configure.in: gtkhtml support restored.
	* libbalsa/address-entry.c: focus handling (Peter Bloomfield).
	* src/balsa-message.[hc]: more proper message displaying (PS).
	* src/sendmsg-window.c: first step to pangoization.

	* Makefile.am, help/*: help ported by Jelmer to GNOME2.
	* libbalsa/message.c: g_strsplit() to one more field (Peter B).
	* src/pref-manager.c: use gnome_file_entry_set_directory_entry (PB).
	* sound/Makefile.am: DESTDIR is not needed there after all.
	
2002-02-13  Jelmer Vernooij <jelmer@nl.linux.org>

	* libbalsa/ (some): gnome-defs.h is deprecated in GNOME2 - remove refs.

2002-03-13  Pawel Salek <pawsa@theochem.kth.se>

	* src/balsa-message.c: show first messages.

2002-03-13  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/*,libinit_balsa/*, libbalsa/identity.c, libbalsa/misc.[hc]:
	make entire balsa compile within GNOME2.
	src/balsa-app.c, src/spell-check.c: hush critical errors.

2002-03-10  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/libbalsa_private.h: do not include gnome.h here.
	* libbalsa/mailbox.c:
	* libbalsa/mailbox_imap.c: 
	* libbalsa/mailbox_local.c: 
	* libbalsa/mailbox_pop3.c: 
	* libbalsa/message.c: 
	* libbalsa/pop3.c: 
	* libbalsa/send.c: 
	* libbalsa/server.c: 
	* libbalsa/source-viewer.c: include only needed pieces of gnome here.
	* src/sendmsg-window.c: it is legal to have no signature.
	
2002-03-09  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* configure.in: gtkhtml was renamed to libgkthtml. Take into account.
	* src/address-book-config.c, address-book.c:
	* src/balsa-app.c,balsa-icons.c, filter-edit-dialog.c:
	* src/filter-run-dialog.c, pref-manager.c,store-address.c: reduce
	number of preprocessor conditionals.
	* src/toolbar-factory.c,toolbar-prefs.c: port to gnome2.
	
2002-03-09  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libinit_balsa/*: get rid of gob. Port to gnome2.
	* configure.in: remove test for gob.

2002-03-04  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-icons.[hc], src/filter-run-callbacks.c,
	src/filter-run-dialog.c, src/pixmaps/*.xpm: ported.

2002-03-03  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* configure.in: define BALSA_VERSION
	* src/address-book-config.c,
	src/address-book.c, src/balsa-app.c, src/balsa-index.c,
	src/balsa-index.h, src/filter-edit-callbacks.c,
	src/filter-edit-dialog.c, src/filter-export-callbacks.c,
	src/filter-export-dialog.c, src/filter-run-callbacks.c,
	src/filter-run-dialog.c, src/filter-run.h,
	src/information-dialog.c, src/mailbox-conf.c, src/mailbox-node.c,
	src/main-window.c, src/main.c, src/message-window.c,
	src/save-restore.c, src/store-address.c, src/toolbar-factory.h: 
	do the porting.

2002-03-01  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/folder-conf.c: ported.
	
2002-02-27  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-mblist.c: port.
	* src/balsa-index.c: remove redundant call to balsa_index_init().

2002-02-25  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/*: remove uncesessary #includes (PS)
	* src/*: Further work on porting to GNOME2.

2002-02-24  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/Makefile.am, src/address-book-config.c,
	src/address-book.[hc], src/spell-check.[ch]: src directory Gnome2
	porting work	
	* libbalsa/send.c: extra signal callback type cast.

2002-02-22  Pawel Salek <pawsa@theochem.kth.se>

	* autogen.sh, configure.in: previouse updates were not universal.

	* libbalsa/address-book-extern.c, libbalsa/address-book-ldif.c,
	libbalsa/address-book.c, libbalsa/address-entry.c,
	libbalsa/address.c, libbalsa/files.c, libbalsa/filter-file.c,
	libbalsa/filter-funcs.c, libbalsa/filter.c,
	libbalsa/folder-scanners.c, libbalsa/identity.c,
	libbalsa/libbalsa.c, libbalsa/mailbox.c, libbalsa/mailbox_imap.c,
	libbalsa/mailbox_local.c, libbalsa/message.c, libbalsa/misc.[hc],
	libbalsa/pop3.c, libbalsa/send.c, libbalsa/server.c,
	libbalsa/source-viewer.c:
	Make libbalsa.a compile against GNOME2. The only major changes
	were related to MIME handling and GtkText (gnome-mime and GtkText
	are deprecated). Some extra cleanup (unused variables).

2002-02-20  Pawel Salek <pawsa@theochem.kth.se>

	Start port to GNOME2. Based on Jelmer Vernooij's work.
	* configure.in, Makefile.am, acconfig.h,
	libbalsa/Makefile.am: modify just to make it compile
	* libbalsa/address-book.c, libbalsa/misc.h: make first file compile.


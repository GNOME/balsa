2004-02-11  Robert Sedak  <robert.sedak@sk.htnet.hr>

        * configure.in: Added "hr" (Croatian) to ALL_LINGUAS.

2004-02-08 Darko Obradovic <dobradovic gmx.de>

	* src/main-window.c: fix 114041

2004-02-08  Pawel Salek

	Install as default mailer if requested by user (see bug 131606,
	closely based on the patch by Michael Petullo)
	* libinit_balsa/Makefile.am: add balsa-druid-page-defclient.[hc]

	* libinit_balsa/balsa-druid-page-{directory,finish,user,welcome}.c:
	* libinit_balsa/helper.c: remove 1.x remainings.
	* libinit_balsa/balsa-initdruid.c: plug in defuser page.
	* src/balsa-app.h: add default_client field.
	* src/main.c: update gconf data if requested.
	* src/save-restore.[hc]: implement config_defclient_save().

2004-02-07 17:47  PeterB

	* src/sendmsg-window.c: Steve Wall <balsa-user@wallfamily.us>;
	smarter choice of identity, better handling of signatures.

2004-02-07  Albrecht Dreß

	* libbalsa/message.[hc]: add and initialize prot_state field.
	* libbalsa/rfc3156.[hc]: number of improvements, see
	http://mail.gnome.org/archives/balsa-list/2004-January/msg00209.html
	* src/balsa-index.c: show GPG status whenever available.
	* src/balsa-message.c: changes to _scan_signatures()

2004-02-01 09:11  PeterB

	* libbalsa/address-entry.h: include "address.h".

2004-01-31 16:05  PeterB

	* libbalsa/address-entry.c: replace control characters with spaces;
	fill input after button press event (should fix vanishing
	addresses).

2004-01-27 23:00  PeterB

	* libbalsa/pop3.c: copy uid to caller's buffer only if it's valid.

2004-01-25 Steve Wall

	* src/balsa-icons.[hc]: add "mark all read" icon.
	* src/main-window.c: add "mark all read" menu entry and action.

2004-01-23 08:11  PeterB

	* src/balsa-message.c: set message background correctly for all
	known themes (Albrecht Dreß <albrecht.dress@arcor.de>).

2004-01-21 15:11  PeterB

	* src/message-window.c: Add `next unread' item to message menu with
	ctrl+N binding, and manage its sensitivity; add zoom controls for
	html parts.

2004-01-19 17:15  PeterB

	* src/balsa-message.c: set background of message to base of message
	text, even with pixmap themes.

2004-01-19  Pawel Salek

	* libbalsa/Makefile.am: always include padlock-keyhole in the tarball.

2004-01-19 00:10  PeterB

	* src/sendmsg-window.c: show window before setting `From:' address,
	so its text doesn't get selected.

2004-01-18  Pawel Salek

	* NEWS, configure.in: release 2.0.16.
	* src/Makefile.am: fix the build.

2004-01-17 21:46  PeterB

	* src/balsa-message.c: backport nested messages from HEAD; make
	colors more theme-friendly.

2004-01-18  Carlos Morgado  <chbm gnome.org>

	* src/main.c (Message): 
	* src/balsa-message.c (Message): 
	* src/balsa-bonobo.h (Message): 
	* src/balsa-bonobo.c (Message): 
	* src/Makefile.am (Message): 
	* src/Balsa.idl (Message): 
	* Makefile.am (Message): 
	* GNOME_Balsa.server.in (Message): 
	backport of bonoboization from HEAD
	
2004-01-13  Laurent Dhima  <laurenti@alblinux.net>

	* configure.in: Added "sq" to ALL_LINGUAS.
	(Message): 

2004-01-11 12:18  PeterB

	* src/balsa-message.c: Plug a memory leak; allow 2-pixel motion
	tolerance when activating a URL.

2004-01-06 15:43  PeterB

	* src/balsa-message.c: Show and hide the appropriate widgets.

2004-01-04  Pawel Salek

	* src/balsa-message.[ch]: bug 127776 - nicer display of headers.
	
2003-12-31  Carlos Morgado  <chbm gnome.org>

	* libbalsa/html.c (libbalsa_html_print_get_pages_num): 
	fix build glitch
	
2003-12-30 14:15  PeterB

	* libbalsa/: html.c, html.h: Provide wrappers to insulate the rest
	of Balsa from the differences between the gtkhtml[23] APIs.
	* libbalsa/html.c: file html.c was initially added on branch
	balsa-2-0.
	* libbalsa/html.h: file html.h was initially added on branch
	balsa-2-0.
	* src/main-window.c: Use copy-text capability of gtkhtml3, when
	installed; compile without gtkhtml.
	* src/: balsa-message.c, balsa-message.h, print.c: Use new html api
	for rendering and printing.
	* libbalsa/misc.c: Use select-all capability of gtkhtml3 when
	installed.
	* libbalsa/mime.c: Include text of html parts when replying.
	* libbalsa/Makefile.am: Add html.[ch] to dependencies.
	* configure.in: Detect gtkhtml3 if installed in preference to
	gtkhtml2, when --enable-gtkhtml is used.

2003-12-26 21:44  PeterB

	* libbalsa/address.c: Clean up SET_FIELD macro.

2003-12-15  Albrecht Dreß

	* libbalsa/rfc3156.c: 
	* src/balsa-message.c: bug 129316 fixed.
	* libbalsa/padlock-keyhole.xpm: add.

2003-12-10 15:45  PeterB

	* src/message-window.c: Idle handler must return FALSE (Nuno
	Monteiro <nuno@itsari.org>).

2003-12-08 22:32  PeterB

	* src/message-window.c: Set a new message in the same
	message-window, instead of destroying it and creating a new one.

2003-12-07 19:27  PeterB

	* src/message-window.c: Manage sensitivity of next-unread toolbar
	button.

2003-12-01  Albrecht Dreß

	patch 3 of report no. 124905.
	* libbalsa/rfc3156.[hc]: update to gpgme-0.4.3
	* libbalsa/send.c: ditto.
	* src/sendmsg-window.c: ditto.
	* src/balsa-app.[hc], src/main.c: support for runtime gpg check.
	* src/balsa-message.c: 0.4.3 changes + cleanup.
	* src/print.c: ditto.
	* configure.in: update the GPGME test.

	* src/sendmsg-window.c: do not double-free on attachment remove (PS).

2003-11-21 Darko Obradovic <dobradovic gmx.de>

	* src/balsa-app.h: set MAX_QUOTED_COLOR to 2.
	* src/pref-manager.c: simplify preferences.
	* src/save-restore.c: adjust accordingly.

2003-11-21 10:25  PeterB

	* src/balsa-mblist.c: Fix bug 127422.

2003-10-02  Emmanuel <e.allaud@wanadoo.fr>

	* libbalsa/filter.c: support for setting message flags by filters.
	* libbalsa/filter-funcs.c: add no-op there
	* libbalsa/filter.h: add FILTER_CHFLAG action type.
	* libbalsa/message.h: add {UN,}SET_FLAGS helper macros.

2003-10-31  Pawel Salek  <pawsa theochem.kth.se>

	* libbalsa/server.c: make sure LibBalsaServer::host field is set.
	* src/sendmsg-window.c: do not crash on replying to a message with 
	empty To: header.

2003-10-27 17:01  PeterB

	* libbalsa/filter.c: Avoid casting a (const gchar *) to (gchar *).

2003-10-19 19:55  PeterB

	* src/: balsa-message.c, save-restore.c: Plug memory leaks.

2003-10-14  Pawel Salek  <pawsa theochem.kth.se>

	* src/information-dialog.[ch]:
	* src/main.c: fix bug 124568.

2003-10-14 08:35  PeterB

	* src/message-window.c: Trash the message in the window, not the
	current index selection (bug #124550).

2003-10-13  Pawel Salek  <pawsa theochem.kth.se>

	* libbalsa/message.h: libbalsa_message_send() accepts debug argument.
	* libbalsa/send.[hc]: use it.
	* src/balsa-message.c: pass debug argument.
	* src/{sendmsg,main}-window.c: ditto.

2003-10-09 12:09  PeterB

	* src/main-window.c: Add accelerators for zoom in/out.

2003-10-05  Carlos Morgado  <chbm gnome.org>

	* src/sendmsg-window.c (do_insert_string_select_ch): #103639

2003-09-28  Pawel Salek  <pawsa theochem.kth.se>

	* configure.in, NEWS: release balsa-2.0.15

2003-09-24 09:47  PeterB

	* libbalsa/folder-scanners.c, libbalsa/folder-scanners.h,
	src/mailbox-node.c: Pass noselect and noinferiors to mailbox
	handler.

2003-09-23 23:19  PeterB

	* src/balsa-mblist.c: Be paranoid about dereferencing view pointer.
	* src/pref-manager.c: Clarify toolbar button default actions.
	* doc/C/balsa.xml: Update help files.
	* src/sendmsg-window.c: Make In-Reply-To header comply with RFC
	2822.

2003-09-23  Pawel Salek  <pawsa theochem.kth.se>

	* src/expand-alias.c: reference used address before unrefing all.

2003-09-21 07:56  PeterB

	* configure.in: Look for libgnomeprint-2.2 before 2.0 (see
	http://mail.gnome.org/archives/balsa-list/2003-September/msg00109.h
	tml)

2003-09-20  Pawel Salek  <pawsa theochem.kth.se>

	* libbalsa/address-entry.c: initalize emailData::address and fix
	dangling references introduced yesterday.
	* src/expand-alias.c: ditto.
	* libbalsa/folder-scanners.c: do not scan \NoInferiors and
	\HasNoChildren folders.
	* src/mailbox-node.c: ditto.

2003-09-19  Pawel Salek  <pawsa theochem.kth.se>

	* libbalsa/address-entry.[hc]: add libbalsa_address_entry_get_list().
	* libbalsa/address.[hc]: format RFC822 groups correctly.
	* libbalsa/message.c: factor out common code.
	* libbalsa/misc.c (libbalsa_make_string_from_list_p): get whole
	address.
	* libbalsa/send.c: factor out common code.
	* libbalsa/expand-alias.c : store pointer to LibBalsaAddress.
	* src/sendmsg-window.c: use libbalsa_address_entry_get_list()

2003-09-19 07:16  PeterB

	* src/main-window.c: Desensitize `Mailbox -> Remove Duplicates'
	when no mailbox is selected.

2003-09-12  Pawel Salek  <pawsa theochem.kth.se>

	* src/main.c: fix bug 121867.
	* src/ab-main.c: Fix bug related to 121867.

2003-09-12 09:15  PeterB

	* src/balsa-mblist.c: Do balsa_mblist_update_mailbox() in an idle
	handler--the signal handler may be called w/o the gdk
	lock--possible fix for bug #121962.

2003-09-11 Darko Obradovic <dobradovic gmx.de>

	* src/balsa-app.[hc]: remove balsa_app.drag_default_is_move
	* src/balsa-mblist.c: assume above is true always.
	* src/main-window.c: ditto.
	* src/pref-manager.c: remove configuration part.
	* src/save-restore.c: and save-restore part.
	
2003-09-09 10:55  PeterB

	* src/main-window.c: Set mailbox tab color on opening; flush the
	display before gdk_threads_leave().
	* src/balsa-mblist.c: Restore color to mailbox tabs.

2003-09-07  Carlos Morgado  <chbm chbm.net>

	* libbalsa/mailbox_imap.c (libbalsa_mailbox_imap_open): 
	* libbalsa/mailbox_pop3.c (libbalsa_mailbox_pop3_open): 
	* libbalsa/mailbox_local.c (libbalsa_mailbox_local_open):
	fix #121637

2003-09-05  Carlos Morgado  <chbm chbm.net>

	* Changelog: Branched balsa-2-0. HEAD is devel

2003-09-05 11:19  PeterB

	* src/: filter-edit-callbacks.c, filter-run-callbacks.c: Use
	balsa_information_parented().

2003-09-04 08:47  PeterB

	* libbalsa/address-book-vcard.c: Test new_address fields.

2003-09-03 16:34  PeterB

	* doc/C/balsa.xml: Copy filter help from help/C/balsa.sgml.
	* src/: filter-edit-callbacks.c, filter-run-callbacks.c: Connect
	filter dialog Help buttons to text.
	* src/: address-book-config.c, balsa-message.c,
	filter-edit-callbacks.c, filter-run-callbacks.c, folder-conf.c,
	pref-manager.c, sendmsg-window.c, toolbar-prefs.c: Use
	balsa_information instead of g_print to report errors.

2003-09-01 23:14  PeterB

	* libbalsa/misc.c: Fix bug #121181.

2003-08-31  Carlos Morgado  <chbm chbm.net>

	* src/main-window.c (balsa_notebook_label_new): add tooltips 
	to mailbox tabs, no more 'INBOX' madness

2003-08-31  Pawel Salek  <pawsa theochem.kth.se>

	* libbalsa/address-book-ldif.c: parse more reliably address groups.
	* libbalsa/address.[ch]: remove member_list - it is redundant.
	* libbalsa/address-book.c: adapt to above.
	* src/ab-window.c: Add shortcuts and improve scrolling.

2003-08-27  Pawel Salek  <pawsa theochem.kth.se>

	* src/sendmsg-window.c: add Serbian language; fix locale associated
	with British English.
	* libbalsa/libbalsa.c: add iso-8859-5 to list of tried charsets.

2003-08-27 15:49  PeterB

	* src/sendmsg-window.c: Restore the ability to completely turn off
	word wrap when sending.

2003-08-26  Pawel Salek  <pawsa theochem.kth.se>

	* configure.in, NEWS: release 2.0.14.

2003-08-23 18:47  PeterB

	* src/balsa-message.c: Implement bm_sender_to_gchar() to put all
	the "No sender" checks in one place; use it in display_part() for
	content type "message/rfc822".

2003-08-22 14:17  PeterB

	* src/balsa-message.c: Allow message structure tree to be collapsed
	(Albrecht Dress <albrecht.dress@arcor.de>).

2003-08-22  Pawel Salek  <pawsa theochem.kth.se>

	* libbalsa/address-book-ldap.c: handle better broken connections.
	* src/store-address.c: more detailed error reporting.

2003-08-18  Pawel Salek  <pawsa theochem.kth.se>

	* configure.in: improve aspell detection (120180).
	* libbalsa/address.c: use NULLs instead of empty strings.
	* libbalsa/address-book-ldap.c: detect no-op modifications.

2003-08-14 19:33  PeterB

	* src/mailbox-conf.c: Check whether a mailbox view is already in
	balsa_app.mailbox_views.

2003-08-13 19:26  PeterB

	* libbalsa/body.c: Don't include G_DIR_SEPARATORs in temp_filenames
	(libbalsa_message_body_save_temporary).

2003-08-13  Pawel Salek  <pawsa theochem.kth.se>

	* libbalsa/address-book-ldap.c: provide more accurate information
	on errors.
	* libbalsa/address-book.[hc]: framework for detailed error reporting.
	* src/ab-window.c: use it.
	* src/sendmsg-window.c: set window focus correctly on delete event.
	
2003-08-13 09:29  PeterB

	* libbalsa/mailbox-filter.c: Plug memory leak in
	mailbox_filters_section_lookup.

2003-08-10  Pawel Salek  <pawsa theochem.kth.se>

	* libbalsa/address-book*.[hc]:
	* libbalsa/address-book-*.[hc]: add ability of filtering entries
	on loading to improve handling of large address books.
	* libbalsa/address.[hc]: lb_addr__new_from_edit_entries implemented.
	* src/ab-main.c: further work.
	* src/ab-window.[hc]: filtering support.
	* src/address-book-config.c: close ldap connection after changing
	config.
	* src/store-address.c: factor out common code to address.c
	
2003-08-08  Pawel Salek  <pawsa theochem.kth.se>

	* libbalsa/address-book-ldap.c: implement "{add,modify,remove}-address"
	signals.
	* libbalsa/libbalsa_private.h: check CLIENT_CONTEXT extra carefully.
	* libbalsa/mailbox_imap.c: get_stream returns pointer, not bool.
	* src/store-address.c: make address book selection actually work.

2003-08-07  Pawel Salek  <pawsa theochem.kth.se>

	* libbalsa/address-book.[hc]: add remove-address and modify-address
	signals.
	* libbalsa/address-book-{extern,ldap,ldif,vcard}.c: add remove/modify
	support.
	* libbalsa/information.[hc]: add ability to choose parent for
	the message window.
	* libbalsa/libbalsa-marshal.list: add INT:OBJECT,OBJECT marshaller.
	* libbalsa/libbalsa.c: pass parent window.
	* src/information-dialog.[hc]: use passed parent window.
	* src/main.c: balsa_information_parented is now the main info callback.
	* src/store-address.c: check for errors when adding addresses.

	* src/main-window.c: add a shortcut for "toggle read" action.
	* src/balsa-message.c: sanitize attachment filenames (Albrecht Dress).
	
2003-08-05  Pawel Salek  <pawsa theochem.kth.se>

	* libbalsa/address.[hc]: move common address edition code here.
	* src/ab-main.c: further hacking.
	* src/store-address.c: remove common address edition code from here.

2003-07-31 16:43  PeterB

	* src/: balsa-message.c, balsa-message.h, main-window.c: Make all
	the zoom code conditional on HAVE_GTKHTML.
	* src/print.c: Add missing "break" in a switch.

2003-07-29  Pawel Salek  <pawsa theochem.kth.se>

	* src/balsa-index.c: try addressing #118620: reorder menu entries.

2003-07-29 12:31  PeterB

	* src/balsa-index.c: Try harder to keep threads expanded when
	balsa_app.expand_tree is set.
	* libbalsa/address-book-extern.c: Fix #118574, #118576, #113371.

2003-07-28 14:52  PeterB

	* src/sendmsg-window.c: Prepare message for "DelSp=Yes" before
	sending; this uses the `undo' buffer, which necessitated cleaning
	up buffer handling.
	* src/balsa-message.c: Check for "DelSp=Yes" on a "format=flowed"
	message body.
	* libbalsa/send.c: Set "DelSp=Yes" on "format=flowed" bodies.
	* libbalsa/: misc.c, misc.h: Implement "DelSp=Yes" wrapping; clean up
	wrapping code; use pango_get_log_attrs() instead of our own code.
	* libbalsa/mime.c: If body is "DelSp=Yes", pass that info to
	libbalsa_process_text_rfc2646().
	* libbalsa/: body.c, body.h: Implement
	libbalsa_message_body_is_delsp()--looks for "DelSp=Yes" on a
	"text/plain" message body.

2003-07-27  Pawel Salek  <pawsa theochem.kth.se>

	* NEWS, configure.in: release balsa-2.0.13

2003-07-25  Darko Obradovic <dobradovic gmx.de>

	* src/main.c: set up the icon in a GNOME-2 compatible fashion.
	* src/main-window.c: remove unused set_icon() routine.

2003-07-23  Pawel Salek  <pawsa theochem.kth.se>

	* src/balsa-app.h: change date defaults as suggested in #118118.
	* src/sendmsg-window.c: use gnome default editor.
	* src/balsa-app.h: remove balsa_app.extern_editor_command.
	* src/save-restore.c, src/pref-manager.c: ditto.

2003-07-22  Pawel Salek  <pawsa theochem.kth.se>

	* src/mailbox-conf.c: fix (at least partially) bug 117163.
	* src/main-window.c: change collapse thread shortcut to Ctrl-R 118070.
	* libbalsa/libbalsa.h, libbalsa/source-viewer.c: remember
	last setting of "Escape Specials" in message source viewer.
	* src/balsa-app.h, src/balsa-index.c, src/message-window.c:
	* src/save-restore.c: ditto.
	* src/sendmsg-window.c: remove some shortcut conflicts.

2003-07-21  Pawel Salek  <pawsa theochem.kth.se>

	* autogen.sh: better scriptlet for libtool version detection.
	* configure.in: remove -Wsign-promo - it is C++-specific.
	* libbalsa/{folder-scanners,mailbox_imap,notify}.c: 
	* src/balsa-index.c: compile with gcc-3.3 with no warnings.
	* src/save-restore.c: clean mailbox sections.
	
2003-07-18 15:05  PeterB

	* src/balsa-index.c: Expand row after setting message.

2003-07-18  Pawel Salek  <pawsa theochem.kth.se>

	* libbalsa/address-book-ldap.c: try to use LDAPV3 whenever available
	- partially address bug 116953.
	* libbalsa/mailbox_imap.c: update headers if needed (bug 117723)
	* libbalsa/message.c: refresh headers if needed.
	* libbalsa/message.h: add an 'updated' flag. Remove user_headers.
	* libbalsa/send.c: adjust accordingly.

2003-07-17 11:29  PeterB

	* src/balsa-index.c: Leave thread expanded when deleting message(s)
	if balsa_app.expand_tree is TRUE;
	Add new messages in expanded subthread if balsa_app.expand_tree
	is TRUE
	(http://mail.gnome.org/archives/balsa-list/2003-July/msg00054.html).

2003-07-16  Pawel Salek  <pawsa theochem.kth.se>

	* src/main.c: remove console warning questioned in bug 114036.
	* src/sendmsg-window.c: Set locale also for non-English languages.

2003-07-15 11:40  PeterB

	* src/sendmsg-window.c: Set locale only when menu item is
	activated.
	* src/spell-check.c: On error, signal the compose window so that it
	can restore editability (fixes a bug that was reported--I can't
	find the report right now).

2003-07-15  Pawel Salek  <pawsa theochem.kth.se>

	* libbalsa/mailbox_pop3.c: do not try saving NULL config strings.
	* libbalsa/server.c: default remember_passwd to FALSE.
	* src/balsa-app.c: make switching remembering passwds easier.
	* src/main-window.c: simplify asking for passwd (also bug 117386).
	* configure.in: replace --enable-ldap with more apriopriate --with-ldap

2003-07-14  Pawel Salek  <pawsa theochem.kth.se>

	* src/sendmsg-window.c: display mark by the selected language entry.

2003-07-10  Pawel Salek  <pawsa theochem.kth.se>

	* src/filter-run-callbacks.c: fix bug 116603.

2003-07-08  Danilo Šegan  <dsegan@gmx.net>

	* src/main-window.c (show_about_box): Use the "translator_credits"
	in Gnome about box - fixes bug #116994.

2003-07-08  Danilo Šegan  <dsegan@gmx.net>

	* balsa.desktop, sounds/balsa.soundlist, sounds/email.soundlist:
	Added Serbian translations.

2003-07-08  Pawel Salek  <pawsa theochem.kth.se>

	* src/balsa-app.h: add fields for print settings: margins, layout etc.
	* src/save-restore.c: save&restore more print settings.
	* src/print.c: get'em and set'em.

2003-07-06  Pawel Salek  <pawsa theochem.kth.se>

	* NEWS, configure.in: release balsa-2.0.12.

2003-07-05  Albrecht Dreß  <albrecht.dress@arcor.de>		

	* src/balsa-message.c: show from and subject for attached 
	messages

2003-07-04  Pawel Salek <pawsa theochem.kth.se>

	* src/sendmsg-window.c: sort also translated language names.
	* libbalsa/body.c: _() declaration needed.

2003-07-03  Carlos Morgado  <chbm chbm.nu>

	* libbalsa/send.c: send text attachs as unknown-8bit

	* libbalsa/body.c,h:
	* libbalsa/filter.c:
	* libbalsa/libbalsa.h:
	* libbalsa/message.c,h:
	* libbalsa/send.c:
	* libmutt/parse.c:
	* src/balsa-index.c:
	* src/balsa-message.c:
	* src/print.c:
	* src/sendmsg-window.c:
	* src/store-address.c:
	aply Albrecht's patch #114411 - show embeded headers

2003-07-02  Danilo Šegan  <dsegan@gmx.net>

	* configure.in: Added "sr" and "sr@Latn" to ALL_LINGUAS.

2003-06-29  Albrecht Dreß  <albrecht.dress@arcor.de>	

	* src/pixmaps/info_lock_sigtrust.xpm: 
	* src/balsa-message.c: 
	* src/balsa-index.c: 
	* src/balsa-icons.h: 
	* src/balsa-icons.c: 
	* libbalsa/rfc3156.h: 
	* libbalsa/rfc3156.c: 
	* libbalsa/message.h: 
	improve the display of successfully checked signatures, 
	taking the key's "validity" and "trust" fields into account.

2003-06-27 10:21  PeterB

	* libbalsa/identity.c: Use ident_dialog_update() to validate and
	update the current identity before creating a new one (fixes
	#116027) and before changing the default identity; update name in
	identity list as user edits the entry.

2003-06-26 21:18  PeterB

	* src/balsa-message.c: Compile with --disable-gtkhtml.

2003-06-25 07:47  PeterB

	* src/sendmsg-window.c: Replace Reflow Paragraph and Reflow Message,
	which were disabled for format=flowed, with Reflow Selected Text,
	which is enabled for format=flowed: reflow and requote lines
	containing selected text.
	* src/quote-color.c: Use libbalsa_match_regex() in is_a_quote().
	* libbalsa/: misc.c, misc.h: Implement libbalsa_unwrap_selection(),
	which fixes broken wrapping and quoting, and libbalsa_match_regex(),
	a slight generalization of is_a_quote().

2003-06-24 18:19  PeterB

	* src/main-window.c: Warn msgfmt about a translated string with a
	natural `%' sign (#115888).

2003-06-24 02:06  PeterB

	* src/balsa-message.c: Don't leak memory when using popup menu.
	* src/main-window.c: Add zoom controls to the main window's View
	menu.
	* src/: balsa-message.c, balsa-message.h: Add zoom methods to the
	API; add a popup menu for HTML items with zoom controls.

2003-06-19 11:07  PeterB

	* src/: main-window.c, message-window.c, sendmsg-window.c: Use
	libbalsa_window_select_all(), to make "select-all" consistent with
	the other editing methods ("copy" in all windows, and "cut" and
	"paste" in the compose window).
	* src/: balsa-message.c, balsa-message.h: Remove
	balsa_message_select_all(); implement balsa_message_grab_focus(),
	so that we can use the focus widget as the target for copy and
	select-all.
	* libbalsa/: misc.c, misc.h: Imnplement
	libbalsa_window_select_all(), a helper for "select-all" callbacks.

2003-06-18 09:09  PeterB

	* libbalsa/mailbox.c: When we see LibBalsaMailboxLocal in the
	config file, replace it with the actual type.

2003-06-17 07:41  PeterB

	* libbalsa/mailbox.c: Check for error return from
	libbalsa_mailbox_type_from_path().
	* src/information-dialog.c: Dialog may be called when
	balsa_app.appbar is NULL.
	* src/sendmsg-window.c: When type == SEND_CONTINUE, remember the
	correct draft message.
	* src/balsa-index.c: Be more careful when adding messages in an
	idle callback.

2003-06-04  Pawel Salek <pawsa theochem.kth.se>

	* libbalsa/address-book-ldif.c: detect circular references.
	* libbalsa/source-viewer.c: compile on RH9.
	* src/mailbox-conf.c: do not crash on POP3 mailbox configuration.
	
2003-06-04 20:56  PeterB

	* src/: sendmsg-window.c, sendmsg-window.h, toolbar-factory.c:
	Implement Undo and Redo options on the compose window's View menu,
	and corresponding toolbar buttons.
	* libbalsa/source-viewer.c: Include "misc.h" (Miquel van
	Smoorenburg <miquels@cistron.nl>); weak ref the message.

2003-06-03 22:22  PeterB

	* libbalsa/libbalsa.h, libbalsa/source-viewer.c, src/balsa-index.c,
	src/main-window.c, src/message-window.c: Use balsa_app.message_font
	for the source viewer, and add a View menu with an option to
	utf8_sanitize the source, not g_strescape it.
	* src/main.c: Ignore SIG_PIPE before starting gnome triggers.
	* src/: balsa-message.c, balsa-message.h, main-window.c,
	message-window.c, sendmsg-window.c, sendmsg-window.h: Handle cut,
	copy, and paste using clipboard signals (fixes #113337).

2003-06-02  Carlos Morgado  <chbm chbm.nu>

	* libbalsa/folder-scanners.c (libbalsa_scanner_mdir): 
	allow nested maildir

2003-06-01 09:49  PeterB

	* src/information-dialog.c: Change the information list widget from
	GtkTreeView to GtkTextView.

2003-05-30 07:00  PeterB

	* src/sendmsg-window.c: Replace obsolete cs_CS and fix typo
	(Ladislav Michl <ladis@linux-mips.org>).

2003-05-28 19:56  PeterB

	* src/sendmsg-window.c: When replying, don't ref message->mailbox:
	it can prevent Balsa from closing it properly.
	* libbalsa/filter.c, libbalsa/message.c, libbalsa/send.c,
	src/balsa-index.c, src/balsa-message.c, src/sendmsg-window.c: Check
	for NULL message->from.

2003-05-27 21:20  PeterB

	* src/main-window.c: Restore set_wmclass to new mail notification
	popup.
	* src/balsa-app.c: Remove `connect_swapped' from create_entry: it
	sometimes leads to infinite recursion=>segv.

2003-05-27  Albrecht Dreß  <albrecht.dress@arcor.de>
	
	* src/message-window.c: 
	* src/main-window.c: 
	* src/balsa-message.c: 
	* src/balsa-message.h: 
	replace the message-part list with a tree 

2003-05-27 09:15  PeterB

	* libbalsa/: mailbox.c, mailbox.h: Move view info into a new
	LibBalsaMailboxView structure, and implement methods for it.
	* src/save-restore.c: Save and restore mailbox views; scrap list of
	open mailboxes.
	* src/main-window.c: Use mailbox views; maintain the `open' member.
	* src/balsa-mblist.c: Use mailbox views; maintain the `exposed'
	member.
	* src/: balsa-index.c, mailbox-conf.c, main.c, sendmsg-window.c:
        Use mailbox views.
	* src/: balsa-app.c, balsa-app.h: Add balsa_app.mailbox_views, a
	hash table of LibBalsaMailboxView structures that persists over
	rescans; use views to remember open mailboxes, instead of a special
	list; open them without descending into the tree (imap mailboxes
	that need to be opened are already there).
	* libbalsa/: mailbox_imap.c, mailbox_imap.h: Implement and use
	convenience methods for making imap URLs and paths (a path is a URL
	without the user info).
	* libbalsa/: folder-scanners.c, folder-scanners.h: Browse imap
	folders recursively, instead of by depth; use callbacks to decide
	how deep and to notify about browsing.
	* src/mailbox-node.c: Use mailbox views; attach mailbox view when
	opening a mailbox; provide callbacks for imap browsing.

2003-05-21 19:34  PeterB

	* src/main-window.c: Fix #113130: Make new mail notification window
	not transient for the rest of Balsa.

2003-05-15 10:59  PeterB

	* libmutt/imap/imap.c: Check for broken IMAP connection in
	imap_uid_search.

2003-05-15  Pawel Salek  <pawsa@theochem.kth.se>

	* sounds/balsa.soundlist: convert to UTF-8

2003-05-11  Albrecht Dreß  <albrecht.dress@arcor.de>

	* configure.in:
        * libbalsa/rfc3156.c:
        * libbalsa/rfc3156.h:
        * src/balsa-message.c:
        popup a dialog if key is not found and run
        gpg --recv-key

2003-05-11  Pawel Salek  <pawsa@theochem.kth.se>

	* NEWS, configure.in: release 2.0.11.
	* src/balsa-message.c: be less verbose on message format errors.

2003-05-09  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/address-book-ldap.c: handle large directories slightly
	better (show at least some records).
	* libbalsa/filter-file.c: build workarounds for yellowdog. (AD)
	* src/filter-edit-callbacks.c: ditto.

2003-05-07  Albrecht Dreß  <albrecht.dress@arcor.de>

	* libbalsa/body.c: use attachment's extension for temporary files.
	* src/balsa-message.c: set MDN message type to multipart/report.

2003-05-06 05:35  PeterB

	* libbalsa/mailbox_local.c: Fix #111288.

2003-05-06  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/send.c: make ESMTP protocol more verbose - fix bug 112285.
	* libbalsa/filter.c: play sound and popup dialogs if requested (EA).
	* libbalsa/address-book-ldap.c: ldap caching deprecated in 
	openldap-2.1.x, remove references to it.

2003-05-05 08:30  PeterB

	* src/sendmsg-window.c: Replace some stray `msg's with `bsmsg'.
	* libbalsa/misc.h: Don't include "libbalsa.h".

2003-05-05  Pawel Salek  <pawsa@theochem.kth.se>

	* src/sendmsg-window.c: fix bug 112266.

2003-05-05  Albrecht Dreß  <albrecht.dress@arcor.de>

	* src/balsa-message.c: sanitize subject to avoid errors on reply etc.
	* src/{print,sendmsg-window}.c: ditto.

2003-05-05  Albrecht Dreß  <albrecht.dress@arcor.de>

	* libbalsa/identity.[hc]: add gpg_sign and gpg_encrypt fields, and 
	respective UI support.
	* libbalsa/rfc3156.[hc]: enable passphrase caching.
	* src/balsa-icons.[hc]: add balsa_gpg_{encrypt,sign}.xpm 
	* src/balsa-message.c: adapt to changed rfc3156 API.
	* src/sendmsg-window.[hc]: add tools for encrypt/sign.
	* src/toolbar-factory.c: support for configuring encrypt/sign tools.
	
2003-05-04 23:40  PeterB

	* src/sendmsg-window.c: Fix #111958 (Albrecht Dreß
	<albrecht.dress@arcor.de>)

2003-05-03 03:50  PeterB

	* src/: balsa-app.c, balsa-app.h, balsa-mblist.c, mailbox-node.c,
	main.c, main-window.c, save-restore.c, src/sendmsg-window.c,
	sendmsg-window.h: Use mailbox views to remember expanded folders.
	* src/sendmsg-window.c: Make Edit => {cut,copy,paste} apply to
	widget with focus, not always the text (#111801);
        agree on `bsmsg' as the identifier for a BalsaSendmsg.
	* libbalsa/address-entry.c: Use clipboard signals instead of
	catching ctrl+{x,c,v}.

2003-05-01 21:44  PeterB

	* libbalsa/filter.c: Message list for filter action must not have
	duplicates.

2003-05-01  Albrecht Dreß  <albrecht.dress@arcor.de>

	* libbalsa/libbalsa.c: show ceritificate expire date
	correctly

2003-04-29 17:32  PeterB

	* libbalsa/misc.c: Fix #111817.

2003-04-26  Kang Jeong-Hee  <Keizi@mail.co.kr>

	* balsa.desktop: replace broken Name[ko] and Comment[ko]
	with proper UTF-8 string.

2003-04-26 06:35  PeterB

	* libbalsa/folder-scanners.c: When list_inbox is specified, add
	INBOX to the list of folders but don't flag it for scanning as the
	root of a tree.
	* src/balsa-message.c: Always remember id returned by g_idle_add.

2003-04-26  Kang Jeong-Hee  <Keizi@mail.co.kr>

	* src/balsa-index.c, src/balsa-message.c: replace (FALSE, 0)
	of libbalsa_utf8_sanitize() with (balsa_app.covert_unknown_8bit,
	balsa_app.convert_unknown_8bit_codeset).

2003-04-24 11:26  PeterB

	* libbalsa/misc.c: Fix a corner case.
	* src/sendmsg-window.c: Grab gdk lock in a timeout handler; scroll
	to cursor after wrapping.
	* libbalsa/misc.c: Mark URLs in a text buffer, so they don't get
	wrapped.

2003-04-22 15:42  PeterB

	* doc/C/balsa.xml: Fix #110881.
	* src/message-window.c: Make closing the window more
	robust (possible fix for #111178).  Protect against
	destroying message window before idle handler
	is called. Save and restore window dimensions
	(http://mail.gnome.org/archives/balsa-list/2003-April/msg00020.html).
	* src/: balsa-app.h, save-restore.c: Save and restore message
	window dimensions.

2003-04-18 11:00  PeterB

	* libbalsa/misc.h: Include LIBBALSA_NUM_CODESETS in LibBalsaCodeset
	enum, instead of #defining it (Kang Jeong-Hee <Keizi@mail.co.kr>).

2003-04-17 18:51  PeterB

	* libbalsa/: mailbox.c, mailbox.h: Add LibBalsaMailboxShow *show
	member to LibBalsaMailbox, and the LibBalsaMailboxShow enum.
	* src/balsa-mblist.c: Make sure mailbox->show is set when adding a
	mailbox to the list.
	* src/balsa-index.c: Use mailbox->show instead of looking for sent,
	draft, and outbox.
	* src/: mailbox-conf.c, mailbox-conf.h: Consolidate code for
	widgets that control mailbox view items, and add a radio group for
	showing From or To.
	* src/folder-conf.c: Use the code in mailbox-conf.c for view
	widgets.

2003-04-14 19:13  PeterB

	* src/main-window.c: Rearrange Help menu (Darko Obradovic
	<dobradovic@gmx.de>).

2003-04-13 08:52  PeterB

	* src/sendmsg-window.c: Use a GString instead of a stack buffer and
	strcat().

2003-04-12 13:14  PeterB

	* src/: sendmsg-window.c, sendmsg-window.h: Put the headers in a
	scrolled window.

2003-04-11 16:43  PeterB

	* libbalsa/address.c: Check argument in libbalsa_address_get_name.
	* libbalsa/: message.c, message.h: Return "(No subject)" instead of
	a NULL pointer when there's no subject (see
	http://mail.gnome.org/archives/balsa-list/2003-April/msg00053.html
	and followups).

2003-04-10 16:25  PeterB

	* libbalsa/mailbox_local.c: Make sure
	libbalsa_mailbox_local_set_path returns non-zero on error.

2003-04-09  Albrecht Dreß  <albrecht.dress@arcor.de>

	* libbalsa/rfc3156.[ch]: OpenPGP (RFC2440) mode support.
	* libbalsa/send.c: sending OpenPGP signed messages.
	* src/balsa-message.c: provide more feedback for messages with
	broken structure.
	* src/sendmsg-window.[hc]: Allow to select OpenPGP mode.
	* src/main-window.c: fixes a GPG-related crash when during startup.
	* libbalsa/rfc3156.c: make the passphrase dialog mt safe.
	* libbalsa/rfc3156.[hc], src/balsa-message.c: remember signature
	info for '2440 messages.
	* libbalsa/mime.c: strip signature info off a '2440 message on
	reply/forward/... 
	* configure.in: replace --enable-gpgme with --with-gpgme.


2003-04-07 08:43  PeterB

	* libbalsa/misc.c, libbalsa/misc.h, src/pref-manager.c: Remove
	libbalsa_{de}escape_specials; use g_str{escape,compress} instead.
	* libbalsa/misc.c: Streamline libbalsa_make_string_from_list_p
	(Manu).

2003-04-06  Emmanuel <e.allaud@wanadoo.fr>

	* libbalsa/mailbox_pop3.c: fix progress dialog for multiple POP servers

2003-04-04 06:07  PeterB

	* src/sendmsg-window.c: Fix Edit => Wrap Body.

2003-04-04  Albrecht Dreß  <albrecht.dress@arcor.de>

	* libbalsa/rfc3156.c: remove paranoia test.
	* src/print.c: sanitize before printing.
	* src/sendmsg-window.c: sanitize before displaying.

2003-04-03 12:14  PeterB

	* src/sendmsg-window.c: Wrap initial text.

2003-04-03  Albrecht Dreß  <albrecht.dress@arcor.de>

	* libbalsa/rfc3156.[hc]: fix EOL character conversion.  Implement
	libbalsa_signature_info_to_gchar(). selecting a key from a list if
	a signer or recipient has more than one suitable key in the key
	ring.
	* src/balsa-message.c: use libbalsa_signature_info_to_gchar().
	* src/print.c: signature printing support.
	* src/sendmsg-window.c: clean up.
	* INSTALL: GPG description.
	* configure.in: attempt to change the linking order.

	* libbalsa/misc.[ch]: libbalsa_utf8_sanitize() with a charset
	fallback instead of '?'
	* src/balsa-app.h: default broken charset.
	* src/balsa-{index,message}.c: use new _sanitize()
	* src/pref-manager.c: configure the default fallback charset.
	* src/save-restore.c: save and restore it.

2003-04-02  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/misc.h: #include gtk.h is needed to build with gtk-2.2

2003-04-02 09:13  PeterB

	* libbalsa/mime.c, libbalsa/misc.c, libbalsa/misc.h,
	src/balsa-message.c, src/sendmsg-window.c, src/sendmsg-window.h:
	Wrap text in the message window and the compose window using Pango
	to find potential line breaks.
	* src/: spell-check.c, spell-check.h: Use marks to remember current
	word between events.

2003-04-02  Emmanuel <e.allaud@wanadoo.fr>

	* libbalsa/mailbox.[hc],mailbox_{local,imap}.[hc]: define new
	functions (mainly functions moved from filter code) to implement
	the new API, add filtering on reception (in open and check funcs).
	* libbalsa/filter.[hc]: move code to mailbox files.
	* libbalsa/libbalsa-marshal.list: add BOOLEAN:POINTER
	* src/filter-run-callbacks.c use new functions.

2003-03-26  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/address-book-ldap.c: LDAP uses UTF-8 and so do we.
	* src/main.c: fix -i CLO (bug 109293).
	* src/save-restore.c: fix --without-esmtp (bug 109234).

2003-03-24  Pawel Salek  <pawsa@theochem.kth.se>

	* NEWS, configure.in: release 2.0.10

2003-03-24  Albrecht Dreß  <albrecht.dress@arcor.de>

	further work on GPG
	* libbalsa/message.h: add sig_state field.
	* libbalsa/send.c: proper encryption when multiple recipients.
	* libbalsa/rfc3156.[hc]: better error handling.
	* src/balsa-icons.[hc]: new pixmaps.
	* src/balsa-index.c: improve the display of the sig/encrypt state.
	* src/balsa-message.c: implement balsa_message_scan_signatures()
	* src/sendmsg-window.h: add gpg_mode field.
	* src/sendmsg-window.c: gpg mode switching UI.

2003-03-24  Carlos Morgado  <chbm@chbm.nu>

	* HACKING: added contacts

2003-03-24  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-message.c: fix misspelling (bug 109074)
	* src/sendmsg-window.c: fix split sentence (bug 109073).
	* src/main.c, configure.in: revert C. Neumair's changes.

2003-03-21  Christian Neumair  <chris@gnome-de.org>

	* src/main.c: Use gtk_window_set_default_icon_from_file instead of
	gnome_window_icon_set_default_from_file to set default icon.
	Requires GTK-2.2.
	* src/main-window.c: Don't mark Copyright string for translation,
	UTF-8-escape it.
	* src/message-window.c: Marked missing menu labels for translation.
	* src/information-dialog.c: HIGified.
	* configure.in: Require at least GTK-2.2.

2003-03-20  Guntupalli Karunakar  <karunakar@freedomink.org>

	* configure.in: Added Mayalalam (ml) in ALL_LINGUAS

2003-03-18  Albrecht Dreß  <albrecht.dress@arcor.de>

	* libbalsa/body.[ch]: add, initialize destroy GPG-related fields.
	* libbalsa/message.[ch]: implement is_pgp_{signed,encrypted}()
	* libbalsa/send.c: more detailed error info from libbalsa_create_msg().
	* src/balsa-icons.[ch]: add info_lock icon.
	* src/balsa-index.c: display info_lock icons.
	* src/main.c: init gpgme.
	* src/sendmsg-window.c: send encrypted messages.
	* configure.in: configure GPGME
	* libbalsa/rfc3156.[hc]: add.
	* src/pixmaps/info_lock.xpm: ditto.

2003-03-15 07:40  PeterB

	* libbalsa/misc.c: Wrap utf-8 patch
	(http://mail.gnome.org/archives/balsa-list/2003-March/msg00075.html
	); with minor change
	(http://mail.gnome.org/archives/balsa-list/2003-March/msg00077.html
	).

2003-03-14 10:32  PeterB

	* src/: balsa-app.c, balsa-app.h, balsa-message.c, pref-manager.c,
	save-restore.c, sendmsg-window.c, sendmsg-window.h: Take the MDN
	and "format-flowed" options out of the config, and take the
	send/queue option out of the compose window's Options menu.
	* libbalsa/: body.c, body.h, mime.c, misc.c, misc.h, send.c: Rename
	libbalsa_flowed_rfc2646 as libbalsa_message_body_is_flowed, and
	move it from libbalsa/misc.[ch] to libbalsa/body.[ch].

2003-03-13 13:23  PeterB

	* src/sendmsg-window.c: Use translated strings for headers when
	using external editor; use g_string_append_printf.

2003-03-13  Emmanuel <e.allaud@wanadoo.fr>

	* libbalsa/filter-funcs.[hc]: new functions to compare conditions.
	* libbalsa/mailbox.[hc]: replace get_matching message by message_match.
	* libbalsa/mailbox_imap.[hc]: optimized handler.
	* libbalsa/libbalsa-marshal.list: add BOOLEAN:POINTER,INT,POINTER
	* src/balsa-index.c: use the new functions.

2003-03-13  Pawel Salek  <pawsa@theochem.kth.se>

	* src/{ab-window.c,address-book-config.c}: enable NLS again.

2003-03-12 16:44  PeterB

	* src/balsa-index.c: Don't clear the index when there's one message
	left.
	* src/pref-manager.c: Implement pm_page_add_to_size_group to
	simplify alignment.
	* src/sendmsg-window.c: Add `format-flowed' to message options
	menu.

2003-03-12  Pawel Salek  <pawsa@theochem.kth.se>

	* src/print.c: mark a string for translation.
	* libbalsa/identity.c: enable NLS.

2003-03-11 17:17  PeterB

	* src/balsa-index.c: Don't clear the index when it's not empty.
	* src/filter-edit-callbacks.c: Use a non-modal condition-edit
	dialog, and desensitize the filter-edit dialog while the
	condition-edit dialog is open.
	* libbalsa/identity.c: Confirm deletion in a non-modal dialog.
	* src/sendmsg-window.c: Make sure an identity has an address before
	comparing it with another string.

2003-03-10 20:08  PeterB

	* src/: balsa-index.c, main-window.c, store-address.c,
	store-address.h: Non-modal store address dialog.

2003-03-09 22:54  PeterB

	* libbalsa/identity.c, src/balsa-message.c, src/folder-conf.c,
	src/information-dialog.c, src/mailbox-conf.c, src/mailbox-node.c,
	src/main-window.c, src/sendmsg-window.c, src/store-address.c: Use
	[lib]balsa-information for error messages.
	* src/print.c: Close print dialog when compose window is closed.

2003-03-08 00:26  PeterB

	* src/: main-window.c, message-window.c, print.c, print.h,
	sendmsg-window.c, sendmsg-window.h: Allow only one print dialog,
	even for the compose window.

2003-03-07 11:44  PeterB

	* src/balsa-index.c: Don't count deleted messages when looking for
	duplicates.

2003-03-06 13:54  PeterB

	* src/: sendmsg-window.c, spell-check.c, spell-check.h: Non-modal
	spell checker.
	* src/mailbox-conf.c: Use identity set by user in mailbox conf
	dialog.

2003-03-06  Emmanuel <e.allaud@wanadoo.fr>

	* libbalsa/filter.c: utf8-aware filtering.
	* libbalsa/pop3.c: better UI feedback of the dowload progress.

2003-03-04 11:26  PeterB

	* libbalsa/misc.c: Fix infinite loop when not wrapping.

2003-03-03 18:39  PeterB

	* libbalsa/message.h, libbalsa/misc.h, libbalsa/send.c,
	libbalsa/send.h, src/main-window.c: Drop encoding and flow
	arguments to libbalsa_process_queue; we can get them from the
	messages in the outbox, on a per-message basis.

2003-03-02 18:02  PeterB

	* src/: balsa-message.c, pref-manager.c: Separate wrapping from
	recognizing `format=flowed' in incoming messages.
	* doc/C/balsa.xml: Add documentation for Mailbox => Edit/Apply
	Filters, Mailbox => Remove Duplicates.
	* src/sendmsg-window.c: Make address book dialog non-modal.
	* src/ab-window.c: Fix packing options.

2003-02-28  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/libbalsa.c: recignize 8-bit charsets before euc-xx etc.
	* libbalsa/mailbox_pop3.c: partially fix progress dialog (Emmanuel).
	* libbalsa/mailbox_local.c: run filters on reception (Emmanuel).
	* src/balsa-{app,message}.[hc]:
	* src/{main,message}-window.c:
	* src/print.c: fix Show all toolbar button (Steve Wall)
	* src/balsa-index.c: use bold font to mark unseen messages.
	* src/mailbox-conf.c: fix bug 107299.

2003-02-28 15:21  PeterB

	* src/balsa-message.c: Fix header indents.

2003-02-27  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-index.c: add extra protection via weak pointers.
	* src/balsa-message.c: lock gdk in idle handler.
	* src/sendmsg-window.c: use timeout instead of idle for checking
	on external editor.

2003-02-27 15:55  PeterB

	* libbalsa/source-viewer.c: Make text not editable (!)
	* src/: balsa-index.c, balsa-index.h, main-window.c: Implement
	Mailbox=>_Remove Duplicates.

2003-02-27  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/misc.c: 
	* libbalsa/libbalsa.c:
	be a bit smarter about finding domainname

2003-02-27  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox_imap.c: remove forgotten gdk locks from libbalsa.
	* src/balsa-app.c: threads do not hold gdk lock here.
	* src/balsa-index.c: unlock gdk before entering time consuming
	operation.

2003-02-25 13:37  PeterB

	* src/: balsa-app.c, balsa-index.c, balsa-mblist.c, mailbox-node.c:
	Scan deep enough to open remembered mailboxes.

2003-02-24  Carlos Morgado  <chbm@chbm.nu>

	* src/pref-manager.c: 
	* src/balsa-app.h: 
	* src/main-window.c: 
	* src/save-restore.c:
	upport of autocommit + use timeouts in seconds internaly

2003-02-23  Pawel Salek  <pawsa@theochem.kth.se>

	* NEWS, configure.in: prepare 2.0.9 release.
	* balsa.desktop: startup notification support.
	* {libinit_balsa,libbalsa,src}/Makefile.am: support distcheck target.
	* libbalsa/filter-{funcs.[hc],private.h}: cleanup API.
	* libbalsa/filter.[hc]: ditto.
	* src/filter-{run,edit}-callbacks.c: use cleaner API.
	* src/balsa-message.c: display more message/* type message parts.
	* src/filter-run-callbacks.c, src/save-restore.c: compile on phoebe3.

2003-02-23  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-app.c: fix deadlock on filtering.
	* libbalsa/filter.c: applying filters in presence of deleted messages
	fixed (Emmanuel).

2003-02-22 07:54  PeterB

	* libbalsa/address-entry.c, libbalsa/identity.c,
	libbalsa/information.c, libbalsa/libbalsa.c, src/balsa-app.c,
	src/balsa-index.c, src/balsa-index.h, src/balsa-message.c,
	src/main-window.c, src/main.c, src/message-window.c,
	src/sendmsg-window.c: Deprecation cleanup (gtk_{idle,timeout}* =>
	g_{idle,timeout,source}*).

2003-02-20 15:52  PeterB

	* src/: main-window.c, sendmsg-window.c: Remove conflicts over
	ctrl+A accelerators; make main window's `Edit => Select All'
	focus-aware; make compose window's `Edit => Select All' consistent
	with main window.

2003-02-19  Carlos Morgado  <chbm chbm.nu>

	* src/balsa-index.c: actually update last_use so that autocommit and autoclose work. we're a little too liberal updating it

2003-02-19 Steve Wall  <hitched97@myrealbox.com>

	* src/balsa-message.c: add '<' brackets to content-ID.

2003-02-18 23:02  PeterB

	* src/: balsa-app.c, balsa-app.h: Clean up sort utilities api.

2003-02-18  Emmanuel <e.allaud@wanadoo.fr>

	* libalsa/send.c: fix --without-estmp (bug 106377).

2003-02-17  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-mblist.c: set-unread-message-flags must be handled idle.

2003-02-16  Pawel Salek  <pawsa@theochem.kth.se>

	* NEWS, configure.in, Makefile.am: release balsa-2.0.8

2003-02-16 10:05  PeterB

	* src/mailbox-node.c: Find special mailboxes by mailbox instead of
	by url.

2003-02-15  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-mblist.c (bmbl_node_style): enforce view update (gtk2-2.2).

2003-02-14  Emmanuel <e.allaud@wanadoo.fr>

	* libbalsa/mailbox.c: initialize progress_notify.
	* libbalsa/mailbox_pop3.c: remove unnecessary includes and wrong 0.

2003-02-14  Pawel Salek  <pawsa@theochem.kth.se>

	* balsa.spec.in: update requirements.
	* libbalsa/mailbox_{local,imap,pop3}.c: remove unneeded locks.
	* src/mailbox-conf.c: enable mailbox check had wrong table row index.

2003-02-13  Pawel Salek  <pawsa@theochem.kth.se>

	* src/main-window.c: remove unneeded GDK locks.

2003-02-13 21:44  PeterB

	* src/main-window.c: Check that a message is in a mailbox.
	* src/balsa-index.c: Check that we have a current message before
	testing its flags.

2003-02-12 07:49  PeterB

	* src/balsa-mblist.c: Fix #105871: make mblist columns resizable
	again.

2003-02-11 19:13  PeterB

	* src/balsa-index.c: Use a weak pointer to find out when the
	BalsaIndex has been destroyed.
	* src/balsa-index-threading.c: Really try to avoid loops in the
	thread tree.

2003-02-11  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in: aspell-0.50 library is called libaspell (bug 105763).

2003-02-08  Pawel Salek  <pawsa@theochem.kth.se>

	* NEWS,configure.in: release balsa-2.0.7
	* libbalsa/misc.[hc]: implement libbalsa_urlencode() as in bug #105605.
	* libbalsa/mailbox_imap.c: use it.

2003-02-08  PeterB

	* src/balsa-index-threading.c: When a message is duplicated, use
	the replied-to copy as the head of a subthread.
	* src/balsa-mblist.c: Clean up sorting the mailbox list (Manu);
	simplify bmbl_row_compare.

2003-02-07  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-index.c: idle handlers should handle expunged messages.
	* src/balsa-mblist.c: idle handler for "set-unread-messages-flag".
	
2003-02-07 04:23  PeterB

	* src/balsa-index-threading.c: Properly thread duplicates in jwz
	threading (thanks to jwz for clarification!); use GNode api to
	simplify code.

2003-02-07  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox.c: remove some references to GDK to reduce
	interface locks.
	* libbalsa/mailbox_imap.[hc]: same. 
	Implement libbalsa_mailbox_imap_noop() to ping live connections.
	* src/balsa-app.c: ping imap connections (move to libbalsa?).
	* src/balsa-index.c: make libbalsa signal handlers thread-safe.
	* src/main-window.[hc]: support SMTP after POP3.
	
2003-02-06  Carlos Morgado  <chbm@chbm.nu>

	* src/sendmsg-window.c: correct loc_utf8_pos

2003-02-05  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox_pop3.[hc]: Add filter_cmd field.
	* libbalsa/pop3.[ch]: configurable filter command.
	* src/mailbox-conf.c: configure filter command.

2003-02-03 22:24  PeterB

	* src/sendmsg-window.c: Check for orig_message->mailbox before
	setting `replied' or deleting the message (mailbox is NULL if the
	orig_message has itself been deleted).
	* src/balsa-message.c: Rearrange part_info_init_unknown display.
	* libbalsa/: mailbox.c, message.c: Code cleanup (Manu).
	* src/: balsa-index-threading.c, balsa-index.c, balsa-index.h: Add
	a hash table of GtkTreeRowReferences to BalsaIndex, and use it in
	threading the index and finding messages.

2003-02-01 14:25  PeterB

	* libbalsa/mailbox.h: Add LB_MAILBOX_SORT_SENDER to the
	LibBalsaMailboxSortFields enum.
	* src/balsa-index.c: Add sorting by sender and subject; use gtk+
	methods to do the work. Simplify bndx_moveto (Manu). Fix a
        memory leak in bndx_copy_tree. Recreate tree store when setting
        flat threading.

2003-02-01  Pawel Salek  <pawsa@theochem.kth.se>

	* README: info about libesmtp cert location (bug 102566).
	* balsa.desktop: correct category (bug 104964).
	* src/address-book-config.c: resolve shortcut conflicts.
	* src/pref-manager.c: scrollbar for address books (Bug 104984).
	
2003-01-30  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox_imap.c: remove misspelling in the message
	* src/main-window.c: resolve shortcut conflict in Find dialog.

2003-01-29  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in: fix the openssl test (bug 104758, marcus@freebsd.org).

2003-01-29  Pawel Salek  <pawsa@theochem.kth.se>

	* NEWS, configure.in: release 2.0.6.

2003-01-29  PeterB

	* src/balsa-index.c: Use GtkTreeIter instead of GtkTreePath to
	iterate through the tree.
	* src/print.c: Work around poor error handling in gnome_font_find.

2002-12-28  Daniel Yacob  <yacob@geez.org>

	* configure.in: Added Amharic (am) in ALL_LINGUAS.

2003-01-28  Pawel Salek  <pawsa@theochem.kth.se>

	* src/print.c: fix Bug 104586
	* src/balsa-app.h: change print font defaults.

2003-01-27  PeterB

	* src/main-window.c: Grab focus to the mailbox index when opening
	mailbox, even if not displaying a message.
	* src/balsa-index.c: Sort index after populating and initially
	threading it.

2003-01-25  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/filter.c: fix possible mail duplication on filtring (Manu).
	* libbalsa/mailbox.c: default NULL identity.
	* src/{mailbox,folder}-conf.c: improve mailbox identity edition.
	* src/mailbox-node.c: remove debugging output.
	* src/main.c: load identities.

2003-01-25  PeterB

	* src/balsa-index.c: Two patches from Manu <e.allaud@wanadoo.fr>:
	1. search for messages without cycling through the whole mailbox;
	2. clean up thread_has_unread. Also postpone the call to
	bndx_set_parent_style until after rethreading.

2003-01-25  Christian Neumair  <chris@gnome-de.org>

	* libbalsa/identity.c: Reordered buttons to satisfy HIG.
	* src/mailbox-conf.c: Use GTK+ stock buttons where possible. Reduces
	number of strings marked for translation.

2003-01-22  Pawel Salek  <pawsa@theochem.kth.se>

	Compile against gnome-2.2 and openssl-0.9.7
	* configure.in: lower 2.2 requirements on libgnomeprint{,ui},
	support openssl-0.9.7
	* libbalsa/address-book-ldap.c: handle connection errors better.

2003-01-21  PeterB

	* src/folder-conf.c: Non-modal IMAP sub-folder dialog; use common
	code for the folder and sub-folder dialogs as far as possible.

2003-01-20  Pawel Salek  <pawsa@theochem.kth.se>

	Switch branches: gnome2 port is not in main branch. balsa-1.4x 
	in in BALSA_1_4_x

2003-01-20  Pawel Salek  <pawsa@theochem.kth.se>

	* src/sendmsg-window.c: make sig switching utf-8 safe. Add Esperanto.

2003-01-18  PeterB

	* src/folder-conf.c: Non-modal IMAP folder dialog.
	* src/balsa-index.c: Use gtk_tree_model_get_iter_first to test for
	any messages, instead of gtk_tree_model_iter_n_children, which
	could be time-consuming (Manu).

2003-01-17  PeterB

	* src/balsa-index.c: Remove a redundant test (Manu).

2003-01-17  PeterB

	* libbalsa/address-book-vcard.c: Silently return TRUE from
	load_vcard_file if the file contains no addresses.
	* src/balsa-index.c: Remove a redundant test (Manu).

2003-01-16  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in: detect whether LDAP lib supports TLS.
	* libbalsa/address-book-ldap.[hc]: support authenticated bind.
	* libbalsa/address-book.c: clean the address book section.
	* src/address-book-config.c: edit authentication entries.

2003-01-16  PeterB

        * src/main.c: Get an exclusive mailbox nodes lock before
        appending subtrees.
	* src/: balsa-mblist.c, balsa-mblist.h, mailbox-node.c,
	mailbox-node.h: Move balsa_mblist_scan_mailbox_node
	from balsa-mblist.c to mailbox-node.c and rename it as
	balsa_mailbox_node_scan_children; Rescan mailbox nodes more
	robustly.

2003-01-15  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox.c: store config prefix.
	* src/mailbox-conf.c: handle better empty fields.
	
2003-01-15  PeterB

	* src/mailbox-node.c: Fix #102139 (append-subtree failed for
	  `special' IMAP mailboxes).

2003-01-14  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/filter.c:compile with --disable-threads

2003-01-14  PeterB
        * libbalsa/mailbox.c (libbalsa_mailbox_link_message): Don't
          count deleted messages.

2003-01-13  Pawel Salek  <pawsa@theochem.kth.se>

	Albrecht Dress's patch to ignore alternative HTML parts.
	* src/balsa-app.h: add a new gboolean config variable display_alt_plain
	* src/balsa-message.c: modify scanning of multipart/alternative msgs.
	* src/pref-manager.c: add a check button in Display->Message.
	* src/save-restore.c: save & restore the config variable.

2003-01-12  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-message.c: fix gtkhtml2 space requisition (bug 103156).

2003-01-12  PeterB

	* src/: main-window.c, main-window.h: Don't export
	balsa_window_set_threading_menu.
	* src/balsa-index.c: Rethread after removing messages; implement
	and use a new helper, bndx_select_message;
	balsa_window_set_threading_menu is now handled in main window;
        don't clear the index when changing threading style.
	* src/balsa-index-threading.c: Threading code must not assume
	the index is initally flat.

2003-01-11  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/address-book-ldif.c: fix UTF-8 issues and nicknames.
	* src/address-book-config.c: missing _with_mnemonic().
	* libbalsa/abook-completion.c: cleanup address field naming.
	* libbalsa/address-book-{extern,ldap,vcard}.c: 
	* libbalsa/address.[ch]: ditto.
	* src/store-address.c: add more mnemonics.
	
2003-01-11  PeterB

        * src/balsa-index.c (balsa_index_set_threading_type): Reselect
        current message after rethreading.
	* libbalsa/filter.c, libbalsa/message.h, libbalsa/send.c,
	src/balsa-index.c, src/balsa-message.c: Use macros to examine
	LibBalsaMessage flags.

2003-01-11  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-app.[hc]: Add open_mailbox_vector.
	* src/main.c: open mailboxes AFTER the folders are scanned.
	* src/save-restore.c: do not attempt to open mailbes on config_load().
	* libbalsa/mailbox.c: consistently count messages (Emmanuel).

2003-01-10  PeterB

	* src/balsa-index.c (mailbox_messages_changed_status_cb):
	If deleted messages are shown, move on when current message
	is deleted; signal the main window when message status
	changes;
        * (bndx_find_row_func): don't select deleted messages;
	* (bndx_selection_changed_func): when the selection changes,
	keep the current message if it's still selected.
	* src/save-restore.c (config_global_load): Hide deleted messages
	by default.
	* src/pref-manager.c (update_address_books): Don't select an
	invalid GtkTreeIter, when mail server list is empty.

2003-01-09  Pawel Salek  <pawsa@theochem.kth.se>

	* src/Makefile.am: remove removed balsa-index-threading.h
	* libbalsa/address-entry.[hc]: handle UTF-8 characters in
	address_entry better (bug 102958).

2003-01-08  Emmanuel <e.allaud@wanadoo.fr>

	* libbalsa/mailbox-filter.c: correct errors.
	* libbalsa/mailbox_local.c: run_filters_on_reception().
	* src/filter-run-dialog.c: set dialog's default size.
	* src/save-restore.c: make the debugging message null-terminated.
	* src/sendmsg-window.c: gtk2-ify attachment dialog (PS).

2002-01-07  Naba Kumar  <naba@gnome.org>

	* configure.in: Added hi (hindi) in ALL_LINGUAS

2003-01-06 PeterB

        * src/main-window.c: Move message_print_cb from src/print.c.
        * src/print.[hc]: Move message_print_cb to src/main-window.c;
        Make print dialog non-modal and one-per-message;
        Get page margins from GnomePrintConfig.
        * src/sendmsg-window.c (print_message_cb): LibBalsaMessage no
        longer subclasses GtkObject. 

2003-01-05 PeterB

	* libbalsa/body.c (libbalsa_message_body_save_temporary,
	libbalsa_message_body_save), libbalsa/body.h, libmutt/mutt.h
	(STATE structure), src/balsa-message.c (save_dialog_ok):
        Use (const gchar *) type for file name and/or prefix.

2003-01-05  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox.[hc]: initial attempt to make mailboxes serve
	different views (future application: server side sorting/threading).
	* src/balsa-app.[hc], main-window.c: use new sort constants.
	* src/balsa-index-threading.c: ditto.
	* src/save-restore.[hc]: same+view saving code.
	* src/mailbox-node.[hc]: move view data from MailboxNode to Mailbox.
	* src/balsa-index.[hc]: use new sorting.
	* src/{mailbox,folder}-conf.c: edit identity assigned to mailbox.

2003-01-05  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in, NEWS: release 2.0.5
	
2003-01-04  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/misc.[hc]: add libbalsa_{expand,contract}_path wrappers.
	* src/sendmsg-window.c: add Czech language and ~ sig path support
	(#102472, #102470).
	* src/balsa-app.[hc]: change default action for D&D (#102140).

2003-01-03 PeterB

	* libbalsa/identity.c: Avoid potential race when destroying `Select
	Identity' dialog; use g_signal_connect_swapped to trim down code.

2003-01-03 20:09  PeterB

	* libbalsa/identity.c (libbalsa_identity_select_dialog,
        * sd_response_cb): Allow one `Select Identity' dialog per
	compose window, instead of one overall.

2003-01-03  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox_imap.c: fix use of cached messages.
	* libbalsa/message.c: actually use cached messages.

2003-01-02  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/body.[hc]: implement libbalsa_message_body_get_by_id()
	* libbalsa/message.[hc]: implement libbalsa_message_get_part_by_id().
	* src/balsa-message.c: add "request_url" signal handler (#52168).

2002-12-31  Emmanuel <e.allaud@wanadoo.fr>

	* libbalsa/mailbox.c: update mailbox signal scheme (merge HEAD).
	* libbalsa/message.[ch]: remove all messages signals, they were
	redundant.
	* libbalsa/filter.c, libbalsa/send.c: use new funcs.
	* src/balsa-{index,mblist,message}.c : ditto.
	* src/{sendmsg,main}-window.c,src/print.c: the same.

2002-12-30 PeterB

	* libbalsa/identity.c (general rewrite),
        * libbalsa/identity.h,
	* src/main-window.c (ident_manage_dialog_cb),
        * src/sendmsg-window.c (change_identity_dialog_cb,
                                update_msg_identity):
          Make identity dialogs non-modal.

2002-12-30  Pawel Salek  <pawsa@theochem.kth.se>

	* src/sendmsg-window.c: include correctly non-UTF-8 files.
	* balsa.spec.in: fix #102150.
	
2002-12-28  Pawel Salek  <pawsa@theochem.kth.se>

	* src/filter-run-dialog.c, src/save-restore.c:
	* libbalsa/filter.c: fix spelling (#102092).
	* src/sendmsg-window.c: do not allow to send stuff with wrong charset.
	* libbalsa/send.c: Activate "Hide" button.

2002-12-27 14:18  PeterB

	* libbalsa/filter-funcs.c (compare_filters): Fix a memory leak.

2002-12-27  Emmanuel <e.allaud@wanadoo.fr>

	* libbalsa/send.c: remove redundant unlocks.
	* src/balsa-mblist.c: display proper message count.

2002-12-27  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/address.c: wrong location of a bracket ->infinite loop.
	* src/mailbox-conf.c: fix #101993.
	* src/filter-edit-callbacks.c: do not destroy destroyed dialogs.
	* src/filter-{edit,run}-dialog.c: more shortcuts.
	* src/main-window.c: add missing shortcut.

2002-12-26  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/address.c: fix an address parsing bug introduced yesterday.
	* libbalsa/filter.c: port incremental imap queries from HEAD (Emmanuel)
	* libinit_balsa/balsa-druid-page-{directory,user}.c:
	* libinit_balsa/helper.c: add missing shortcuts.
	* libbalsa/identity.c, src/address-book-config.c: add shortcuts.
	* src/ab-window.c: fix typo (#102013).
	
2002-12-25  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in: find out glib-genmarshal location (Emmanuel).
	* libbalsa/Makefile.am: collect all marshallers (Emmanuel).
	* libbalsa/address-book-extern.[hc]: return error codes on IO errors.
	* libbalsa/address-book-{ldap,ldif,vcard}.[hc]: ditto.
	* libbalsa/address-book.[hc]: ditto.
	* libbalsa/address.[ch]: parse email addresses on our own (bit rough).

	* libbalsa/libbalsa.c: add .addressbook.ldif to the list of
	automatically recognized address book names.
	* libbalsa/mailbox.c: use new marshallers.
	* libbalsa/message.c: move here libmutt-specific address conversion.
	* libbalsa/misc.[hc]: remove hand-coded marshallers.
	* libbalsa/server.c: use generated marshallers.
	* src/ab-main.c: add menu.
	* src/ab-window.c: process IO errors here.

2002-12-24  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in, INSTALL, README, NEWS: release 2.0.4
	* balsa.spec.in: mandrake-specific build requirements.
	
2002-12-23  Pawel Salek  <pawsa@theochem.kth.se>

	* balsa.spec.in: update.
	* src/address-book-config.c: compile with LDAP enabled.

2002-12-23  Artis Trops  <hornet@navigator.lv>

	* configure.in: Added Latvian (lv) to ALL_LINGUAS.

2002-12-23 00:28  PeterB

	* src/balsa-message.c (balsa_message_set): Implement
	bm_content_has_focus and bm_focus_on_first_child, and use them
	to manage keyboard focus.
	* src/balsa-index.c (balsa_index_select_next,
	balsa_index_select_previous, balsa_index_select_next_unread,
	balsa_index_select_next_flagged, balsa_index_find): Implement
	bndx_find_row_and_select and use it to simplify the message
	selection methods, now that GtkTreeView fully supports scrolling
	with use_align = FALSE.
	* src/balsa-index.c, src/balsa-index.h (bndx_find_row,
	balsa_index_find): Declare filter ops using FilterOpType enum.

2002-12-21  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/mailbox_local.c: fix the M_REOPENED fix, 
	it broke maildir for Peter

2002-12-21 PeterB

	* src/balsa-app.c: Initialize balsa_app.toolbar_wrap_button_text to
	TRUE.
	* src/mailbox-node.c (imap_dir_cb_real, add_imap_entry,
	imap_scan_destroy_tree): Fix IMAP folder scanning with
        scan_depth > 1.

2002-12-21  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in: make balsa compile with aspell>=0.50
	(Artur Flinta <aflinta@at.kernel.pl>).

2002-12-20 09:46  PeterB

	* doc/C/balsa.xml, src/toolbar-prefs.c: Add help text for the
	Settings => Toolbars... dialog.
	* libbalsa/misc.c (libbalsa_make_string_from_list_p,
        * libbalsa_readfile_nostat, unwrap_rfc2646, dowrap_rfc2646,
        * libbalsa_wrap_rfc2646): Streamline use of GString.

2002-12-19  Pawel Salek  <pawsa@theochem.kth.se>

	* configure.in, src/print.c: make balsa compile with libgnomeprint-2.2
	(Artur Flinta <aflinta@at.kernel.pl>).

2002-12-19 12:46  PeterB

	* src/: Makefile.am, balsa-message.h, sendmsg-window.c (file_menu):
        Final (?) deprecation cleanup; add *_DISABLE_DEPRECATED DEFS
        in Makefile.am.
	* src/: main-window.c (help_menu),
        pref-manager.c (balsa_help_pbox_display): Change help file from
	"balsa-manual" to "balsa".
	* doc/C/balsa.xml: file balsa.xml was initially added on branch
	BALSA_2.
	* doc/C/balsa-C.omf: file balsa-C.omf was initially added on branch
	BALSA_2.
	* doc/C/: Makefile.am, balsa-C.omf, balsa-manual-C.omf,
	balsa-manual.xml, balsa.xml: Replace "balsa-manual" with "balsa"
	everywhere.

2002-12-18 09:32  PeterB

	* src/balsa-message.c (store_button_coords, check_call_url,
	part_info_init_mimetext): Fix #101292: g_signal_connect_after
	doesn't seem to work for "button_press_event" on a GtkTextView; use
	a better mask for stored_mask.

2002-12-15 22:05  PeterB

	* src/balsa-mblist.c: (balsa_mblist_mru_option_menu) *Really*
	initialize the option menu (fix bug from 2002-12-13 change).

2002-12-15  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/mailbox_local.c (libbalsa_mailbox_local_check): 
	handle M_REOPENED

2002-12-15 11:59  PeterB

	* src/sendmsg-window.c: (sendmsg_window_new, create_info_pane)
	Implement and use sendmsg_window_set_title.

2002-12-13 17:24  PeterB

	* src/balsa-mblist.c: (balsa_mblist_mru_option_menu) Correctly
	initialize the option menu; use a GDestroyNotify to destroy data,
	instead of the widget's "destroy" signal.  (bmbl_mru_menu) Use a
	GClosureNotify to destroy data, instead of the widget's "destroy"
	signal.

2002-12-13 13:36  PeterB

	* src/main-window.c: (balsa_window_real_close_mbnode) Clear the
	window's BALSA_INDEX_GRAB_FOCUS data, so we can never try to grab
	the focus to a nonexistent BalsaIndex.

2002-12-13 09:40  PeterB

	* src/balsa-mblist.c: (balsa_mblist_scan_mailbox_node) Remember
	state of mbnode->mailbox->has_unread_messages instead of checking
	all mailboxes; replace a GList with a GSList; add braces to fix an
	indent problem.

2002-12-12  Pawel Salek  <pawsa@theochem.kth.se>

	* src/sendmsg-window.c: switch signatures properly even if one of
	them is empty.
	* libbalsa/source-viewer.c: position cursor at the top.
	* libbalsa/mailbox_{local,imap,pop3}.c:
	* src/main-window.c: quick fix for double-lock problems. the true
	solution is to remove gdk_thread locks from libbalsa. (Emmanuel)

2002-12-10 20:57  PeterB

	* src/toolbar-prefs.c: refresh GtkTreeView list of current buttons
	when restoring standard layout.

2002-12-08  Pawel Salek  <pawsa@theochem.kth.se>

	* src/filter-run.h, src/filter-run-dialog.c: GNOME2-ify
	dialog. Keep properly open count.
	* src/main-window.c: remove next/prev from default set of tools.

2002-12-06  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/Makefile.am: remove threads.h
	* libbalsa/{filter,message,send}.c:
	* libbalsa/mailbox{,_imap,_local,_pop3}.c: remove threads.h
	* libbalsa/libbalsa_private.h: add extern mailbox_lock.
	* libbalsa/mailbox.h: add notification types.
	* libbalsa/send.h: add send progress procedures.
	* src/{main-window,save-restore}.c: change notification constants'
	names.
	* src/threads.h: remove libbalsa specific code.
	* src/toolbar-{factory,prefs}.c: remove threads.h
	
2002-12-04 PeterB

	* src/: balsa-app.h, main-window.c, main-window.h,
	message-window.c, message-window.h, save-restore.c,
	sendmsg-window.c, sendmsg-window.h, toolbar-factory.c,
	toolbar-factory.h, toolbar-prefs.c: Rewrite and deprecation cleanup
	of toolbar code.

2002-12-02  Pawel Salek  <pawsa@theochem.kth.se>

	* src/balsa-app.h: simplify QuoteRegex so even simple regex libs
	can parse it (spell check failed miserably on this).

2002-11-30  Pawel Salek <pawsa@theochem.kth.se>

	Start working on external address book editor + code cleanup.
	* libbalsa/address-book.c: reduce number of dependencies.
	* libbalsa/filter.[hc]: remove balsa_app dependencies.
	* libbalsa/libbalsa.c: mailbox_lock is a LibBalsaMailbox thing.
	* libbalsa/mailbox.[ch]: add "progress-notify" signal.
	* libbalsa/mailbox_pop3.[hc]: add "config-changed" signal.
	* libbalsa/misc.[hc]: add marshaller used by progress-notify.
	* libbalsa/pop3.[ch]: adapt to "progress-notify" signal.
	* src/Makefile.am: add ab-main.c
	* src/{sendmsg,main}-window.c: use new address book preview code.
	* src/main.c: initialize filters code.
	* src/save-restore.c: setup pop3 callbacks.
	* src/toolbar-prefs.c: remove redundant #include.
	
2002-11-21  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/libbalsa.c: Initialize MH* libmutt variables (#99067).
	* src/spell-check.c: UTF-8 conversion for pspell (#98335, Toralf Lund).

2002-11-05  Pawel Salek <pawsa@theochem.kth.se>

	* Makefile.am: remove intl from SUBDIRS.
	* autogen.sh: run glib-gettextize "manually".
	* balsa.spec.in: change help file location.
	* configure.in: AM_GNU_GETTEXT -> AM_GLIB_GNU_GETTEXT and cleanup.

2002-11-05  Peter Bloomfield <PeterB@cvs.gnome.org>

        * libbalsa/files.c, src/sendmsg-window.c: move tests for icon
          files to libbalsa.
        * src/balsa-app.c (balsa_app_destroy): fix #96795.

2002-11-02  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/main-window.c: use (locked) balsa_app.mailbox_nodes for
	message counting, instead of (unlocked)
	balsa_app.mblist_tree_store; use a weak_pointer instead of global
	new_mail_dialog_visible; replace deprecated items.
	* src/sendmsg-window.c: replace deprecated items.
	* src/spell-check.[ch]: replace deprecated items; move structure 
	declarations from spell-check.h to spell-check.c.
	* src/message-window.c, print.c, quote-color.c, save-restore.c:
	* src/store-address.c, toolbar-factory.c: replace deprecated items.
	* src/balsa-index.c: keep keyboard focus in message body.
	* src/balsa-message.[ch]: remove balsa_message_clear (unnecessary).
	* src/main-window.[ch]: grab the focus to the message index only when 
	switching notebook pages; store idle-handler ids as GObject data.
	* src/main.c: move initialization of balsa_app.visual and 
	balsa_app.colormap to balsa-app.c; set GNOME_PARAM_APP_PREFIX and 
	GNOME_PARAM_APP_DATADIR on startup.
	* src/balsa-app.c: initialize balsa_app.visual and balsa_app.colormap 
	here instead of in main.c.
	
2002-10-30  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/main.c: do not hang when called with -m (#97168).

2002-10-28  Pawel Salek <pawsa@theochem.kth.se>

	* NEWS, configure.in: release balsa-2.0.3

2002-10-28  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/filter-edit-callbacks.c: explain Filter date format.
	* src/mailbox-node.c: use user name in imap URL.

	* src/balsa-app.[ch], src/main-window.c, src/pref-manager.c:
	* src/save-restore.c, src/sendmsg-window.c:
	* src/toolbar-factory.c: Remove balsa_app.toolbar_style.
	* src/pref-manager.c: Replace deprecated items; implement 
	HIG-recommended style.
	
2002-10-27  Carlos Morgado  <chbm@chbm.nu>

	* src/sendmsg-window.c: added Hebrew and UTF-8 
	to language list

2002-10-27  Carlos Morgado  <chbm@chbm.nu>
	
	* libbalsa/filter.c (match_condition): fix no-threads build

2002-10-23  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.c: clear preview after deleting last message.
	* src/address-book-config.c: do not use same strings in different
	contexts (#96548).
	* libbalsa/address-book-ldap.c: do not crash on severed LDAP
	connections (PS).
	* src/folder-conf.c: do not crash on subfolder creation (#96720, EA).

2002-10-20  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.[hc]: streamline message deletion and removal.

2002-10-20  Emmanuel <e.allaud@wanadoo.fr>

	* libbalsa/filter-file.c: date config file format: %Y-%m-%d 
	* libbalsa/filter.[hc]: fix the locking issues with body filtering;
	* libbalsa/mailbox.c, libbalsa/mailbox_pop3.c: use new filter 
	API (API change coming from previous fix).

2002-10-17  Pawel Salek <pawsa@theochem.kth.se>

	* configure.in: added he to the list of languages.

2002-10-15  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-app.c, src/main.c: remove deprecated items; move 
	g_object_unref(balsa_app.colormap) from main() to balsa_app_destroy().
	
2002-10-12  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/misc.[ch]: implement libbalsa_utf8_sanitize.
	* src/balsa-index.c, src/balsa-message.c: use it.
	* libbalsa/source-viewer.c: use g_strescape to ascii-ize text, even if 
	it does use octal escapes!

2002-10-09  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-app.[ch]: define default print fonts.
	* src/save-restore.c: save and restore fonts.
	* src/print.c: print font selection.
	* src/main-window.c: shortcuts in search dialog (PS).

2002-09-29  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-mblist.c: fix edition of unselectable folders.
	* src/{mailbox,folder}-conf.c: add new shortcuts and unify
	existing ones (PS).
	
2002-09-27  Pawel Salek <pawsa@theochem.kth.se>

	* src/main-window.c: remove deprecated items (PB). Apply filters (EA).

2002-09-26  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-message.c: keyboard manipulation of attachments.

2002-09-25  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.c: show popup menu with Shift-F10
	* src/balsa-message.c, src/sendmsg-window.c: ditto. (+shortcuts by PS)

2002-09-24  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/address-book-config.c: check external program load and save
	paths; simplify code.
	* src/balsa-index.c: fix Ctrl+N and Ctrl+G; cut down on explicit
	scrolling.
	* src/folder-conf.c, src/mailbox-conf.c: BalsaMailboxNode is a GObject.
	
2002-09-24  Pawel Salek <pawsa@theochem.kth.se>

	* src/address-book.c: declare columns correctly. Unref addresses (PB).
	* src/balsa-app.[hc]: create balsa_app_destroy().
	* src/main.c: clean up exit code.
	
2002-09-23  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/address-book-config.[ch]: don't use gtk_dialog_run with a
	GnomeFileEntry in the dialog. 
	* src/pref-manager.c: new balsa_address_book_config_new api.
	* libbalsa/send.c: do not send deleted messages in outbox (#93666).
	
2002-09-21  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-app.c (ask_password_mt): upport deadlock
	fix from HEAD

2002-09-21  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/libbalsa.c: add utf-8 as fallback on SendCharset
	* src/save-restore.c: fix reassigning sentbox
	* libbalsa/mailbox_imap.c: add user to imap url

2002-09-20  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/mailbox-node.[ch], src/balsa-app.c,src/main.c: 
	BalsaMailboxNode subclasses GObject.
	* src/balsa-index.[ch]: give up on scrolling with use_align = 
	FALSE; ref/unref the mailbox_node.

	* src/mailbox-node.c: initial sort by date.
	* src/main-window.c: use balsa_window_idle_replace to clear the 
	preview; remove some dynamic casts.

	* src/balsa-icons.c: replace deprecated items.
	* src/balsa-mblist.c: avoid passing NULL strings to 
	g_ascii_strcasecmp.
	* src/folder-conf.c, src/mailbox-conf.c: replace deprecated 
	items; use GtkMessageDialog; handle dialog responses.
	* src/information-dialog.c: port the list from GtkCList to 
	GtkTreeView; replace other deprecated items.

2002-09-18  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/pop3.c: msg count instead of byte count (HEAD:20020623)
	* libbalsa/send.c: gdk_threads lock operations that can trigger GDK.
	* Makefile.am: place balsa icon properly.
	* balsa.desktop: define category.
	* balsa.spec.in: adapt to a proper location.
	* doc/xmldocs.make: change doc location to the standard one.
	* doc/C/balsa-manual-C.omf: define relation tag.
	* libbalsa/mailbox.c, src/mailbox-conf.c: remove debug output.
	* libbalsa/send.c, src/main-window.c: define proper shortcuts.

2002-09-17  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-mblist.c: port #91445 (edit->filter crash) from
	HEAD

	* src/save-restore.c: fix CRITICAL (PB) 

2002-09-17  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.[ch]: allow keyboard access and multiple 
	selection; move preview management to main-window.c; improve 
	scrolling.	
	* src/balsa-message.c: don't grab focus to the message.
	* src/main-window.[ch]: idle handler for setting the preview 
	message.

2002-09-16  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/mailbox_imap.c (get_cache_name):  add username to 
	cache dirname (#92442)

2002-09-15  Pawel Salek <pawsa@theochem.kth.se>

	* src/balsa-message.c: show reply-to header if requested (EA).
	* NEWS,configure.in: release 2.0.2

2002-09-12  Pawel Salek <pawsa@theochem.kth.se>

	* src/main-window.c, src/balsa-index.[hc]: clean up index switching
	after recent changes (PB).
	* libbalsa/send.c: compile without libesmtp (EA).

2002-09-11  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.[hc]: handle idle handlers in a safer way.

2002-09-10  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/pop3.c: gdk_thread_ locks were redundant there.

2002-09-10  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.[hc]: modify bndx_find_row to find next in thread,
	excluding messages to be removed; fix bndx_messages_remove to use
	bndx_find_row, and simplify it. postpone signalling main-window to
	an idle handler, to avoid mailbox deadlock; add previous_message
	and next_message to BalsaIndex, to inform main-window.
	* src/main-window.c: set sensitivity of next and previous message
	buttons.
	
2002-09-09  Carlos Morgado  <chbm@chbm.nu>

	* src/balsa-index.c: 2nd message is not previous from
	1st (PB)

2002-09-09  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/mailbox.[ch]: remove misguided "messages-delete-all" signal.
	* src/balsa-index.[ch]: change signal handlers for mailbox
	signals, and signalling to main-window; make balsa_index_transfer
	a BalsaIndex method; remove sync-backend as an exported method
	(and a left-over, dead,balsa_index_select_row).
	* src/balsa-mblist.c,src/message-window.c : use new api for
	balsa_index_transfer.
	* src/main-window.c: use simplified signals from BalsaIndex;
	manage sensitivity of previous, next, and next unread buttons; use
	new api for balsa_index_transfer.
	* src/sendmsg-window.c: remove calls to balsa_index_sync_backend.

2002-09-09  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/address-book-ldap.c: fix class struct size declaration.
	* libbalsa/libbalsa.c: ask_cert() can be called now from all threads.
	* src/balsa-mblist.c: remove dependence on threads.
	* src/toolbar-{prefs,factory}.c: ditto.
	* src/mailbox-node.c: disable scanning in a thread until a
	reliable scheme is developed.
	* src/main.c: remove unused, thread-related variables.
	
2002-09-08  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/filter-edit-{callbacks, dialog}.c, src/filter-edit.h, 
	* src/filter-{run,export}-dialog.c, src/filter-run.h: 
	remove/replace deprecated items; rename build_option_menu as
	fe_build_option_menu, and declare it in src/filter-edit.h instead
	of locally.


2002-09-07  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/filter-funcs.[ch]: add a utility and a helper for
	making GtkTreeView filter lists.
	* src/address-book.c, src/balsa-index.c: tighter GtkTreeView code.
	* src/filter-edit-{dialog,callbacks}.c, src/filter-edit.h,
	* src/filter-export-{dialog,callbacks}.c,
	* src/filter-run-{dialog,callbacks}.c, src/filter-run.h: replace
	GtkClist with GtkTreeView and friends; add some more sensitivity
	management.
	* src/information-dialog.c: show actually the dialog.
	* libbalsa/address-book-ldap.c: remove deprecated functions (PS).
	* libbalsa/mailbox_pop3.c: fix build with threads disabled (PS).
	* libbalsa/send.c: same (Emmanuel).
	* src/address-book-config.c: fix LDAP dialog creation + GTK_->G_ (PS).
	* src/information-dialog.c: show the information dialog.

2002-09-02  Emmanuel <e.allaud@wanadoo.fr>

	* libbalsa/address-book-{ldif,vcard}.c, address-entry.c, address.c:
	* libbalsa/mailbox.c,mailbox_imap.c, message.c:
	* src/balsa-index-threading.c,balsa-index.c, balsa-mblist.c:
	* src/print.c, save-restore.c, sendmsg-window.c: 
	g_list_append() may be expensive, _prepend() is safer.

2002-08-30  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/message.[ch]: libbalsa_message_charset returns a newly
	allocated canonical charset instead of a const pointer to the
	original charset.
	* src/print.c, src/sendmsg-window.c: g_free the string returned by 
	libbalsa_message_charset. Use single callback for language menus.
	* src/store-address.c: don't mangle utf-8 when truncating.

2002-08-29  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/sendmsg-window.c: libmutt does iconv, not we.
	* src/main-window.c: reduce number of msg threading callbacks.

2002-08-28  Pawel Salek <pawsa@theochem.kth.se>

	make doc register with scrollkeeper properly.
	* Makefile.am: help renamed to doc. gnome/apps/Internet->applications
	* balsa.spec.in: test on native GNOME2 system (null).
	* configure.in: generate doc/Makefile.
	* doc/*: collect pieces from old doc and adapt them to recent
	scrollkeeper changes.

2002-08-27  Peter Bloomfield + Emmanuel

	* libbalsa/filter-file.c: mem leak + redundant code removal + mem
	leak.
	* libbalsa/filter-funcs.[hc]: old code did g_strdup on a possibly
	NULL string, avoid that + small speedup.
	* libbalsa/filter-private.h: add user header condition type.
	* libbalsa/filter.[ch]: handle search on user header.
	* libbalsa/mailbox_pop3.c: handle password, don't leave tmp files
	behind.
	* src/balsa-app.c: fix node_lock()'ing.
	* src/filter-edit-{dialog,callbacks}.c: edit user header
	conditions.
	* src/filter-edit.h: remove redundant #include.
	* src/filter-export-{dialog,callbacks}.c: complete port to
	GtkDialog.
	* src/filter-export.h: ditto.

	* src/filter-run-{dialog,callbacks}.c: ditto. some new icons.
	name should have been replaced by url.
	* src/filter-run.h: associated changes in function prototypes.
	* src/mailbox-node.c: leave threads on scanning local mailboxes as
	well.
	
2002-08-27  Pawel Salek <pawsa@theochem.kth.se>

	* src/mailbox-node.c: gcc-3.2 compiles non-standard C but we 
	do not want such a code.

2002-08-26  Pawel Salek <pawsa@theochem.kth.se>

	serialize IMAP scanning and UI operations to avoid deep-nested
	locking.
	* libbalsa/folder-scanners.[hc]: reduce number of locks held
	simultanenously.
	* src/balsa-message.c: refresh status bar properly.
	* src/mailbox-node.c: serialize scanning and UI.
	* src/main.c: do not start scanning thread here, this is an
	implementation detail.
	
2002-08-26  Carlos Morgado  <chbm@chbm.nu>

	* src/mailbox-conf.c: fix add mailbox (PB) 

2002-08-25  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/misc.c: yet another shot at format=flowed.

2002-08-24  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/misc.c: removed cruft charset related functions
	* libbalsa/libbalsa.c: utf-8 -> UTF-8 

	* libbalsa/send.c: don't set Charset, keep utf-8 
	(uncomplete)

	* libbalsa/mailbox.c: 
	* libbalsa/mailbox_local.c: 
	fix --disable-threads build
	
2002-08-22  Carlos Morgado  <chbm@chbm.nu>

	* src/Makefile.am: 
	* configure.in: 
	fix build without esmtp

2002-08-22  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/misc.c: format=flowed mistreated signatures. Fix it.

2002-08-21  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.c: remove deprecated code; scroll to newly
	viewable children.
	* src/balsa-mblist.[ch]: remove deprecated code; port
	balsa_mblist_mru_option_menu_set/get from HEAD.
	* src/balsa-message.[ch]: remove deprecated code; simplify MDN
	dialog.
	* src/expand-alias.c: explicitly include <string.h>.
	* src/sendmsg-window.c: use balsa_mblist_mru_option_menu_get; get
	body and accumulate addresses from a mailto URL.

2002-08-20  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/filter-file.c: remove redundant #include.
	* libbalsa/libbalsa.c, libbalsa/misc.h: store ID of main thread.
	pass UI operations to the main thread explicitely.
	* libbalsa/mailbox.c: allow thread cancelation only in safe places.
	* libbalsa/folder-scanners.c: do not lock GDK after all.
	* src/balsa-app.c: pass UI operations to the main thread
	explicitely.
	* src/main-window.c: disable thread cancelation in arbitrary places.
	* src/main.c: cancel all threads on quit.

2002-08-18  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* autogen.sh: build both with vicious-scripts and on RH beta (PS).
	* libbalsa/body.c: convert all texts by html (PB+PS).
	* libbalsa/folder-scanners.c: allow for NULL path in
	libbalsa_scanner_imap_dir.
	* libbalsa/source-viewer.c: convert to us-ascii.
	* libinit_balsa/balsa-druid-page-user.c: remove another dead line
	and other silliness.
	* src/address-book-config.c, src/balsa-app.c,
	src/balsa-index-threading.c: remove deprecated code.
	* src/address-book.[ch]: port BalsaAddressBook lists to GtkTreeView.
	* src/sendmsg-window.c: append addresses from book to current
	 addresses.

2002-08-15 Steve Wall  <hitched97@myrealbox.com>

	* configure.in: libestmp -I flag.
	* libbalsa/filter-file.c: Solaris needs __EXTENSIONS__ for strptime
	* libinit_balsa/Makefile.am: fix maintainer-clean target (PS).
	* libinit_balsa/balsa-druid-page-user.c: remove dead code.
	
2002-08-14  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/server.[ch]: LibBalsaServer subclasses GObject.
	* libbalsa/mailbox_imap.c, src/mailbox-conf.c, src/mailbox-node.c, 
	src/save-restore.c: change LibBalsaServer references.
	* libbalsa/misc.[ch]: remove deprecated code; impl. 
	libbalsa_marshal_VOID__POINTER_INT.
	* libbalsa/send.c: remove deprecated code; save and restore Charset.
	* libbalsa/source-viewer.c: remove deprecated code; GtkTextView has no 
	interface to GtkEditable.
	* libinit_balsa/balsa-druid-page-directory.c, 
	libinit_balsa/balsa-druid-page-finish.c: remove deprecated code.
	* libinit_balsa/init_balsa.c: set wmclass for druid.
	* libbalsa/Makefile.am, libinit_balsa/Makefile.am: disable
	deprecated items.
	
2002-08-14  Pawel Salek <pawsa@theochem.kth.se>

	* Makefile.am, configure.in: build gettext related stuff smarter.
	* autogen.sh: pass --intl smarter.

2002-08-13  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/message.[ch]: LibBalsaMessage subclasses GObject;
	remove deprecated code.
	* libbalsa/mailbox.c,src/balsa-message.c, src/sendmsg-window.c:
	LibBalsaMessage change.
	* libbalsa/identity.h: fix a typo and reformat.
	* libbalsa/server.c, libbalsa/threads.h: include gtk/gtk.h (prolly
	only temporarily).
	* src/balsa-index.c: LibBalsaMessage change, and improve
	bndx_messages_remove (Manu).
	* src/balsa-mblist.c: gtk_tree_view_scroll_to_cell doesn't support
	nonalign = FALSE (yet).
	* src/message-window.c: LibBalsaMessage change, and destroy window
	if message is finalized.

2002-08-11  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/toolbar-factory.c, src/toolbar-prefs.c: use
	GTK_ICON_SIZE_LARGE_TOOLBAR
	* libbalsa/message.c: port threading fix from HEAD.
	
2002-08-06  Pawel Salek <pawsa@theochem.kth.se>

	Compile with updated auto*build tools.
	* autogen.sh: work also for distributions with "native" gnome2.
	* Makefile.am: remove acconfig.h regeneration.
	* configure.in: add missing templates to AC_DEFINE
	* help/xmldocs.make: auto* tools get confused over leading -. Remove.
	* libbalsa/filter-funcs.c: prevent gcc3 warnings.
	* src/address-book.c, src/balsa-app.c,src/filter-edit-callbacks.c:
	ditto.	
	* src/balsa-index.c: collapse fixes (Peter B).

2002-08-06  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.c: fix message selection change on msg delete.
	
2002-08-03  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.c: fix next unread for deep threads.
	fix message deletion.

2002-07-31  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/libbalsa.c: set the wmclass for the TLS certificate dialog.
	* libbalsa/mailbox.[ch], libbalsa/mailbox_imap.[ch], 
	  libbalsa/mailbox_local.[ch], libbalsa/mailbox_maildir.[ch], 
	  libbalsa/mailbox_mbox.[ch], libbalsa/mailbox_mh.[ch], 
	  libbalsa/mailbox_pop3.[ch], libbalsa/mailbox_remote.[ch]: port 
	  LibBalsaMailbox* from GtkObject to GObject.

	* libbalsa/misc.[ch]: impl. libbalsa_marshal_BOOLEAN__VOID.
	* libbalsa/send.c: cleanup of fcc code.

	* src/balsa-index.c: don't use an unimplemented GtkTreeView feature; 
	LibBalsaMailbox is now a GObject.

	* src/balsa-mblist.c, src/mailbox-conf.c, src/mailbox-node.c,
	src/main.c, src/save-restore.c, src/sendmsg-window.c:
	LibBalsaMailbox is now a GObject.

	* src/balsa-message.c: headers should not be editable.
	* src/main-window.c: gtk_notebook_remove_page() unrefs the page.

2002-07-28 Steve Wall <hitched97@myrealbox.com>

	* src/balsa-message.c: fix #85728.
	* src/main-window.c: fix menu item numbers.
	* src/message-window.c: add message print menu entry.

2002-07-24  Carlos Morgado  <chbm@chbm.nu>

	* src/store-address.c:
	* src/sendmsg-window.c: 
	* src/print.c: 
	* src/message-window.c: 
	* src/main.c: 
	* src/main-window.c: 
	* src/balsa-mblist.c: 
	* src/balsa-index.h: 
	* src/balsa-index.c: 
	* src/balsa-index-threading.c: 
	* src/balsa-icons.h: 
	* src/balsa-icons.c: 
	* src/balsa-app.h: 
	* src/balsa-app.c: 
	* libbalsa/mailbox.c: 
	* libbalsa/mailbox-filter.c: 
	* libbalsa/libbalsa.c: 
	* libbalsa/identity.c: 
	* libbalsa/folder-scanners.c: 
	* libbalsa/filter.c: 
	from Peter, unglify toolbar icons - they were being stretched,
	remove some more deprecated code - move from gtk_obj to gobj

	* libbalsa/libbalsa.c: set Charset to UTF-8. this should make
	libmutt convert to utf-8 and let pango sort it out
		
	
2002-07-21  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added Vietnamese (vi) to ALL_LINGUAS

2002-06-28  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/folder-scanners.c:
	* src/balsa-mblist.c: more conservative imap scanning locking scheme.

2002-06-26  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-mblist.c: use "pixbuf" property of
	GtkCellRendererPixbuf instead of "stock-id"
	* src/balsa-index.c,  src/balsa-mblist.[hc], src/main-window.c,
	src/message-window.c: update status bar properly.
	
2002-06-26  Pawel Salek <pawsa@theochem.kth.se>

	* src/Makefile.am, balsa.spec.in: remove last gdbm experiment traces.
	* src/address-book-config.[hc]: proper parenting.
	* src/address-book.c: handle close button (#86495). Show both arrows.
	* src/pref-manager.c: add some mnemonics.

2002-06-25  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/libbalsa.c: improve certificate window layout. Use GtkDialog
	* src/main-window.c: compile with --disable-threads
	* src/main.c: GDK-lock idle functions.
	* src/message-window.c: open messages in separate window in idle
	function, not during window creation - this could lock WM.

2002-06-23  Pawel Salek <pawsa@theochem.kth.se>

	* src/folder-conf.c: fix IMAP subfolder creation (broken on 06-09).
	* libbalsa/folder-scanners.c: do not lock GDK when scanning imap.
	* src/mailbox-node.c: Adjust accordingly.
	* libbalsa/libbalsa.[hc]: set certificates file. GUI for cert
	acceptance.
	* src/mailbox-conf.c: IMAP mailboxes do need name entry.
	
2002-06-23  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/address.c: don't mangle the heap when full_name is empty.
	* src/balsa-mblist.c: align columns in the mb list.

2002-06-17  Pawel Salek <pawsa@theochem.kth.se>

	* balsa.spec.in: package help files.
	* src/balsa-mblist.c: right-justify the mailbox counts (Peter).

2002-06-13  Peter Bloomfield  <PeterBloomfield@MindSpring.com>
	
	* src/balsa-index.c, src/balsa-mblist.[ch], src/message-window.[ch]:
	- consolidate the mru code into balsa-mblist.c;
	- define a new GtkOptionMenu mru widget. 
	* libbalsa/message.[ch], src/print.c, src/balsa-message.c:
	replace fcc_mailbox with fcc_url.
	* libbalsa/send.c: eliminate mqi->fcc.
	* src/balsa-app.[ch], src/save-restore.c: add and manage 
	balsa_app.fcc_url
	* src/sendmsg-window.[ch]: use the mru option menu for the fcc-box.
	* src/main.c: use UTF-8 always for translated text (Christophe
	Fergeau <christophe.fergeau@laposte.net>)

2002-06-10  Pawel Salek <pawsa@theochem.kth.se>

	* configure.in, NEWS: release balsa-2.0.1

2002-06-09  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/folder-scanners.c: debug printf->libbalsa_information.
	* libbalsa/mailbox.h: comment on field usage.
	* libbalsa/mailbox_imap.[ch]:lock mutt+rename/subscribe error checking.
	* src/balsa-app.h: senbox is special, too.
	* src/folder-conf.c: fix (hopefully for everybody) renaming.
	* src/mailbox-conf.c: cleanup renaming (many problems with local
	mailbox renaming fixed).
	* src/mailbox-node.[ch]: add balsa_mailbox_local_rescan_parent().
	a mailbox can have only one special function.
	* src/save-restore.c: changing special mailboxes adapted.

2002-06-07 Steve Wall <hitched97@myrealbox.com>

	* src/pref-manager.c: convert the three radio buttons to a single
	option menu. Break two extremely long strings into pieces.  String
	capitalization.

2002-06-05  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/filter.c:
	* src/balsa-{app.[hc],index.c,mblist.[hc]}:
	* src/mailbox-{conf,node}.c, main{,-window}.c
	* src/{message,sendmsg}-window.c: 
	* src/save-restore.c: (#84220) centralize Balsa's `find by ...'
	functions in src/balsa-app.c, and replace `find by name' with
	`find_by_url' where it was easy to do so. They also simplify the
	`most recently used' code by using the new search functions.
	* configure.in: with-esmtp accepts a parameter (#83592). (PS)

2002-06-03  Pawel Salek  <pawsa@theochem.kth.se>

	* libbalsa/mailbox_imap.c: access cache in binary mode to preserve
	message sizes.

2002-06-01  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-mblist.[ch]: replace GtkCTree with GtkTreeView and
	friends.
	* src/balsa-app.[ch]: new GtkTreeStore member of BalsaApplication.
	* src/balsa-icons.[ch]: move the mailbox icons from BalsaIconName
	to GtkIconFactory.

	* libbalsa/filter.c, src/balsa-index.c, src/folder-conf.c, 
	src/mailbox-conf.c, src/mailbox-node.c, src/main-window.c, src/main.c, 
	src/pref-manager.c, src/sendmsg-window.c: use new api for balsa-mblist.
	* libbalsa/identity.c: correct gtk_object ->g_object conversions.

2002-05-31  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/misc.c: 
	* libbalsa/Makefile.am: 
	* libbalsa/libbalsa_private.h: 
	* libbalsa/libbalsa.h: 
	* libbalsa/libbalsa.c: 
	* libbalsa/send.c:
	* libbalsa/send.h:
	* libbalsa/message.h: 
	* libbalsa/message.c: 
	* libbalsa/body.c: 
	* libbalsa/mailbox_imap.c: 
	More stuff from HEAD
	
2002-05-28  Carlos Morgado  <chbm@chbm.nu>

	* libbalsa/message.c: 
	* libbalsa/mailbox.h: 
	* libbalsa/mailbox.c: 
	* libbalsa/mailbox_imap.c: 
	* libbalsa/body.h: 
	* libbalsa/body.c: 
	* libbalsa/send.c: 
	* src/sendmsg-window.c: upport of all my stuff since start of
	BALSA_2 from HEAD 

2002-05-21  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/abook-completion.c:
	* libbalsa/address-book-{ldap,ldif,vcard}.c:
	* libbalsa/address-{book,entry}.[ch]:
	* libbalsa/address.[ch], libbalsa/{mailbox,mailbox}.c
	* src/{address-book,expand-alias,pref-manager,sendmsg-window}.c:
	* src/store-address.c: remove deprecated code from LibBalsaAddress
	and LibBalsaAddressEntry, transform addresses to GObjects - and
	associated changes.

2002-05-20  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/abook-completion.c, libbalsa/address-book-extern.[ch]:
	* libbalsa/address-book-{ldap,ldif,vcard}.[ch]:
	* libbalsa/address-book.[ch]
	* libbalsa/misc.[ch], src/address-book-config.c, src/expand-alias.c:
	* src/pref-manager.c: remove deprecated code, transform address
	books to GObjects.

2002-05-19  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/mailbox_imap.c: get rid of gdbm message cache - too
	resource-hungry. One could disable mutt's cache now.

2002-05-19  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/identity.c: grab focus, finalize the conversion to GObject.

2002-05-18  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/identity.c: make the dialogs more usable.

2002-05-18  Emmanuel <e.allaud@wanadoo.fr>

	* libbalsa/mailbox.[ch]: remove unused code.
	* src/balsa-index-threading.c: fix two issues introduced 2 days ago.
	* src/balsa-index.[ch]: make local functions static.
	* src/filter-edit-dialog.c: make dialog resizeable.
	
2002-05-16  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/mailbox.c: reimplement libbalsa_mailbox_get_type()
	without using mx_get_magic() that modified mailbox ctime.
	* libbalsa/mailbox{local,maildir,mbox,mh}.c: use it. (#81751)
	* src/balsa-index-threading.c: reduce threading scaling from N^2 to N.
	* src/balsa-index.c: specify sibling to save some time.
	* src/main-window.c: fix searching.
	
2002-05-16  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/identity.c: improve a11y of identities dialog.

2002-05-15  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/filter.[ch]: build_imap_query() added.
	* libbalsa/mailbox.[hc]: libbalsa_mailbox_real_get_matching_added().
	* libbalsa/mailbox_imap.c: optimized searching for imap.
	* libbalsa/misc.[hc]: libbalsa_marshal_POINTER__INT_POINTER() added.
	* src/balsa-index.c: restructure to use new searching code.

2002-05-14  Pawel Salek <pawsa@theochem.kth.se>

	* src/balsa-index-threading.c: cleanup by Emmanuel (extended).
	* src/mailbox-node.c: Solaris libc cannot print null string (#80149).

	* src/main-window.[ch]: do not switch threadin option more
	frequently than necessary (Emmanuel). Disable increment progress
	in MT mode - it only increased the load.

2002-05-12  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/identity.c: double-click selects default identity.
	* src/sendmsg-window.c: GtkDialog->GtkMessageDialog to save 5 lines.

2002-05-11  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-app.[hc]: make balsa_stock_button_with_label use
	mnemonics; remove balsa_stock_hbox_with_label.
	* src/balsa-index.c: use GtkImageMenuItem methods.

	* libbalsa/identity.[hc]: replace GtkCList with GtkTreeView/Model;
	use GtkDialog methods to manage dialog buttons; run the `manage
	identities' dialog and return the result instead of returning the
	dialog.

	* src/main-window.c: pick up the result from the `manage
	identities' dialog instead of running it.

2002-05-10  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/files.[hc] (libbalsa_icon_finder): return icon mime
	type if requested.
	* libbalsa/misc.c: gnome-vfs requires absolute paths and unusually
	interprets const return type (#81359).
	* src/{balsa-message.c, print.c}: use updated API.
	* src/sendmsg-window.[hc]: ditto.
	
2002-05-08  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/address.[hc]: libbalsa_address_new_*from_string()
	should take a const gchar * argument.
	* libbalsa/address-entry.[hc]: remove wrappers for
	GtkEntry/Editable methods.
	* src/sendmsg-window.c: use GtkEntry/Editable methods on
	LibBalsaAddressEntry widgets, instead of wrapped versions.
	* src/save-restore.c: rot13 ESMTP certificate passphrase before saving.

2002-05-07  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/message.c: libmutt fastcloses mailbox when it should not.
	(copy few thousands msgs between IMAP mboxes to trigger).
	* src/filter-edit-{callbacks,dialog}.c: make filters UI sensitive.
	* src/filter-edit.h: fe_enable_right_page() header added.

2002-05-07  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-index.c: implement an `Other...' dialog in place of the
	`Folder' submenu for selecting a move destination from a
	BalsaMBList.

2002-05-05  Emmanuel <e.allaud@wanadoo.fr>

	* src/address.c: fix #80502

2002-05-01  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-message.c: gnome_icon_list bug fixed; revert workaround.
	* src/sendmsg-window.c: change send shortcut.
	* libbalsa/files.c: look for document icons in proper place.

2002-04-30  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/send.c: be more verbose on most common SMTP
	configuration error (submission vs smtp).

2002-04-28  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/sendmsg-window.c: alternative mailbox referencing scheme.
	* src/balsa-message.c: work around gnome_icon_list(?) bug.

2002-04-27  Pawel Salek <pawsa@theochem.kth.se>

	* configure.in, {libbalsa,src}/Makefile.am, libbalsa/mailbox.[ch]:
	* libbalsa/mailbox_{local,pop3}.c, libbalsa/message.c: 
	* src/balsa-app.[hc], src/balsa-index.[hc], src/mailbox-node.c: 
	* src/main-window.c, src/save-restore.[hc], balsa.spec.in:
	filters/searching not optional any longer.
 	Emmanuel Allaud's patch (+minor modifications) to fix filtering on
 	receiving 	

	* src/main-window.c: do not use deprecated API (Peter Bloomfield).
	* src/balsa-app.c: do not crash when replying a message from a
	mailbox tree that was rescanned in meantime (Peter).
	
2002-04-24  Pawel Salek <pawsa@theochem.kth.se>

	* NEWS, configure.in: release balsa-2.0.0
	* libbalsa/libbalsa.[hc]: define global libbalsa_rot13().
	* libbalsa/server.c: use it.
	* src/save-restore.c: store passwords mangled in private section.

2002-04-24  Hasbullah Bin Pit <sebol@ikhlas.com>

	* configure.in: Added Malay (ms)to ALL_LINGUAS.
	* po/ms.po: Added Malay Translation.

2002-04-23  Pawel Salek <pawsa@theochem.kth.se>

	* Makefile.am, balsa.spec.in, {sounds,images}/Makefile.am:
	* configure.in, libbalsa/files.c, libinit_balsa/helper.c:
	* src/main-window.c, src/main.c:
	make it possible to build 2.0.0 rpm. (mostly icon locations).
	* src/sendmsg-window.c: libmutt does not conversion to UTF-8.
	* src/balsa-message.c: nail down wrong VIEWPORT conversions (Peter B).

2002-04-21 Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-app.c: reliable nested mailbox_nodes locking.
	* src/address-book-config.c, folder-conf.c, pref-manager.c:
	The help-display improved. 
	* src/sendmsg-window.c: fix some whining about floating
	references, and eliminates some memory-leaking deadwood.

2002-04-21  Pawel Salek <pawsa@theochem.kth.se>

	* Makefile.am: omf-install is a created dir, remove from SUBDIRS.
	* configure.in: do not create Makefile in omf-install.
	* libbalsa/identity.c: do not destroy on double click: response.
	* src/balsa-app.c: scan locking fixed.
	* src/balsa-message.c: fix "mixed parts" support (Peter Bloomfield).
	* src/mailbox-node.c, src/main.c: proper locking on scanning.
	Scan threading is not perfect (it locks too much) but further
	improvements require too many changes to be accepted for the
	moments.

2002-04-19  Pawel Salek <pawsa@theochem.kth.se>

	* src/mailbox-nodes.c: make mailbox node locks upgradeable ro->rw.

2002-04-18  Pawel Salek <pawsa@theochem.kth.se>

	Scan mailboxes in a thread.
	* configure.in: add gnome-vfs-module.
	* src/balsa-app.[hc]: add mailbox_nodes_lock functions.
	* src/balsa-index.c, balsa-mblist.c, filter-edit-callbacks.c, 
	folder-conf.c, mailbox-conf.c, mailbox-node.c, main-window.c,
	main.c, message-window.c, pref-manager.c, save-restore.c: use them.

2002-04-17 Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/spell-check.c: utilize GtkDialog more efficiently.
	* src/sendmsg-window.c: when format=flowed and user hits `Enter', 
        properly delete preceding spaces.

2002-04-16  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/libbalsa.c: ask libmutt for data in UTF-8.
	* libbalsa/misc.[hc]: provide libbalsa_set_send_charset().
	* src/balsa-app.c: hide password when typed in in the dialog.
	* src/balsa-message.c: conversion not longer needed.
	* src/sendmsg-window.c: do not always pop up spell-check window
	* src/spell-check.c:    (Peter Bloomfield).

2002-04-15  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/folder-scanners.c: ask for folder passwords.
	* libbalsa/mailbox_imap.c: follow the password convention.
	* libbalsa/server.h: empty ("") passwd is legal.
	* src/address-book.[hc]: next round of porting to GtkDialog.
	* src/balsa-app.c, main.c: port ask_passwd
	* src/balsa-message.c: GnomeDialog->GtkDialog.
	* src/folder-conf.c, information-dialog.c, mailbox-node.c:
	* src/main-window.c, sendmsg-window.c: same.

2002-04-15 Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/spell-check.[ch]: ignore numbers.
	* src/sendmsg-window.[ch]: make spell check widget a separate dialog.
	
2002-04-14  Pawel Salek <pawsa@theochem.kth.se>

	* configure.in: make libgtkhtml default again.
	* libbalsa/address-book-vcard.c: convert strings from locale to
	UTF-8. Forcing this is dumb (IMO).
	* libbalsa/address.h: Fix header.
	* libbalsa/identity.c: complete porting to GtkDialog.
	* libinit_balsa/balsa-druid-page-directory.c: do same.
	* libinit_balsa/{balsa-druid-page-user.c, balsa-initdruid.c}:
	* src/{address-book-config.c, balsa-app.[hc], folder-conf.c:
	* src/mailbox-conf.c: GnomeDialog->GtkDialog.
	* src/pref-manager.c: ref new address book.
	* src/print.c: remove unnecessary paper selection widget (Peter B.).
	* src/spell-check.c: compile the quote regex once per invocation;
	- highlight a bad word by selecting it; - use GtkTextIter to find
	words, instead of a regex (Peter B.).

	* src/main-window.c: disable menus on removing last message from index.
	* src/toolbar-factory.[ch]: releated cleanup.
	* libbalsa/mailbox.[hc]: per-mailbox identity by
	* src/sendmsg-window.c:  Brian Stafford <brian@stafford.uklinux.net>

2002-04-12  Pawel Salek <pawsa@theochem.kth.se>

	* src/print.c: make print work with new API (still some warnings
	displayed occassionally).
	* libbalsa/{send.c,identity.c}: use GtkDialog instead of
	GnomeDialog.
	* src/main-window.c: run identity dialog with gtk_dialog_run().
	
2002-04-11 Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/spell-check.[hc]: make spell checking work.

2002-04-11  Pawel Salek <pawsa@theochem.kth.se>

	* src/print.c: compile with new 2.0 API.

2002-04-10 Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-mblist.c: squash reason of a warning message.
	* src/balsa-message.c: mdn_dialog_delete should return a gboolean
	value.
	* src/filter-run-callbacks.c, src/filter-run.h:
	selected_list_select_row_event_cb should return a gboolean value.
	* src/main-window.c: make notebook tabs a more modest size.
	* src/print.c: gnome-print support uncoditionally compiled in.
	* src/sendmsg-window.c: extbody_dialog_delete should return a
	gboolean value. Fix GtkTextIter error when quoting by dragging,
	and simplify quoting messages.
	* src/toolbar-prefs.c: page_active_cb should return a gboolean value;
	use replace_nl_with_space() uniformly.
	
2002-04-07  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-message.c: GtkViewport is a thinner wrapper than a
	GtkScrolledWindow for the GtkTextView and HtmlView widgets.
	- GtkVbox is a thinner container for the message parts than a 
          GtkTable;
	- have emphasize_url() take care of both url text style and status
          bar text, and rename as pointer_over_url();
        - add 2-pel left and right margins to the GtkTextView widgets.


2002-04-04  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-message.c: improve resizing scheme + cleanup.
	
2002-04-04  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-message.c: resize GtkTextView widget after a timeout;
	use gdk_threads_[enter/leave] in timeout handlers.
	* src/save-restore.c: handle obsolete rgb: color specification.

2002-04-03  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-message.c: color quoted lines; handle urls in
	text/plain messages.
	* src/balsa-app.h: change specifications for default colors.
	* src/balsa-mblist.c: use Pango to set a bold font; clean up
	unread_mailbox_color code; balsa_widget_get_bold_font() is
	obsolete.
	* src/save-restore.c: change specifications for default colors.
	* src/sendmsg-window.c: allocate bad_address_color.

2002-03-27  Pawel Salek <pawsa@theochem.kth.se>

	* src/balsa-message.c:
	* src/print.c: use proper charset names instead of aliases (#76609).
	* src/sendmsg-window.c: ditto. Also, simplify entry creation (PB).

2002-03-26  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/sendmsg-window.c: font selection in compose window.
	* src/balsa-message.[hc]:
	- remove part_count member from BalsaMessage structure;
	- use gnome_icon_list_get_num_icons() instead to get number of icons;
	- set message font for header panel, and override only for subject 
	header;
	- delete obsolete code that uses charset to convert header text;
	- fix hide_all_parts() to remove only widgets that are being shown.
	
2002-03-24  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-message.c: fix remaining font issues.

2002-03-23  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/misc.[hc]: libbalsa_lookup_mime_type must allocate the
	space for its result.
	* libbalsa/files.c:
	* libbalsa/send.c: 
	* src/print.c: free the string returned by libbalsa_lookup_mime_type.
	* src/sendmsg-window.c: use the new GtkFileSelection api.
	* src/pref-manager.c: fix broken font change callback.

2002-03-21  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/server.c: make types in gtk_signal_new consistent with
	each other.
	* src/balsa-index.c: button_event_press_cb should return boolean.
	* src/balsa-mblist.c: don't try to change colors yet.
	* src/main-window.c: revert a lot of recent changes--not needed.
	* src/main.c: initialize threads and gtk.

2002-03-20  Pawel Salek <pawsa@theochem.kth.se>

	* configure.in, acconfig.h: isblank portability test (Steve Wall).
	LibESMTP location parameter fixed.
	* libbalsa/mailbox_imap.c: use GDBM only when available (Steve Wall).
	* libbalsa/body.c: lock properly.
	* libbalsa/misc.c: remove trash from the end of mail (unwrap)
	* src/sendmsg-window.[hc]: choose properly sending charset.

2002-03-19  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/mailbox.c: replace some more LIBBALSA_TYPE_MESSAGEs
	with GTK_TYPE_POINTERs in gtk_signal_new().
	* src/balsa-app.c: be more careful getting the index from a
	mailbox.
	* src/balsa-index.c: omit some more unused arguments.
	* src/balsa-message.c: check for pending relayout in
	balsa_gtk_html_size_request, and use a timer to wait for it to
	complete; - simplify the size_request calculation.
	* src/main-window.c: omit some more unused arguments; append a new
	page in the notebook earlier, to avoid a race condition.

2002-03-18  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/mailbox.c: LIBBALSA_TYPE_MESSAGE -> GTK_TYPE_POINTER
	* src/balsa-app.c: destroy mailbox_node instead of unref'ing it.
	* balsa-index.c: omit unused arg in balsa_index_signals[SELECT_MESSAGE]
	* src/main-window.c: adjust to the arg removal. 
	* balsa_window_select_message_cb(): pick up BalsaIndex *index from
	an argument instead of balsa_window_find_current_index(); change
	notebook tab icon from GTK_ICON_SIZE_BUTTON to GTK_ICON_SIZE_MENU.

2002-03-17  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-app.[hc]: add a convenience function
	balsa_stock_hbox_with_label(), and use it in
	balsa_stock_button_with_label().
	* src/balsa-message.c: leave a destroyed BalsaMessage in a sane
	state. Use new api for gtkhtml.
	* src/balsa-index.c: use balsa_stock_hbox_with_label().
	* src/toolbar-prefs.c: fix broken code for getting the pixmap and
	mask for a stock icon, adding a wrapper to cut down on the #if's.
	* libbalsa/identity.c: fix broken code for getting the pixmap and
	bitmap for a stock icon.
	* src/sendmsg-window.c: connect the "changed" signal to the
	correct object.
	
2002-03-14  Pawel Salek <pawsa@theochem.kth.se>

	* configure.in: gtkhtml support restored.
	* libbalsa/address-entry.c: focus handling (Peter Bloomfield).
	* src/balsa-message.[hc]: more proper message displaying (PS).
	* src/sendmsg-window.c: first step to pangoization.

	* Makefile.am, help/*: help ported by Jelmer to GNOME2.
	* libbalsa/message.c: g_strsplit() to one more field (Peter B).
	* src/pref-manager.c: use gnome_file_entry_set_directory_entry (PB).
	* sound/Makefile.am: DESTDIR is not needed there after all.
	
2002-02-13  Jelmer Vernooij <jelmer@nl.linux.org>

	* libbalsa/ (some): gnome-defs.h is deprecated in GNOME2 - remove refs.

2002-03-13  Pawel Salek <pawsa@theochem.kth.se>

	* src/balsa-message.c: show first messages.

2002-03-13  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/*,libinit_balsa/*, libbalsa/identity.c, libbalsa/misc.[hc]:
	make entire balsa compile within GNOME2.
	src/balsa-app.c, src/spell-check.c: hush critical errors.

2002-03-10  Pawel Salek <pawsa@theochem.kth.se>

	* libbalsa/libbalsa_private.h: do not include gnome.h here.
	* libbalsa/mailbox.c:
	* libbalsa/mailbox_imap.c: 
	* libbalsa/mailbox_local.c: 
	* libbalsa/mailbox_pop3.c: 
	* libbalsa/message.c: 
	* libbalsa/pop3.c: 
	* libbalsa/send.c: 
	* libbalsa/server.c: 
	* libbalsa/source-viewer.c: include only needed pieces of gnome here.
	* src/sendmsg-window.c: it is legal to have no signature.
	
2002-03-09  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* configure.in: gtkhtml was renamed to libgkthtml. Take into account.
	* src/address-book-config.c, address-book.c:
	* src/balsa-app.c,balsa-icons.c, filter-edit-dialog.c:
	* src/filter-run-dialog.c, pref-manager.c,store-address.c: reduce
	number of preprocessor conditionals.
	* src/toolbar-factory.c,toolbar-prefs.c: port to gnome2.
	
2002-03-09  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libinit_balsa/*: get rid of gob. Port to gnome2.
	* configure.in: remove test for gob.

2002-03-04  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-icons.[hc], src/filter-run-callbacks.c,
	src/filter-run-dialog.c, src/pixmaps/*.xpm: ported.

2002-03-03  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* configure.in: define BALSA_VERSION
	* src/address-book-config.c,
	src/address-book.c, src/balsa-app.c, src/balsa-index.c,
	src/balsa-index.h, src/filter-edit-callbacks.c,
	src/filter-edit-dialog.c, src/filter-export-callbacks.c,
	src/filter-export-dialog.c, src/filter-run-callbacks.c,
	src/filter-run-dialog.c, src/filter-run.h,
	src/information-dialog.c, src/mailbox-conf.c, src/mailbox-node.c,
	src/main-window.c, src/main.c, src/message-window.c,
	src/save-restore.c, src/store-address.c, src/toolbar-factory.h: 
	do the porting.

2002-03-01  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/folder-conf.c: ported.
	
2002-02-27  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/balsa-mblist.c: port.
	* src/balsa-index.c: remove redundant call to balsa_index_init().

2002-02-25  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* libbalsa/*: remove uncesessary #includes (PS)
	* src/*: Further work on porting to GNOME2.

2002-02-24  Peter Bloomfield  <PeterBloomfield@MindSpring.com>

	* src/Makefile.am, src/address-book-config.c,
	src/address-book.[hc], src/spell-check.[ch]: src directory Gnome2
	porting work	
	* libbalsa/send.c: extra signal callback type cast.

2002-02-22  Pawel Salek <pawsa@theochem.kth.se>

	* autogen.sh, configure.in: previouse updates were not universal.

	* libbalsa/address-book-extern.c, libbalsa/address-book-ldif.c,
	libbalsa/address-book.c, libbalsa/address-entry.c,
	libbalsa/address.c, libbalsa/files.c, libbalsa/filter-file.c,
	libbalsa/filter-funcs.c, libbalsa/filter.c,
	libbalsa/folder-scanners.c, libbalsa/identity.c,
	libbalsa/libbalsa.c, libbalsa/mailbox.c, libbalsa/mailbox_imap.c,
	libbalsa/mailbox_local.c, libbalsa/message.c, libbalsa/misc.[hc],
	libbalsa/pop3.c, libbalsa/send.c, libbalsa/server.c,
	libbalsa/source-viewer.c:
	Make libbalsa.a compile against GNOME2. The only major changes
	were related to MIME handling and GtkText (gnome-mime and GtkText
	are deprecated). Some extra cleanup (unused variables).

2002-02-20  Pawel Salek <pawsa@theochem.kth.se>

	Start port to GNOME2. Based on Jelmer Vernooij's work.
	* configure.in, Makefile.am, acconfig.h,
	libbalsa/Makefile.am: modify just to make it compile
	* libbalsa/address-book.c, libbalsa/misc.h: make first file compile.


2006-01-24 12:17  PeterB

	* libbalsa/mailbox.c: update view-filter before setting threading.
	* src/filter-run-callbacks.c: scroll to selected filter.

2006-01-23 19:02  PeterB

	* libbalsa/mailbox_mbox.c: check cache file more carefully; better
	buffering in readln.
	* src/sendmsg-window.c: initialize retval.

2006-01-22 20:49  PeterB

	* src/: sendmsg-window.c, sendmsg-window.h: simpler
	utf8-confirmation; delete draft message if it was auto-saved but
	not user-saved.

2006-01-22 PeterB, Albrecht Dreß <albrecht dot dress at arcor dot de>

	* src/sendmsg-window.c: dialogs suggested by Mişu Moldovan <dumol
	at gnome dot ro>.

2006-01-22 14:30  PeterB

	* libbalsa/mailbox_mbox.c: use our own rdline function.
	* libbalsa/mailbox_mbox.c: step to a From_ line before parsing.
	* libbalsa/mailbox.c: prepare parent messages for threading as well
	as siblings.

2006-01-20 11:15  PeterB

	* src/sendmsg-window.c: restore state only for continued messages.
	* src/: sendmsg-window.c, sendmsg-window.h: fix saving and
	restoring spell-checker state when postponing; build
	--without-gtkspell.

2006-01-19 23:27  PeterB

	* src/sendmsg-window.c: save format=flowed or fixed, and
	spell-check-language, when postponing a message.

2006-01-18 14:36  PeterB

	* libbalsa/: mailbox_local.c, mailbox_local.h, mailbox_maildir.c,
	mailbox_mbox.c, mailbox_mh.c: don't set first-unread to a deleted
	message; check recent messages for message/partial; load-message is
	a LibBalsaMailboxLocal method; prepare all recent messages for
	threading.
	* src/main.c: reset LibBalsaProgress when we're done with the
	progress bar.

2006-01-17 13:45  PeterB

	* src/balsa-index.c: scroll-on-open immediately, not in idle
	handler.

2006-01-16 18:09  PeterB

	* src/main.c: re-enable updating progress bar from a subthread,
	using gdk lock.
	* libbalsa/mailbox_local.c: downgrade information messages to
	debug.
	* libbalsa/libbalsa.h: fix mangled comment.
	* src/balsa-index.c: schedule only one idle callback when mailbox
	is changed.
	* libbalsa/libbalsa.h, src/main.c: use symbolic constants; disable
	updating progress bar from a subthread.

2006-01-15 Albrecht Dreß <albrecht dot dress at arcor dot de>

	* libbalsa/message.h, libbalsa/send.c, src/sendmsg-window.c: save
	and restore crypto and MDN settings when postponing and continuing.

2006-01-14 19:20  PeterB

	* src/: balsa-index.c, main-window.c: no need to prepare
	threading--mailbox code takes care of caching info.
	* libbalsa/mailbox.c: show progress when filtering-on-reception.
	* libbalsa/mailbox_local.c, src/main.c: use new LibBalsaProgress
	api.
	* libbalsa/mailbox.c: copy flags when copying message instead of
	getting message; show progress when reassembling message/partial;
	use new LibBalsaProgress api.
	* libbalsa/: libbalsa.c, libbalsa.h: simplify LibBalsaProgress and
	make it more opaque.

2006-01-13 22:15  PeterB

	* libbalsa/mailbox.c, libbalsa/mailbox_local.c, src/balsa-index.c,
	src/main-window.c, src/main.c: simplify progress bar updates; use
	it for filtering.
	* libbalsa/mailbox_mbox.c: save mailbox info with glib < 2.8;
	disable debug output.

2006-01-14  Chao-Hsiung Liao  <j_h_liau@yahoo.com.tw>

	* configure.in: Add "zh_HK" to ALL_LINGUAS.
	
2006-01-12 12:08  PeterB

	* libbalsa/mailbox.c: must use get-message to get the flags.

2006-01-11 15:45  PeterB

	* src/balsa-mime-widget-text.c: one more.
	* src/balsa-mime-widget-text.c: use glib's type conversion macros
	for gint <=> gpointer.
	* src/sendmsg-window.c: build with gcc < 4.1.
	* libbalsa/mailbox_mbox.c: better: use %zd format specifier.
	* libbalsa/mailbox_mbox.c: cast value to gint for g_print.
	* libbalsa/: mailbox.c, message.c: reset stream after loading
	envelope.
	* libbalsa/mailbox.c: reset stream before adding message.
	* src/: main-window.c, toolbar-factory.c: add optional toolbar
	button for expunge.
	* src/pref-manager.c, src/save-restore.c, libbalsa/smtp-server.c,
	libbalsa/smtp-server.h: implement and use
	libbalsa_smtp_server_add_to_list--deletes existing server if new
	name is a duplicate.
	* libbalsa/mailbox_mbox.c: don't include From_ line in message
	length.

2006-01-10 23:43  PeterB

	* libbalsa/message.c: set message->size from
	g_mime_stream_length().
	* src/main.c: use g_idle_add and data instead of g_io_add_watch and
	pipes.
	* src/main-window.c, src/main-window.h: set progress text in status
	bar; run main loop only if needed.
	* libbalsa/mailbox_mbox.c: save and restore message info.
	* src/balsa-index.c: prepare threading/sorting before setting
	non-flags-only filter.
	* libbalsa/mailbox_local.c: cache file is not created for empty
	mailbox.
	* libbalsa/mailbox.c: use progess bar when copying messages.
	* src/balsa-index.c, src/main-window.c, src/main-window.h,
	src/main.c, libbalsa/libbalsa.c, libbalsa/libbalsa.h: use progress
	bar to show fractional progress; implement wrappers for libbalsa;
	use it when preparing for threading/sorting.
	* libbalsa/: mailbox.c, mailbox_local.c, mailbox_maildir.c,
	mailbox_mbox.c, mailbox_mh.c: simplify local mailbox caching; use
	progress bar.
	* src/information-dialog.c: do not stack status-bar messages.
	* libbalsa/: mime-stream-shared.c, mime-stream-shared.h: shared
	lock for LibBalsaMimeStreamShared.

2006-01-10 Albrecht Dreß <albrecht dot dress at arcor dot de>

	* libbalsa/misc.c, libbalsa/misc.h, src/balsa-mime-widget-text.c,
	src/sendmsg-window.c, src/sendmsg-window.h: configure GtkSourceView
	with default=no; use it for hacker-highlighting and multi-level
	undo.

2006-01-09 10:49  PeterB

	* src/balsa-message.c: g_return_* argument must not have
	side-effects.

2006-01-06  Pawel Salek

	* configure.in, NEWS: release 2.3.9.

2006-01-06 08:48  PeterB

	* src/main-window.c: check that Balsa didn't quit.

2006-01-05 Albrecht Dreß <albrecht dot dress at arcor dot de>

	* configure.in: GnuPG encryption is stable.

2006-01-05 20:35  PeterB

	* libbalsa/mailbox.c: always set tree-changed if msgno is removed.
	* libbalsa/misc.c: check for anonymous tag.

2006-01-04 20:48  PeterB

	* libbalsa/address.c: don't use InternetAddress::name if it's
	non-NULL but empty.
	* libbalsa/: mailbox.c, mailbox.h, mailbox_imap.c, mailbox_local.c:
	new member LibBalsaMailbox::msg_tree_changed; use it to save tree
	only when needed; manage mailbox->view_filter in mailbox.c.

2006-01-03 22:27  PeterB

	* libbalsa/libbalsa.c: more careful mailbox lock.

2006-01-01 14:10  PeterB

	* src/: balsa-app.h, sendmsg-window.c: build without GTKSPELL.

2006-01-01  Carlos Morgado  <chbm gnome.org>

	* src/sendmsg-window.c, src/balsa-app.h:
	fix build without GTKSPELL
	(first commit!!)

2005-12-31 09:27  PeterB

	* libbalsa/mailbox_local.c: set first-unread when restoring the
	tree.
	* src/balsa-index.h: deadwood.

2005-12-31 08:01  Albrecht Dreß <albrecht dot dress at arcor dot de>

	* src/: sendmsg-window.c, sendmsg-window.h: keep spell-check
	menu-item consistent with toolbar button.

2005-12-30 12:15  PeterB

	* libbalsa/mailbox_local.c: downgrade warnings to messages and make
	them more people-friendly.

2005-12-29 20:16  PeterB

	* src/: balsa-app.c, balsa-app.h, save-restore.c, sendmsg-window.c:
	handle GtkSpell errors; reattach spell-checker when language is
	changed; spell-checker language persists until spell-checking is
	disabled.
	* libbalsa/mailbox_local.c: special-case flags-only view-filter;
	prepare threading for all messages in the mailbox.

2005-12-28 07:39  PeterB

	* libbalsa/imap-server.c: lock imap-servers before checking for
	non-NULL.

2005-12-28  Pawel Salek

	* libbalsa/imap-server.c: yet another shot at portable mutex
	locking.

2005-12-27 16:25  PeterB

	* libbalsa/imap-server.c: do not try to lock when no servers have
	been created.
	* libbalsa/mailbox_mbox.c: make sure message is cached at
	mailbox-local and mailbox levels.

2005-12-27  Pawel Salek

	* configure.in, NEWS: release 2.3.8.

2005-12-27 12:33  PeterB

	* libbalsa/: imap-server.c, server.c: build with gcc-4.1.
	* libbalsa/mailbox_local.c: check msgno before accessing array.

2005-12-26 23:22  PeterB

	* src/balsa-index.c: remove unnecessary gdk_threads_{leave,enter};
	undo SOS filter before closing, so we save the tree that we need
	when reopening.
	* libbalsa/mailbox_local.c: cache sender for filtering;
	save-tree-file with one record is OK.
	* libbalsa/mailbox_local.c: use g_file_set_contents when available.

2005-12-25 18:50  PeterB

	* libbalsa/mailbox.c: disable some time-consuming sanity checks.
	* libbalsa/mailbox_local.c: more robust, less time-consuming tree
	file checking.

2005-12-24 23:31  PeterB

	* src/: balsa-index.c, balsa-index.h: scroll in an idle handler;
	use prepare-theading.
	* libbalsa/: mailbox.c, mailbox.h, mailbox_imap.c, mailbox_local.c,
	mailbox_local.h, mailbox_maildir.c, mailbox_mbox.c, mailbox_mh.c:
	save and restore sorted and threaded view.

2005-12-23 22:02  PeterB

	* libbalsa/address-book.c, src/balsa-mime-widget-callbacks.c,
	src/print.c: harmonize strings.
	* src/balsa-message.c, libbalsa/identity.c, libbalsa/misc.c,
	libbalsa/send.c, src/sendmsg-window.c: fix strings (Mişu Moldovan)
	and comment them (Jean-Luc Coulon).

2005-12-19 07:22  PeterB

	* src/balsa-mime-widget.c: lock a GMimeStream.

2005-12-18  Pawel Salek

	* libbalsa/mailbox_imap.c(find_duplicates): do not send UID=0.
	* libalsa/mailbox.c: attempting to expunge read-only mboxes would
	be a waste of time.

2005-12-15  Pawel Salek

	* libbalsa/send.c: use proper time zone in Date: (bug 323871).
	* src/balsa-index.c: disconnect "selection-changed" handler
	explicitely - do not trash on mbox close with gtk2-2.8.9.

2005-12-13 08:03  PeterB

	* src/: sendmsg-window.c, sendmsg-window.h: fix bug 323871; clean
	up undo/redo.

2005-12-11 18:14  PeterB

	* src/mailbox-conf.c: use new api for
	libbalsa_mailbox_local_set_path.
	* libbalsa/: mailbox_maildir.c, mailbox_maildir.h, mailbox_mbox.c,
	mailbox_mbox.h, mailbox_mh.c, mailbox_mh.h: implement check-files
	and set-path methods; simplify new and get-message methods;
	fixes bug 323448.
	* libbalsa/: mailbox_local.c, mailbox_local.h: new class methods
	check-files and set-path; change api for
	libbalsa_Mailbox_local_set_path.
	* libbalsa/: mailbox_local.c, mailbox_mh.c, mailbox_mh.h,
	message.c: fix bug 323448.
	* src/: toolbar-factory.h, toolbar-prefs.h: remove some obsolete
	defines and replace some others with an enum.

2005-12-09  Jens Granseuer

	* src/sendmsg-window.c: compile with gcc-2.95 (bug 323617).
	* libbalsa/send.c: compile --without-smtp (bug 323618).
	* src/sendmsg-window.c: compile --without-gtkspell (PS).
	
2005-12-08 07:43  PeterB

	* src/: save-restore.c, sendmsg-window.c: remember spell-check
	state when using GtkSpell (Marcin Deranek, bug 323458).
	* src/pref-manager.c: no spell-check options when using GtkSpell.
	* src/: balsa-app.c, balsa-app.h: spell-check members are
	conditional on HAVE_GTKSPELL.

2005-12-07  Pawel Salek

	* libbalsa/identity.c: fix a warning with gcc-3.4.x
	* libbalsa/mailbox_imap.c: use proper arguments to the
	server-changed signal, fixing a possible crash on server settings'
	update.

2005-12-07 13:35  PeterB

	* src/filter-run-callbacks.c: fix bug 323442.

2005-12-04 Pawel Salek

	* NEWS: release 2.3.7.

2005-12-03 Pawel Salek

	* balsa.spec.in: require gmime-2.1.17.
	* libbalsa/{imap-,smtp-,}server.c: clean up saving the config,
	enable anonymous access.
	* libbalsa/server.h: add try_anonymous field and config-changed
	signal.
	* libbalsa/mailbox_imap.c: ditto.
	* libbalsa/imap/imap-handle.[hc]: respect name space.
	* src/balsa-app.c: respect "remember password" checkbox in the
	password dialog.
	* src/balsa-index.c: remove redundant scroll_to_cell() call.
	* src/{folder,mailbox}-conf.c: config anonymous access.
	* src/mailbox-node.c: listen to "config-changed" signal.
	* src/save-restore.c: the same.
	* doc/C/balsa.xml: document anonymous access.

2005-11-28 15:19  PeterB

	* src/balsa-message.c, src/sendmsg-window.c, libbalsa/filter.c,
	libbalsa/mailbox_local.c, libbalsa/message.c, libbalsa/message.h,
	libbalsa/send.c: implement and use accessors for user-headers.

2005-11-27 08:34  PeterB

	* libbalsa/identity.c: GtkFileChooserButton requires gtk version
	2.6.

2005-11-26 16:35  PeterB

	* libbalsa/mailbox_mbox.c: don't leak message.
	* libbalsa/mailbox_pop3.c: adjust total size for skipped messages.

2005-11-26 Pawel Salek

	* libbalsa/identity.c: add missing #include "misc.h"
	* libbalsa/mailbox_pop3.c: handle procmail-filtered messages.
	* src/main-window.[hc]: fix a regression: set right default view
	filter for sentbox.
	* src/balsa-index.c:
	* src/balsa-mblist.c: ditto.

2005-11-19 08:47  PeterB

	* src/balsa-index.c: don't scroll back to current message after
	mailbox changes.
	* src/sendmsg-window.c: create Face or X-Face user header from path
	in identity.
	* src/balsa-message.c: display face from Face or X-Face header.
	* libbalsa/send.c: use user-headers correctly.
	* libbalsa/: misc.c, misc.h: new public methods
	libbalsa_get_image_from_{,x_}face_header and a corresponding GError
	domain.
	* libbalsa/: identity.c, identity.h: port signature-path to
	GtkFileChooserButton; add Face and X-Face header file paths; change
	some prototypes to reduce dynamic casting.
	* configure.in: new configure option --with-compface=no.
	* acinclude.m4: stop some autotool whining.

2005-11-09 19:11  PeterB

	* libbalsa/: mailbox.c, mailbox.h, mailbox_imap.c,
	mailbox_maildir.c, mailbox_mbox.c, mailbox_mh.c, mailbox_pop3.c,
	message.c, message.h, send.c: change LibBalsaMailbox add-message
	method to take a GMimeStream and LibBalsaMessageFlag instead of a
	message; move libbalsa_mailbox_copy_message to message.c and rename
	libbalsa_message_copy; use new add-message method in mailbox-pop3.

2005-11-06 21:15 Pawel Salek

	* libbalsa/mailbox_pop3.c: use Mh temporary mailbox until an
	add_message_from_stream() method is implemented.

2005-11-06 13:42  PeterB

	* libbalsa/mailbox_mh.c: implement load-config method; use
	g_mkstemp to make temporary files; sync mailbox even if
	.mh_sequences doesn't exist.
	* libbalsa/mailbox_pop3.c: use g_file_open_tmp to open the temp
	file.

2005-11-06 Pawel Salek

	* libbalsa/mailbox_pop3.c: last commit broke direct Pop delivery -
	fix it.
	* src/sendmsg-window.c: fix compilation without GtkSpell.
	* Makefile.am: make variables must start in the first column.

2005-11-05 17:15  PeterB

	* src/Makefile.am: define balsa_gtkspell_extra_dist before using
	it.
	* configure.in, src/Makefile.am, src/sendmsg-window.c,
	src/sendmsg-window.h, src/toolbar-factory.c: new configure option
	--with-gtkspell, default = no.
	* src/main-window.c: don't clip close-button icon.

2005-11-04 18:53  PeterB

	* configure.in: gtkhtml3 has yet another version: 3.8.

2005-11-02 Pawel Salek

	* libbalsa/mailbox_pop3.c: no need to update config; fix memory leaks.
	* src/save-restore.c: "config-updated" signal does not exist any more.

2005-10-30 07:54  PeterB

	* src/sendmsg-window.c: do not mark forwarded message as answered.

2005-10-29 Pawel Salek

	* src/main-window.[ch]: iron out problems with the last patch
	* src/balsa-index.c:    and switching between different mboxes.

2005-10-29 Pawel Salek

	* libbalsa/mailbox_imap.c: last commit could trigger recursive
	searches under certain circumstances. Do it differently.
	* libbalsa/mailbox.c: more information about move errors.
	* libbalsa/imap/imap-auth.c: AUTH={PLAIN,ANONYMOUS} implemented.
	* libbalsa/imap/imap-handle.[hc]: anon support.
	* libbalsa/imap/imap-search.c: fix a bug in searching.
	* libbalsa/imap/imap_private.h: add enable_anonymous and
	enable_binary fields.
	* libbalsa/imap/pop3.c: minor cleanup.
	* src/balsa-index.[hc]: extend SoS filter.
	* src/main-window.[hc]: related changes.

2005-10-28 Pawel Salek

	* libbalsa/mailbox_imap.c: fix unread msg counts on concurrent mbox
	access.

2005-10-28 06:37  PeterB

	* src/: sendmsg-window.c, sendmsg-window.h: use separate members
	for the message we're replying to, and the draft message we saved.
	* libbalsa/mailbox_local.c: reverse a loop.
	* libbalsa/mailbox_mbox.c: look for appended messages in the
	correct place; always save the from-offset as the start of the
	message.

2005-10-27 17:56  PeterB

	* src/save-restore.c: set filters-trash-mbox.

2005-10-23 Pawel Salek

	* NEWS, configure.in: release 2.3.6

2005-10-19 Pawel Salek

	* libbalsa/imap/imap-tls.c: be compatible with openssl-0.9.8.
	* libbalsa/libbalsa-conf.c: fix memory leaks.

2005-10-14 06:53  PeterB

	* libbalsa/mailbox.c: check for NULL user-data.

2005-10-10 Pawel Salek

	* libbalsa/imap-server.c: distinguish between failed and cancelled
	authentication.
	* libbalsa/libbalsa.h: add cancelled authentication error code.
	* libbalsa/mailbox_imap.c: handle better errors in ::add_message.
	* libbalsa/imap/imap-auth.c, auth-{cram,gssapi}.c: cancelled vs failed.
	* libbalsa/imap/libimap.h: add apriopriate error code.
	* src/balsa-index.c: do not retry if the authentication was cancelled.
	* src/sendmsg-window.c:
	* src/spell-check.c: parent properly spell checking error messages.

2005-10-07 11:25  PeterB

	* libbalsa/libbalsa-conf.c: fix bug 318171.
	* src/: filter-edit-callbacks.c, save-restore.c: improve language,
	per Craig Routledge.

2005-10-06 19:22  PeterB

	* libbalsa/mailbox.c: sanity check.
	* src/: filter-edit-callbacks.c, filter-edit-dialog.c: fix various
	sensitivity problems, including one that blocked deleting the last
	filter.

2005-09-29 13:01  PeterB

	* libbalsa/body.c, libbalsa/body.h, libbalsa/misc.c,
	libbalsa/misc.h, src/balsa-message.c,
	src/balsa-mime-widget-callbacks.c, src/sendmsg-window.c: fix bug
	317240: use mode 0666 to save attachments.

2005-09-28 23:06  PeterB

	* doc/C/balsa.xml: update identities doc.
	* doc/C/balsa.xml: document per-identity SMTP server and message
	splitting.

2005-09-27 20:31  PeterB

	* src/: balsa-message.c, main-window.c: move BalsaMessage show/hide
	to balsa-message.c; fix a startup visual glitch.
	* src/main-window.c: hide irrelevant scrollbar--thanks to Sebastian
	Zerbe.
	* libbalsa/mailbox_mbox.c: write separating newline before
	appending new message, not after.
	* libinit_balsa/balsa-druid-page-directory.c: manage
	LibBalsaMailbox::no_reassemble.
	* src/mailbox-node.c, src/save-restore.c, libbalsa/mailbox.c:
	manage and use LibBalsaMailbox::no_reassemble; check for a
	message/partial part that has been wrapped in a multipart/*
	message.
	* libbalsa/mailbox.h: new member LibBalsaMailbox::no_reassemble,
	used to distinguish outbox.
	* libbalsa/rfc3156.c: check that a GMimeMultipartSigned has both
	its subparts.

2005-09-22 10:28  PeterB

	* libbalsa/: mailbox.c, mailbox_imap.c, mailbox_maildir.c,
	mailbox_mbox.c, mailbox_mh.c: update parent style when child is
	read.
	* libbalsa/body.c: allow saving non-GMimePart message parts.

2005-09-20 23:05  PeterB

	* libbalsa/: mailbox.c, mailbox_mbox.c, send.c: implement message
	fragmentation and reconstruction using "message/partial" mime type.
	* libbalsa/: smtp-server.c, smtp-server.h: add guint
	LibBalsaSmtpServer::big_message and manage it in the dialog.

2005-09-20 Pawel Salek

	* libbalsa/imap/imap-handle.c: handle lack of headers.
	* NEWS, configure.in: release 2.3.5

2005-09-15 10:12  PeterB

	* libbalsa/: mailbox.c, mailbox.h, mailbox_mbox.c: fix unthreaded
	build.

2005-09-14  Craig Routledge

	* doc/C/balsa.xml: update compose window file attaching doc.

2005-09-13 Pawel Salek

	* libbalsa/mailbox_imap.c: return correctly TRUE/FALSE on success.
	* src/spell-check.c: unavailable word list is a critical error.

2005-09-13 09:36  PeterB

	* libbalsa/: mailbox.c, mailbox.h, mailbox_mbox.c: implement
	lock_store class method and public functions.
	* src/balsa-index.c, libbalsa/body.c,
	libbalsa/gmime-part-rfc2440.c, libbalsa/html.c, libbalsa/message.c,
	mailbox_imap.c, mailbox_maildir.c, mailbox_mh.c,
	libbalsa/rfc3156.c, libbalsa/send.c, libbalsa/source-viewer.c,
	src/balsa-message.c: lock the mail store instead of a GMimeStream,
	to avoid unnecessary IMAP fetches.

2005-09-11  Carlos Morgado  <chbm gnome.org>

	* po (Module): update for stats

2005-09-06 Pawel Salek

	* configure.in: SuSE changes broke FC. Negotiate a common solution.

2005-09-05 Pawel Salek

	* configure.in: merge SuSE kerberos path fixes.
	* libbalsa/body.[hc]: provide more info on error in save(),
	save_fd(), save_temporary(), get_content() and get_stream().
	* libbalsa/libbalsa.h: add MAILBOX_ACCESS_ERROR code.
	* libbalsa/mailbox.[ch]: get_message_part() sets GError.
	* libbalsa/mailbox_{imap,local}.c: modify implementation accordingly.
	* libbalsa/{message,mime}.c: adjust to changed API.
	* src/balsa-message.c: ditto.
	* src/balsa-mime-widget-{callbacks,message,text}.c: 
	* src/balsa-mime-widget.c: ditto.
	* src/print.c: 
	* src/sendmsg-window.c: ditto when forwarding message.

2005-09-01 11:04  PeterB

	* src/pref-manager.c: connect file-chooser signal in an idle
	handler, after the chooser is initialized; test whether user
	changed window-layout; update toolbars if necessary.

2005-08-28 11:29  PeterB

	* src/balsa-index.c: simpler fix.
	* src/balsa-index.c: redisplay current message if filtering cleared
	it.

2005-08-25 19:55  PeterB

	* src/pref-manager.c: fix spacing.

2005-08-25 Pawel Salek

	* configure.in: support selection of the preferred GtkHtml widget.
	* README: matching description.
	* libbalsa/address-book-ldap.[ch]: support arbitrary locations of
	the private address book.
	* libbalsa/send.c: handle informatively errors of DATA command.
	* src/ab-window.c: fix reload action.
	* src/address-book-config.c: support extended LDAP config.
	* src/balsa-index.c: "Run" is the default action of "Pipe through"
	
2005-08-22 07:46  PeterB

	* doc/C/balsa.xml: cleanup.
	* src/toolbar-factory.c: set button label and tooltip
	appropriately.

2005-08-21  Jens Seidel  <jseidel@cvs.gnome.org>

	* src/filter-export-callbacks.c:
	* macros/gnome-bonobo-check.m4:
	* libbalsa/mailbox_mbox.c: Fixed the typo "occured"
	(also in all effected PO files to avoid fuzzyness)

2005-08-21 09:04  PeterB

	* doc/C/: balsa.xml, figures/message-window.png,
	figures/msg-part-select.png: message window documentation
	contributed by Craig Routledge <webstuff at craigroutledge dot
	cm,dom>; fix "unmatched element" warnings.

2005-08-17 19:03  PeterB

	* src/balsa-app.c: free filters after destroying mailboxes (fixes a
	crash-on-exit).

2005-08-04 14:14  PeterB

	* src/filter-run-callbacks.c, src/filter-run-dialog.c,
	src/filter-run.h, doc/C/balsa.xml: use separate "apply" buttons for
	selected available filters and for mailbox filters.

2005-08-01 09:35  PeterB

	* src/sendmsg-window.c: better fix for bug 312105; plug memory
	leak.

2005-07-31 22:26  PeterB

	* src/sendmsg-window.c: fix bug 312105.
	* src/sendmsg-window.c: fix bug 312091.

2005-07-29 09:52  PeterB

	* src/: balsa-mime-widget-text.c, sendmsg-window.c: fix some gcc
	nitpicking.

2005-07-27 18:54  PeterB

	* libbalsa/libbalsa-conf.c: use blank comment lines only to
	separate groups.
	* libbalsa/gmime-gpgme-context.c: compile with -D_FORTIFY_SOURCE=2.

2005-07-24  Carlos Morgado  <chbm chbm.net>

	* libbalsa/rfc3156.c: fix FC4 build

2005-07-24 09:03  PeterB

	* configure.in, src/save-restore.c, src/threads.h,
	libbalsa/address-book-extern.c, libbalsa/libbalsa.c,
	libbalsa/mailbox_imap.c, libbalsa/mailbox_mbox.c,
	libbalsa/mailbox_mh.c, libbalsa/send.c, libbalsa/send.h,
	libbalsa/imap/imap-commands.c, libbalsa/imap/imap-handle.c: compile
	with -D_FORTIFY_SOURCE=2.
	* src/balsa-mime-widget-message.c: do not create separate Fcc
	header.
	* libbalsa/message.c: make a single References user-header.
	* libbalsa/abook-completion.c: match quoted names and
	angle-bracketed mailboxes.

2005-07-23  Pawan Chitrakar  <pawan@nplinux.org>

	* configure.in: Added ne in ALL_LINGUAS

2005-07-18 08:04  PeterB

	* src/sendmsg-window.c: make References header according to RFC
	2822.

2005-07-15 10:53  PeterB

	* src/sendmsg-window.c: replace CR and LF in subject header with
	spaces.

2005-07-12 13:32  PeterB

	* src/save-restore.c: fix typo; clean up old filters correctly.
	* src/filter-edit-dialog.c: set button sensitivity when filter name
	is changed.
	* libbalsa/: libbalsa-conf.c, libbalsa-conf.h: use default GKeyFile
	list separator; implement libbalsa_conf_get_vector_with_default
	directly instead of as a macro.

2005-07-11 12:32  PeterB

	* src/store-address.c: use balsa_information instead of writing in
	appbar.
	* src/spell-check.c: use values from correct enum.
	* src/mailbox-node.c: use consistent return sequence.
	* src/: filter-edit-callbacks.c, filter-edit-dialog.c,
	filter-edit.h: use a single field-frame.

2005-07-09 23:33  PeterB

	* src/information-dialog.c: use only single-line messages in status
	bar.

2005-07-08 Pawel Salek

	* configure.in: -Wdeclare-after-statement is gcc>=4.0 specific.

2005-07-07 23:27  PeterB

	* src/balsa-index.c: lock a GMimeStream.
	* src/: save-restore.c, save-restore.h: export
	config_address_books_load.
	* src/mailbox-node.c: downgrade scanning problem from error to
	warning.
	* src/balsa-app.c: clean up.
	* src/address-book-config.c: no need to include address-book-gpe.h.
	* src/: ab-window.c, ab-window.h: reimport all address books after
	editing.
	* src/ab-main.c: show default address book initially.
	* libbalsa/rfc3156.c, src/pref-manager.c, src/sendmsg-window.c:
	translate strings marked for translation.
	* libbalsa/: libbalsa.c, libbalsa.h: include address-book-gpe.h in
	libbalsa.h.
	* libbalsa/libbalsa-conf.c: detect external modification of config
	file.
	* configure.in: catch declaration-after-statement.

2005-07-06 Jens Granseuer

	* src/filter-run-callbacks.c: fix bug 309574.

2005-07-06 Pawel Salek

	* src/ab-window.c: use our address book editor.
	* NEWS, configure.in: release balsa-2.3.4.

2005-07-01 16:14  PeterB

	* libbalsa/mailbox_pop3.c: destroy LibBalsaMailboxView for POP
	temporary mailbox.

2005-07-01  Pawel Salek

	* libbalsa/imap/pop3.c: fix handling rejected POP3 TLS certs #308932.

2005-06-30 21:41  PeterB

	* libbalsa/imap/imap-commands.c: use more of the GString api.
	* src/address-book-config.c: make sure filename is shown for
	LibBalsaAddressBookText.
	* src/ab-main.c: show address book type in window title; implement
	File->delete.
	* libbalsa/address-book-text.c: invalidate time stamp when we
	change the address book.
	* libbalsa/address-book-ldif.c: ensure blank line before new entry.
	* src/main-window.c: make progress bar faster than a snail.
	* libbalsa/libbalsa-conf.c: use g_file_set_contents to rewrite
	config files.

2005-06-24 Albrecht Dreß <albrecht dot dress at arcor dot de>

	* libbalsa/body.[hc]: implement libbalsa_message_body_protect_state().
	* src/Makefile.am: add 7+7 balsa-mime-widget source files.
	* src/balsa-message.[ch]: use the cleaner design from balsa-mime-widget.

2005-06-22  Pawel Salek

	* libbalsa/mailbox_imap.c: fix date searching when only upper
	limit is present.
	* libbalsa/mailbox_pop3.c: fix memory leak.
	* libbalsa/imap/imap-search.c: date::range must be signed.
	* src/filter-edit-callbacks.c: clean up filter dialog.
	* src/filter-run-{callbacks,dialog}.c: fix "run filters".
	* src/filter-run.h: add fr_apply_pressed() prototype.

2005-06-17 08:31  PeterB

	* libbalsa/address-book-vcard.c, libbalsa/address.c,
	src/Makefile.am, src/ab-main.c, src/address-book-config.c,
	src/address-book-config.h: implement File->New and File->Properties
	in balsa-ab.

2005-06-16  Pawel Salek

	* libbalsa/imap/auth-gssapi.c: 6th parameter to gss_{un,}wrap is int*.

2005-06-14 12:48  PeterB

	* src/sendmsg-window.c: clear BalsaSendmsg::in_reply_to.
	* src/sendmsg-window.h: omitted from yesterday's commit.

2005-06-13 23:59  PeterB

	* src/sendmsg-window.c: create in-reply-to string when we begin a
	reply, so we can save and restore it without reference to the
	original message.
	* src/: balsa-message.c, information-dialog.c: use
	GTK_WRAP_WORD_CHAR instead of GTK_WRAP_WORD, to allow wrapping of
	long words.
	* libbalsa/misc.c: trim trailing whitespace beyond the wrap length.
	* src/balsa-app.h: use only Monospace and Sans as default fonts.

2005-06-11  Pawel Salek

	* libbalsa/imap/imap-handle.c: fix trivial bug introduced yesterday.

2005-06-10  Pawel Salek

	* libbalsa/mailbox_imap.c: survive better cases
	when number of messages changed in the broken connection. Resync
	header caches more aggresively.
	* libbalsa/imap/imap-commands.c: use UID search support.
	* libbalsa/imap/imap-handle.h: allow searching ranges of messages.
	* libbalsa/imap/imap-handle.c: never insert cmd==0 to response queue.
	* libbalsa/imap/imap-search.c: implement it.
	* src/ab-window.c: Fix "No-address-book" case (bug 158939).
	* src/main-window.[hc]: ditto.
	* src/pref-manager.c: ditto.

2005-06-08 Andrew Lau

	* libbalsa/address-book-ldap.c: include "i18n.h".

2005-06-08 14:13  PeterB

	* src/balsa-message.c, src/print.c, src/sendmsg-window.c,
	libbalsa/libbalsa.c, libbalsa/libbalsa.h, libbalsa/mailbox.c,
	libbalsa/message.h: rename libbalsa_date_to_gchar as
	libbalsa_date_to_utf8, and return a UTF-8 string.
	* src/ab-main.c: reuse edit widget for smoother update; reload
	address book after changing it.
	* src/address-book-config.c: use new LibBalsaAddressBook subclass
	structure.
	* libbalsa/Makefile.am: add dependencies.
	* libbalsa/: address.c, address.h: use an editable GtkTreeView to
	edit email addresses; implement libbalsa_address_set_edit_entries
	to reuse an edit widget.
	* libbalsa/: address-book-ldif.c, address-book-ldif.h,
	address-book-text.c, address-book-text.h, address-book-vcard.c,
	address-book-vcard.h, address-book.c, address-book.h: new class
	LibBalsaAddressBookText, subclass of LibBalsaAddressBook, with
	LibBalsaAddressBook{Ldif,Vcard} as subclasses.

2005-06-07 11:56  PeterB

	* libbalsa/: rfc3156.c, gmime-part-rfc2440.c: lock GMimeStreams.

2005-06-06  Pawel Salek

	* libbalsa/gmime-gpgme-signature.c: check gpgme_get_key() result.
	* libbalsa/libbalsa.c: fix bug 306666.
	* libbalsa/send.c: allow the user to check certificates w/o threads.
	* src/main-window.c: mbnode->name can be NULL - do not use it
	and perhaps fix 306636.
	* NEWS: update for real 2.3.3 release this time.

2005-06-05  Pawel Salek

	* libbalsa/mailbox_imap.c: Peter found one more fault in imap scanning.
	* NEWS, configure.in: update for release 2.3.3

2005-06-04  Pawel Salek

	* balsa.spec.in: extend list of dependencies.
	* libbalsa/folder-scanners.c: flags are passed by value.
	* libbalsa/imap/auth-gssapi.c: continue authentication on invalid key.
	* libbalsa/imap/imap-handle.c: pass flags by value - address was
	truncated by the marshaller on 64-bit machines.

2005-06-01 20:54  PeterB

	* libbalsa/message.c: lock a GMimeStream.

2005-05-28 23:12  PeterB

	* libbalsa/libbalsa.c: look for /var/mail/$USER before
	/var/spool/mail/$USER: fixes bug 305659.
	* src/mailbox-node.c: make popup menu more appropriate: fixes
	bug 305668.

2005-05-26 16:13  PeterB

	* src/ab-main.c: make radio list work; set window title to be
	address book name.
	* libbalsa/source-viewer.c: lock a GMimeStream.

2005-05-24 09:09  PeterB

	* libbalsa/gmime-part-rfc2440.c: lock a GMimeStream.

2005-05-24 Albrecht Dreß <albrecht dot dress at arcor dot de>

	* libbalsa/gmime-gpgme-signature.c: fix the signature verification
	output.
	* src/balsa-message.c: check the result of
	libbalsa_mailbox_get_message_part().
	* balsa.spec.in: clean up and fedora extras adaptation.

2005-05-23 19:36  PeterB

	* configure.in, libbalsa/address-book-gpe.c,
	libbalsa/address-book-gpe.h, src/address-book-config.c: support
	SQLite Version 3--fixes bug 305152.
	* libbalsa/libbalsa-conf.c: compile on systems where gsize !=
	guint.

2005-05-22 17:11  PeterB

	* libbalsa/: Makefile.am, body.c, gmime-part-rfc2440.c, html.c,
	mailbox_imap.c, mailbox_maildir.c, mailbox_mbox.c, mailbox_mh.c,
	message.c, mime-stream-shared.c, mime-stream-shared.h, rfc3156.c,
	send.c: implement LibBalsaMimeStreamShared, a subclass of
	GMimeStreamFs with a lock; use it in LibBalsaMailboxMbox in place
	of the fine-grained mailbox lock.

2005-05-21  Pawel Salek

	* libbalsa/mailbox_imap.c: get properly signed parts.
	* src/balsa-message.c: do not reset status of a checked sig.

2005-05-21 09:41  PeterB

	* src/save-restore.c: save message counts only when they are
	time-stamped.

2005-05-20 23:56  PeterB

	* libbalsa/mailbox.c, libbalsa/mailbox.h,
	libbalsa/mailbox_maildir.c, libbalsa/mailbox_maildir.h,
	libbalsa/mailbox_mbox.c, libbalsa/mailbox_mh.c,
	libbalsa/mailbox_mh.h, src/save-restore.c: save and restore
	mod_time for local mailboxes.

2005-05-12 18:08  PeterB

	* libbalsa/mailbox_mbox.c: use light-weight parser at get-message
	time.
	* src/save-restore.c: really remove unused mailbox views.
	* libbalsa/address-book-extern.c: fix last part of bug 155382.

2005-05-09 08:32  PeterB

	* src/balsa-index.c: non-modal pipe-message dialog.

2005-05-07  Pawel Salek

	* libbalsa/libbalsa{,-conf}.c: disable debugging output.
	* NEWS, configure.in: release 2.3.2

2005-05-07  Pawel Salek

	* balsa.1.in: merge patch in DBTS #269787, bugzilla 303422.
	* libbalsa/address-book-extern.c: fix DBTS#306556, bugzilla 303421.
	* libbalsa/address-book-gpe.c: remove duplicates from the returned list.
	* src/ab-window.c: select initially displayed list in the combo.
	* src/address-book-config.c: fix bad_path() for gtk < 2.6.0.
	* src/pref-manager.c: Display type of extern address book.
	* src/balsa-app.c: do not crash when non-existing mailbox specified with -o.
	* src/balsa-mblist.c: fix -u command line option.
	* src/main.c: ditto + fix -a when passing it via bonobo.

2005-05-06 23:19  PeterB

	* src/save-restore.c: slightly more 2.0.x compatibility.
	* libbalsa/mailbox_mbox.c: use a separate pthread_mutex_t for
	lbm_mbox_mime_stream_lock().
	* src/: filter-edit-callbacks.c, filter-edit-dialog.c,
	filter-edit.h: manage button sensitivity better.

2005-05-06  Pawel Salek

	* src/mailbox-conf.c: do not attempt opening closed mailboxes just
	because their configuration is about to get changed.
	* src/save-restore.c: s,sa --learn,sa-learn --spam,g.

2005-05-04  Pawel Salek

	* libbalsa/imap/imap-handle.c: nail down the broken IDLE connection
	problem.

2005-05-03 22:43  PeterB

	* src/: balsa-app.h, balsa-index.c, balsa-index.h, main-window.c,
	save-restore.c: add a drop-down list of most recently used pipe
	commands; pipe all selected messages through command.
	* libbalsa/mailbox.c, libbalsa/mailbox.h, libbalsa/mailbox_imap.c,
	libbalsa/mailbox_maildir.c, libbalsa/mailbox_mbox.c,
	libbalsa/mailbox_mh.c, libbalsa/message.c, libbalsa/message.h,
	libbalsa/send.c, libbalsa/source-viewer.c, src/main-window.c:
	replace message argument of libbalsa_mailbox_get_message_stream with
	msgno; implement and use libbalsa_message_stream(LibBalsaMessage *
	message).

2005-05-02 23:58  PeterB

	* libinit_balsa/balsa-druid-page-user.c: fix bug 302782.

2005-05-02  Pawel Salek

	* NEWS, configure.in: release 2.3.1.
	* libbalsa/mailbox_imap.c: handle empty msg-id over imap right.

2005-05-01  Pawel Salek

	* libbalsa/mailbox_imap.c: implement remove-duplicates for imap too.
	* libbalsa/imap/imap-commands.c: FetchBodyCb callbacks get seqno now.
	* libbalsa/imap/imap-commands.h: add imap_mbox_complete_msgids.
	* libbalsa/imap/imap-handle.c: handle arbitrary header fetches.

2005-04-30 19:57  PeterB

	* libbalsa/mailbox.c, libbalsa/mailbox.h, libbalsa/mailbox_local.c,
	src/main-window.c: restore remove-duplicates functionality.

2005-04-28  Pawel Salek

	* libbalsa/folder-scanners.c: don't break with uw-imap server.

2005-04-27 20:17  PeterB

	* libbalsa/folder-scanners.c, libbalsa/folder-scanners.h,
	src/mailbox-node.c: simplify folder scanning.

2005-04-26 14:08  PeterB

	* libbalsa/identity.c, src/pref-manager.c: compile --without-esmtp
	and --without-gpgme.

2005-04-21  Pawel Salek

	* libbalsa/folder-scanners.c: block list-response when asking
	for a delimiter.
	* libbalsa/imap-server.[ch]: allow checking for new mail with STATUS.
	* libbalsa/smtp-server.c: keep old behavior and always save passwd.
	* libbalsa/imap/imap-commands.[ch]: implement imap_mbox_status().
	* libbalsa/imap/imap-handle.c: handle its response.
	* libbalsa/imap/imap_private.h: even for several issued in parallel.
	* src/folder-conf.c: configure it.

2005-04-20 21:26  PeterB

	* src/sendmsg-window.c: simplify setting identity.
	* libbalsa/imap-server.c, libbalsa/mailbox_pop3.c,
	libbalsa/server.c, libbalsa/server.h, libbalsa/smtp-server.c,
	src/folder-conf.c, src/pref-manager.c: lose LibBalsaServer::type.
	* libbalsa/mailbox.c, libbalsa/mailbox.h,
	libbalsa/mailbox_maildir.c, libbalsa/mailbox_mbox.c,
	libbalsa/mailbox_mh.c, src/balsa-mblist.c, src/save-restore.c: add
	unread and total members to LibBalsaMailboxView, and save them in
	the config file.
	* libbalsa/libbalsa-conf.c: preserve blank lines between sections
	in the config file.

2005-04-19  Pawel Salek

	* libbalsa/folder-scanners.[hc]: avoid redundant queries for IMAP
	hierarchy delimiters.
	* src/mailbox-node.[ch]: ... because we store earlier answers.

2005-04-18  Pawel Salek

	* libbalsa/imap/imap-handle.c: silence output on the terminal.
	* src/balsa-icons.c: silence icon debugging.
	* src/sendmsg-window.c: specify exactly file names in messages -
	important when attaching multiple messages at once.

2005-04-17 10:57  PeterB

	* libbalsa/: mailbox.c, mailbox.h, mailbox_local.c: don't keep
	selected message displayed when changing view filter.

2005-04-16 22:37  PeterB

	* src/save-restore.c, libbalsa/identity.c: compile with gpgme but
	without libesmtp.
	* src/pref-manager.c: append server to balsa_app.smtp_servers when
	the user OKs it.

2005-04-16 20:23  Pawel Salek

	* libbalsa/identity.[ch]: compile --without-gpgme
	* libbalsa/imap/imap-handle.c: survive better broken connections.
	* src/mailbox-conf.c: generate shorter identity names.
	* src/save-restore.c: more robust smtp server config loading.

2005-04-16 08:01  PeterB

	* libbalsa/i18n.h: comment that this header must be included last.
	* libbalsa/smtp-server.c: include "i18n.h" last.

2005-04-15 17:28  PeterB

	* libbalsa/Makefile.am, libbalsa/identity.c, libbalsa/identity.h,
	libbalsa/libbalsa.h, libbalsa/message.c, libbalsa/send.c,
	libbalsa/send.h, libbalsa/server.h, libbalsa/smtp-server.c,
	libbalsa/smtp-server.h, libinit_balsa/balsa-druid-page-user.c,
	src/balsa-app.c, src/balsa-app.h, src/balsa-message.c,
	src/main-window.c, src/pref-manager.c, src/save-restore.c,
	src/sendmsg-window.c: implement LibBalsaSmtpServer; use it for
	per-identity server.

2005-04-12 12:31  PeterB

	* libbalsa/html.c: convert charset more carefully.

2005-04-10 20:28  PeterB

	* libbalsa/mailbox_maildir.c: do not overwrite message when
	renaming.
	* libbalsa/mailbox_maildir.c: remember correct file name.

2005-04-08 14:30  PeterB

	* src/save-restore.c: use correct filter group name; remove filter
	groups with malformed names.

2005-04-07 Albrecht Dreß <albrecht dot dress at arcor dot de>

	* src/balsa-message.c: save multiple parts.

2005-04-07 11:18  PeterB

	* src/sendmsg-window.c: check for NULL charset.

2005-04-06 16:45  PeterB

	* libbalsa/body.c: ensure stream is a filter-stream.

2005-04-05 20:36  PeterB

	* src/sendmsg-window.c, src/sendmsg-window.h, libbalsa/filter.c,
	libbalsa/mailbox_local.c, libbalsa/mime.c, libbalsa/mime.h: yet
	another shot at finding the best charset in the compose window.
	* src/sendmsg-window.c: destroy file-chooser dialogs with
	their parent.

2005-04-05 Pawel Salek

	* libbalsa/imap/imap-handle.c: proper types for list-response
	signal handlers.
	* libbalsa/imap/libimap-marshal.list: ditto.
	* libbalsa/imap/imap-search.c: compile on darwin.
	
2005-04-03 Pawel Salek

	* Makefile.am: s,m4,macros,g;
	* balsa.spec.in: compile on suse.
	* configure.in:
	* libbalsa/imap/auth-gssapi.c: compile against heimdal.

2005-04-01  Steve Murphy  <murf@e-tools.com>

        * configure.in: Added "rw" to ALL_LINGUAS.

2005-04-01 18:46  PeterB

	* src/sendmsg-window.c: omit all identity addresses from cc header.
	* src/balsa-message.c, src/print.c, libbalsa/body.c,
	libbalsa/html.c, libbalsa/html.h: move charset conversion for html
	parts to libbalsa/html.c, as it's handled differently by the two
	widgets.

2005-03-31 19:58  PeterB

	* src/sendmsg-window.c: remember folder when including file in
	message content.

2005-03-30 19:45  PeterB

	* src/balsa-message.c: fix bug 172145.

2005-03-29 21:16  PeterB

	* src/balsa-message.c: fix bug 172005.
	* libbalsa/rfc3156.c: pass NULL to g_locale_to_utf8 instead of
	(ssize_t *), to keep gcc4 quiet.
	* src/: balsa-message.c, sendmsg-window.c: use glib macros to cast
	int to pointer and back.

2005-03-26 Albrecht Dreß <albrecht dot dress at arcor dot de>

	* libbalsa/rfc3156.c: plug in recently introduced DoS.

2005-03-24 06:59  PeterB

	* src/ab-main.c: set all locales.
	* src/main.c: set all locales.
	* src/main-window.c: make label localizable.

2005-03-24 Pawel Salek

	* libbalsa/address-book-ldap.c: add missing libbalsa-conf.h
	* balsa.spec.in: update icon cache after rpm installation.
	* images/Makefile.am: bug 171388.

2005-03-23 Albrecht Dreß <albrecht dot dress at arcor dot de>

	* src/balsa-message.c, libbalsa/gmime-gpgme-context.c,
	libbalsa/gmime-gpgme-context.h, libbalsa/identity.c,
	libbalsa/identity.h, libbalsa/rfc3156.c, libbalsa/rfc3156.h,
	libbalsa/send.c: (1) plug a minor security problem when checking
	the gpg subkey status; (2) improve dealing with low-validity uid's
	for encryption; (3) several smaller fixes.

2005-03-23 PeterB

	* libbalsa/rfc3156.c: fix bug 171415.
	* libbalsa/address-book-ldap.c, src/ab-main.c: complete migration
	from GnomeConfig to LibbalsaConf.
	* src/sendmsg-window.c: strip parameter variables from exec string.

2005-03-22 22:07  PeterB

	* libbalsa/: libbalsa-conf.c, libbalsa-conf.h: set up correctly for
	new user.
	* libbalsa/libbalsa-conf.c: more careful rewrite, more user
	feedback.
	* src/main.c: set balsa_icon.png as default window icon.
	* src/: balsa-message.c, sendmsg-window.c: always pass URI to
	gnome_vfs_mime_application_launch.
	* src/sendmsg-window.c: more appropriate version checks.
	* libbalsa/libbalsa-conf.c: organize key-file info into structures.

2005-03-21 08:08  PeterB

	* configure.in, src/balsa-message.c, src/sendmsg-window.c: check
	for GnomeVFS version 2.9 instead of 2.8.

2005-03-20 15:03  PeterB

	* libbalsa/libbalsa-conf.c: initialize only once in non-threaded
	build.
	* libbalsa/libbalsa-conf.c: store new config files in ~/.balsa.
	* configure.in, libbalsa/misc.c, libbalsa/misc.h,
	src/balsa-message.c, src/sendmsg-window.c: more appropriate version
	checks.

2005-03-20 Pawel Salek

	* src/address-book-config.c: s,GNOME_DISABLE_DEPR,GTK_DISABLE_DEPR,

2005-03-19 23:00  PeterB

	* libbalsa/libbalsa-conf.h: check Gtk version.
	* libbalsa/Makefile.am, libbalsa/address-book-ldif.c,
	libbalsa/address-book.c, libbalsa/body.c, libbalsa/files.c,
	libbalsa/filter-file.c, libbalsa/filter.h,
	libbalsa/folder-scanners.c, libbalsa/gmime-part-rfc2440.c,
	libbalsa/html.c, libbalsa/identity.c, libbalsa/libbalsa-conf.c,
	libbalsa/libbalsa-conf.h, libbalsa/libbalsa.c,
	libbalsa/mailbox-filter.c, libbalsa/mailbox.c, libbalsa/mailbox.h,
	libbalsa/mailbox_imap.c, libbalsa/mailbox_mbox.c,
	libbalsa/mailbox_mh.c, libbalsa/message.c, libbalsa/misc.c,
	libbalsa/rfc3156.c, libbalsa/send.c, libbalsa/source-viewer.c,
	libbalsa/imap/imap-commands.c, libbalsa/imap/imap-commands.h,
	libbalsa/imap/md5-utils.c, libbalsa/imap/md5-utils.h,
	libbalsa/imap/util.c, libbalsa/imap/util.h,
	libinit_balsa/Makefile.am, src/Makefile.am, src/ab-main.c,
	src/balsa-message.c, src/filter-edit-callbacks.c,
	src/mailbox-node.c, src/print.c, src/quote-color.c,
	src/quote-color.h, src/save-restore.c, src/sendmsg-window.c: more
	Gnome deprecation cleanup, including a GKeyFile replacement for
	GnomeConfig; fix some nit-picking from gcc 4; restore the
	*_DISABLE_DEPRECATED defs.
	* src/sendmsg-window.c: check whether CP125x charset is ok.

2005-03-18 16:29  PeterB

	* src/main.c: get mbnode before checking it.

2005-03-17 Pawel Salek

	* libbalsa/imap/imap-handle.c: make the IDLE code behave better
	on broken connections.
	* src/balsa-app.h: add pipe_cmd field.
	* src/main-window.c: allow for piping a message through an
	external program. (bug 153386).
	* src/save-restore.c: save and restore last pipe_cmd.
	
2005-03-16 Pawel Salek

	* libbalsa/imap/imap-handle.c: provide more info on SSL-related
	failures.

2005-03-15 Albrecht Dreß <albrecht dot dress at arcor dot de>

	* libbalsa/send.c: don't unref NULL GObject.

2005-03-15 13:03  PeterB

	* libbalsa/body.c: convert charset also for html parts (fixes
	bug 170456).
	* libbalsa/mailbox_imap.c: use delim to build path when renaming;
	use g_build_path() for IMAP paths.

2005-03-14 Albrecht Dreß <albrecht dot dress at arcor dot de>

	* libbalsa/message.h, libbalsa/send.c, libbalsa/send.h,
	src/balsa-app.c, src/balsa-app.h, src/balsa-message.c,
	src/pref-manager.c, src/save-restore.c, src/sendmsg-window.c: use
	only quoted-printable encoding.

2005-03-14 19:42  PeterB

	* libbalsa/body.c: use string returned by
	g_mime_filter_windows_real_charset() before it's deallocated.

2005-03-10 10:42  PeterB

	* libbalsa/body.c, libbalsa/filter.c, libbalsa/mailbox_local.c,
	libbalsa/message.c, libbalsa/mime.c, libbalsa/mime.h,
	src/sendmsg-window.c, src/sendmsg-window.h: keep track of charset
	instead of using g_mime_charset_best().

2005-03-08 18:40 Albrecht Dreß <albrecht dot dress at arcor dot de>

	* libbalsa/gmime-part-rfc2440.c: replace use of
	g_mime_content_type_[gs]et_parameter() by
	g_mime_object_[gs]et_content_type_parameter(), and
	g_mime_part_get_content_type() by g_mime_object_get_content_type().

2005-03-08 10:43  PeterB

	* libbalsa/: mailbox.c, mailbox.h: remember that we loaded filters.
	* src/filter-edit-callbacks.c: don't set empty filename; comment
	out unused LIBESD condition.
	* libbalsa/Makefile.am, libbalsa/filter-file.c, libbalsa/filter.h,
	libbalsa/libbalsa-conf.c, libbalsa/libbalsa-conf.h,
	libbalsa/mailbox-filter.c, src/save-restore.c: move all
	GnomeConfigIterator code to (new) libbalsa-conf.c; implement
	GnomeConfig version of libbalsa_conf_foreach_section.

2005-03-04 19:56  Albrecht Dreß <albrecht dot dress at arcor dot de>

	* libbalsa/gmime-part-rfc2440.c, src/balsa-message.c,
	src/balsa-message.h, src/sendmsg-window.c: add and evaluate the RFC
	2440 headers properly; write the stream to a new (plain) stream;
	rename libbalsa_msg_perform_crypto to balsa_message_perform_crypto,
	add a parameter to decrypt only and export the function; call
	balsa_message_perform_crypto() to fix the bug Kacper reported.

2005-03-03 20:07  PeterB

	* libbalsa/: mailbox_mbox.c, mailbox_mbox.h: implement
	lbm_mbox_mime_stream_{lock,unlock}; use them to avoid interruption
	of a sequence of GMimeStream operations.

2005-03-01 09:49  PeterB

	* src/sendmsg-window.c: make file choosers transient for compose
	window.

2005-02-28 09:09  PeterB

	* libbalsa/libbalsa.c, libbalsa/libbalsa.h, libbalsa/mailbox.c,
	src/main.c: move balsa_threads_{enter,leave} to
	libbalsa/libbalsa.c; change libbalsa_lock_mailbox to reflect
	recursive gdk lock and remove assumptions about
	main-thread/sub-thread; hold mailbox lock before asking for gdk
	lock.
	* libbalsa/imap/imap-handle.c: downgrade warnings to messages.
	* libbalsa/misc.c: fix test for "<URL:" [fixes Bug 168732].
	* src/balsa-index.c: mysterious adjustment to width of icon
	columns [fixes Bug 168733].

2005-02-27 14:35  PeterB

	* libbalsa/message.c, libbalsa/message.h, libbalsa/send.c,
	src/sendmsg-window.c, src/sendmsg-window.h: use
	g_mime_charset_best() to encode message content.
	* libbalsa/mailbox_local.c: get message when needed for matching
	(2 commits).
	* libbalsa/mailbox.c: check for zero message count before changing
	flags.

2005-02-25 11:29  PeterB

	* src/address-book-config.c: use correct Gtk response.

2005-02-24  Pawel Salek

	* src/pref-manager.c: compile with C89 (contributed by Jens Granseuer).

2005-02-23  Pawel Salek

	* NEWS: release 2.3.0
	* libbalsa/mailbox_local.c: fix one of the problems with msg filtering.

2005-02-22 19:53  PeterB

	* src/main-window.c: remove ctrl+F accelerator from forward-inline.

2005-02-20 Kacper Wysocki <kacperw at online dot no>

	* libbalsa/imap/pop3.c: const char *service should not be static.

2005-02-20  Pawel Salek

	* balsa.spec.in: icon-related updates.
	* libbalsa/imap/imap-commands.c: enable IDLE only when really disabled.
	* libinit_balsa/balsa-druid-page-user.c: do not require incoming server

2005-02-20 12:05  PeterB

	* src/: balsa-icons.h, balsa-index.c, main-window.c: remove
	BALSA_PIXMAP_MENU_* definitions.
	* src/balsa-message.c: make OK the default response in save dialog.

2005-02-20 Craig Routledge <webstuff at craigroutledge dot com>

	* src/main-window.c: bump the date in the about dialog.
	* doc/C/balsa.xml: bring the Main Window section of the help file
	up to sync with the user interface.
	* src/balsa-message.c: add tooltips to the "check crypto" and
	"attachment" icons.

2005-02-16 20:20  Albrecht Dreß <albrecht dot dress at arcor dot de>

	* libbalsa/misc.c, libbalsa/misc.h, src/balsa-message.c,
	src/sendmsg-window.c: implement libbalsa_ia_rfc2821_equal and use
	it to exclude self from cc list.

2005-02-16 09:13  PeterB

	* src/mailbox-conf.c: manage sensitivity of the OK/Update button.

2005-02-15 21:48  Craig Routledge <webstuff@craigroutledge.com>

	* src/balsa-message.c: better handling of
	"application/octet-stream".

2005-02-15 21:48  PeterB

	* src/balsa-message.c: don't allocate unnecessary address strings.
	* libbalsa/: body.c, mailbox_mbox.c: let GMimeStreams work
	end-to-end when possible.

2005-02-14  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Add «nb» to ALL_LINGUAS.

2005-02-11 19:38  PeterB

	* src/sendmsg-window.c, libbalsa/misc.c: use
	"application/octet-stream" as a last resort.

2005-02-09 20:33  PeterB

	* libbalsa/mailbox.c: don't lock mailbox to change a pseudo-flag.
	* src/main-window.c: fix the About dialog.

2005-02-08 17:33  PeterB

	* src/save-restore.c: save the sanitized toolbar.
	* libbalsa/imap/imap-handle.c: typo.

2005-02-08  Pawel Salek

	* libbalsa/imap/imap-handle.c: unregister IDLE listener on
	error.
	* libbalsa/imap/imap-tls.c: related connection shutting cleanup.
	* libbalsa/imap/imap_private.h: add imap_handle_disconnect() proto.

2005-02-07 20:45  Albrecht Dreß <albrecht dot dress at arcor dot de>

	* src/: save-restore.c, toolbar-factory.c, toolbar-factory.h: fix
	old toolbar button compatibility.

2005-02-07  Pawel Salek

	* src/address-book-config.c: compile with gtk-2.4
	* balsa.spec.in: distribute new icons.
	* configure.in: bump version to 2.3.0.
	* images/24x24/Makefile.am: fix install-data-hook:
	* libbalsa/Makefile.am: add missing i18n.h file.
	* libbalsa/mailbox_imap.c: remove debugging output.
	
2005-02-06 20:43  PeterB

	* configure.in, images/16x16/Makefile, images/16x16/Makefile.in,
	images/24x24/Makefile, images/24x24/Makefile.in,
	libbalsa/address-book-extern.c, libbalsa/address-book-ldif.c,
	libbalsa/address-book-vcard.c, libbalsa/address-book.c,
	libbalsa/address.c, libbalsa/body.c, libbalsa/filter-error.c,
	libbalsa/filter-file.c, libbalsa/filter.c,
	libbalsa/gmime-application-pkcs7.c, libbalsa/gmime-gpgme-context.c,
	libbalsa/i18n.h, libbalsa/identity.c, libbalsa/imap-server.c,
	libbalsa/libbalsa-conf.h, libbalsa/libbalsa.c,
	libbalsa/mailbox-filter.c, libbalsa/mailbox.c,
	libbalsa/mailbox_imap.c, libbalsa/mailbox_local.c,
	libbalsa/mailbox_maildir.c, libbalsa/mailbox_mbox.c,
	libbalsa/mailbox_mh.c, libbalsa/mailbox_pop3.c, libbalsa/message.c,
	libbalsa/mime.c, libbalsa/misc.c, libbalsa/send.c,
	libbalsa/server.c, libbalsa/source-viewer.c,
	libinit_balsa/balsa-druid-page-defclient.c,
	libinit_balsa/balsa-druid-page-directory.c,
	libinit_balsa/balsa-druid-page-finish.c,
	libinit_balsa/balsa-druid-page-user.c,
	libinit_balsa/balsa-druid-page-welcome.c,
	libinit_balsa/balsa-initdruid.c, libinit_balsa/helper.c,
	libinit_balsa/init_balsa.c, src/ab-window.c,
	src/address-book-config.c, src/address-book-config.h,
	src/balsa-app.c, src/balsa-index.c, src/balsa-mblist.c,
	src/balsa-message.c, src/filter-edit-callbacks.c,
	src/filter-edit-dialog.c, src/filter-export-callbacks.c,
	src/filter-export-dialog.c, src/filter-run-callbacks.c,
	src/filter-run-dialog.c, src/folder-conf.c,
	src/information-dialog.c, src/mailbox-conf.c, src/mailbox-node.c,
	src/main-window.c, src/main.c, src/message-window.c,
	src/pref-manager.c, src/print.c, src/save-restore.c,
	src/sendmsg-window.c, src/spell-check.c, src/store-address.c,
	src/toolbar-factory.c, src/toolbar-prefs.c: install and use
	libbalsa/i18n.h; migrate from GnomeFileEntry to GtkFileChooser;
	other Gnome-deprecation cleanup.

2005-02-06 18:45   Albrecht Dreß <albrecht dot dress at arcor dot de>

	* configure.in, images/Makefile.am, images/16x16/Makefile,
	images/16x16/Makefile.am, images/16x16/Makefile.in,
	images/16x16/balsa-encrypted.png, images/16x16/balsa-mark-all.png,
	images/16x16/balsa-mbox-draft.png,
	images/16x16/balsa-mbox-sent.png,
	images/16x16/balsa-mbox-tray-empty.png,
	images/16x16/balsa-mbox-tray-full.png,
	images/16x16/balsa-next-flagged.png,
	images/16x16/balsa-next-part.png,
	images/16x16/balsa-next-unread.png, images/16x16/balsa-next.png,
	images/16x16/balsa-postpone.png,
	images/16x16/balsa-previous-part.png,
	images/16x16/balsa-previous.png, images/16x16/balsa-reply-all.png,
	images/16x16/balsa-signature-bad.png,
	images/16x16/balsa-signature-good.png,
	images/16x16/balsa-signature-notrust.png,
	images/16x16/balsa-signature-unknown.png, images/24x24/Makefile,
	images/24x24/Makefile.am, images/24x24/Makefile.in,
	images/24x24/balsa-crypt-check.png, images/24x24/balsa-encrypt.png,
	images/24x24/balsa-encrypted.png, images/24x24/balsa-mark-all.png,
	images/24x24/balsa-marked-new.png,
	images/24x24/balsa-next-flagged.png,
	images/24x24/balsa-next-part.png,
	images/24x24/balsa-next-unread.png, images/24x24/balsa-next.png,
	images/24x24/balsa-postpone.png, images/24x24/balsa-preview.png,
	images/24x24/balsa-previous-part.png,
	images/24x24/balsa-previous.png, images/24x24/balsa-reply-all.png,
	images/24x24/balsa-sign.png, images/24x24/balsa-signature-bad.png,
	images/24x24/balsa-signature-good.png,
	images/24x24/balsa-signature-notrust.png,
	images/24x24/balsa-signature-unknown.png,
	images/24x24/balsa-trash-empty.png, images/mimetypes/Makefile.am,
	src/balsa-icons.c, src/balsa-icons.h, src/balsa-index.c,
	src/balsa-mblist.c, src/balsa-message.c, src/filter-edit-dialog.c,
	src/main-window.c, src/message-window.c, src/sendmsg-window.c,
	src/spell-check.c, src/toolbar-factory.c, src/toolbar-prefs.c:
	themable icons.

2005-02-06  Pawel Salek

	* libbalsa/mailbox_imap.c: fix some corner cases for
	LibBalsaMessageBody-to-imap section transformation.
	* libbalsa/mailbox_pop3.c: use backend SSL option.
	* libbalsa/imap/imap-commands.[ch]: do not guess whether part headers
	are to be fetched - say it clearly.
	* libbalsa/imap/imap-handle.c: process all data in IDLE callback.

2005-02-06  Pawel Salek

	* libbalsa/body.[hc]: filter CRLF on saving text parts.
	* src/balsa-message.c, sendmsg-window.c: adapt to changed API.
	* libbalsa/html.c: HAVE_GNOME related fixes.

2005-02-05 17:50  PeterB

	* libbalsa/Makefile.am, libinit_balsa/Makefile.am, src/Makefile.am:
	temporarily allow deprecated methods.

2005-02-05 17:49  Albrecht Dreß <albrecht dot dress at arcor dot de>

	* src/sendmsg-window.c: fix DnD problem with escaped filenames.

2005-02-03  Pawel Salek

	* libbalsa/imap/imap-handle.c: clean handle->sio field.

2005-02-02  Pawel Salek

	* configure.in: minor reordering fixes.
	* libbalsa/address-book-gpe.c:  fix InternerAddress regression.
	* libbalsa/source-viewer.c: do not expand menu (regression fixed).
	* libbalsa/imap/imap-commands.c: enable/disable IDLE.
	* libbalsa/imap/imap-{handle,search}.c: ditto.
	* libbalsa/imap/imap_private.h: add IDLE related fields.

2005-01-29  Pawel Salek

	* configure.in: do it by the book (literally).
	* libbalsa/address-book-extern.c: remove uneeded GNOME dependency.
	* libbalsa/*.c: ditto.
	* libinit_balsa/*.c: Druid needs GNOME.
	* src/balsa-app.c: remove BALSA_MAJOR <2 remains.
	* src/print.c: drop old gnomeprint-1.* support.

2005-01-29 09:23  PeterB

	* src/folder-conf.c: fix typo.

2005-01-28 08:44  Craig Routledge <webstuff at craigroutledge dot com>

	* libbalsa/mailbox_local.c: fix bug #147380.

2005-01-27  Pawel Salek

	* libbalsa/address-book-ldap.c: fix InternerAddress regression.

2005-01-22  Pawel Salek

	* libbalsa/mailbox_imap.c: do not loose content type paramters -
	fix message wrapping on replying.

2005-01-20  Pawel Salek

	* libbalsa/address-entry.c: fix crashes on: domain-expanded
	address selection; unparsable address.

2005-01-17 23:02  PeterB

	* src/: balsa-message.c, sendmsg-window.c: port from
	GtkFileSelection to GtkFileChooserDialog.

2005-01-17 18:14  Albrecht Dreß <albrecht.dress@arcor.de>

	* src/balsa-message.c, libbalsa/misc.c, libbalsa/misc.h: multiline
	URL highlighting.

2005-01-17  Pawel Salek

	* libbalsa/address-entry.c: add missing #include.
	* libbalsa/identity.h: 
	* libinit_balsa/balsa-druid-page-user.c: port it to InternetAddress.

2005-01-17 14:32  PeterB

	* libbalsa/address-entry.c: use list->address instead of
	internet_address_list_get_address.

2005-01-17 13:41  PeterB

	* src/balsa-message.c, src/message-window.c, src/print.c,
	src/save-restore.c, src/sendmsg-window.c, src/store-address.c,
	libbalsa/abook-completion.c, libbalsa/abook-completion.h,
	libbalsa/address-book-ldif.c, libbalsa/address-book-vcard.c,
	libbalsa/address-entry.c, libbalsa/address-entry.h,
	libbalsa/address.c, libbalsa/address.h, libbalsa/body.h,
	libbalsa/files.h, libbalsa/filter.c, libbalsa/identity.c,
	libbalsa/identity.h, libbalsa/libbalsa.h,
	libbalsa/libbalsa_private.h, libbalsa/mailbox.c,
	libbalsa/mailbox.h, libbalsa/mailbox_imap.c,
	libbalsa/mailbox_local.c, libbalsa/mailbox_mbox.c,
	libbalsa/message.c, libbalsa/message.h, libbalsa/misc.c,
	libbalsa/misc.h, libbalsa/send.c: use GMime's InternetAddress
	instead of LibBalsaAddress, except for address-book entries.

2005-01-17 10:36  PeterB

	* src/: toolbar-factory.c, toolbar-prefs.c: remove redundant
	includes.

2005-01-14 08:32  PeterB

	* configure.in, images/Makefile.am, src/balsa-message.c,
	src/expand-alias.c, src/expand-alias.h, src/sendmsg-window.c,
	images/mimetypes/Makefile, images/mimetypes/Makefile.am,
	images/mimetypes/Makefile.in,
	images/mimetypes/gnome-mime-application-pgp-signature.png,
	images/mimetypes/gnome-mime-application-pkcs7-mime.png,
	images/mimetypes/gnome-mime-application-pkcs7-signature.png,
	images/mimetypes/gnome-mime-application-x-pkcs7-signature.png,
	images/mimetypes/gnome-mime-message-disposition-notification.png,
	images/mimetypes/gnome-mime-message-external-body.png,
	images/mimetypes/gnome-mime-message.png,
	images/mimetypes/gnome-mime-multipart-alternative.png,
	images/mimetypes/gnome-mime-multipart-encrypted.png,
	images/mimetypes/gnome-mime-multipart-signed.png,
	images/mimetypes/gnome-mime-multipart.png: install mime type icons;
	simplify icon search.

2005-01-13 14:56  PeterB

	* configure.in, libbalsa/address-entry.c, libbalsa/address-entry.h,
	libbalsa/files.c, libbalsa/identity.c, libbalsa/mailbox.c,
	libbalsa/misc.c, libbalsa/misc.h, libbalsa/send.c,
	libbalsa/source-viewer.c, libinit_balsa/helper.c, src/Makefile.am,
	src/ab-main.c, src/ab-window.c, src/balsa-app.c, src/balsa-index.c,
	src/balsa-mblist.c, src/filter-edit-callbacks.c,
	src/filter-edit-dialog.c, src/filter-edit.h, src/mailbox-conf.c,
	src/main-window.c, src/main.c, src/pref-manager.c,
	src/sendmsg-window.c, src/sendmsg-window.h, src/store-address.c,
	src/toolbar-factory.c: require gtk+-2.0 >= 2.4 and remove
	GTK_CHECK_VERSION(2,4,0) tests.

2005-01-12  Pawel Salek

	* libbalsa/imap/imap-commands.c: work around broken dovecot indexes.

2005-01-07 09:47  PeterB

	* src/main-window.c: Use hyphen instead of underscore in translator
	credits.
	* src/balsa-mblist.c: restore separator in
	balsa_mblist_mru_option_menu(); remove unused variable.

2005-01-07  Pawel Salek

	* libbalsa/libbalsa.h: add mailbox manipulation error codes.
	* libbalsa/mailbox_imap.[hc]: return more info on error.
	* src/folder-conf.c: handle errors better.
	* src/mailbox-conf.c: ditto.

2005-01-06  Pawel Salek

	* libbalsa/imap/imap-handle.c: silence debugging output.
	* libinit_balsa/balsa-druid-page-user.[hc]: port initial wizard
	improvements.
	* src/balsa-mblist.c: protect against D&D crashes.

2005-01-05 09:05  PeterB

	* libbalsa/mailbox_local.c: use second GNode tree in jwz-threading.

2005-01-04  Pawel Salek

	* libbalsa/mailbox_local.c: remove bogus test from msg matching (PB).

2005-01-03 19:09  PeterB/manu <eallaud@yahoo.fr>

	* libbalsa/mailbox_local.c: check for NULL msg-id.

2006-01-02  Pawel Salek

	* libbalsa/filter.c, libbalsa/misc.[hc]: move in_string_utf8() to misc
	* libbalsa/libbalsa_private.h:
	* libbalsa/mailbox.c: move LibBalsaMailboxEntry def to private.h
	* libbalsa/mailbox_local.c: implement faster searching code
	(manyfold speedup for large mailboxes).

2004-12-31 12:08  Albrecht Dreß <albrecht.dress@arcor.de>

	* libbalsa/body.h, libbalsa/files.c, libbalsa/files.h,
	libbalsa/send.c, src/balsa-message.c, src/print.c,
	src/sendmsg-window.c, src/pixmaps/info_lock.xpm,
	src/pixmaps/info_lock_bad.xpm, src/pixmaps/info_lock_encr.xpm,
	src/pixmaps/info_lock_good.xpm, src/pixmaps/info_lock_sigtrust.xpm:
	new attachment handling code.

2004-12-30 17:04  PeterB

	* libbalsa/: mailbox.c, mailbox.h, mailbox_local.c: reduce the
	amount of tree modification when updating threading.
	* libbalsa/send.c: convert file name to utf-8 for GMime.

2004-12-29 11:49  PeterB

	* src/main-window.c: use BALSA_PIXMAP_CLOSE_MBOX instead of
	GTK_STOCK_CLOSE for Close-mailbox menu item; use
	GTK_ICON_SIZE_BUTTON for notebook label close button.

2004-12-27 10:02  PeterB

	* libbalsa/files.c: do not bypass theme when mime-type and filename
	are both NULL.

2004-12-26 18:45  PeterB

	* libbalsa/body.c: g_mime_data_wrapper_write_to_stream() decodes
	the transfer-encoding--we must not.
	* libbalsa/files.c: look for themed mime-type icon.

2004-12-24  Pawel Salek

	* libbalsa/body.c: always call gdk_pixbuf_loader_close().
	* libbalsa/mailbox_pop3.c: do not try to move messages filtered
	out by procmail.

2004-12-22 13:25  Albrecht Dreß <albrecht.dress@arcor.de>

	* libbalsa/: body.c, mime.c: two minor gpg related fixes.

2004-12-20 12:33  PeterB

	* src/: balsa-index.c, balsa-index.h: re-implement
	balsa_index_{next,previous}_msgno.
	* src/message-window.c: save more menu items; use
	balsa_index_{next,previous}_msgno() to correctly manage menu item
	and button sensitivity.

2004-12-18  Pawel Salek

	* libbalsa/imap/imap-handle.c: forgive errors in BODYSTRUCTURE response
	(work around #160083).

2004-12-18  Craig Routledge
	
	* src/balsa-app.[ch]: add mw_action_after_move.
	* src/message-window.c: use it.
	* src/pref-manager.c: configure it.
	* src/save-restore.c: save/restore it.

2004-12-16 14:34  PeterB

	* libbalsa/body.c: if body->mime_part is a GMimeMessagePart, get
	the stream for its message, not the part.

2004-12-15 06:43  PeterB

	* libbalsa/body.c: add some checks.

2004-12-13 09:41  PeterB

	* libbalsa/html.c: do not write zero bytes, to avoid a
	gtkhtml-CRITICAL.

2004-12-12 12:23  PeterB

	* libbalsa/mailbox_imap.c: check for NULL handle.

2004-12-09 15:45  PeterB

	* libbalsa/address-entry.c, libbalsa/address-entry.h,
	src/sendmsg-window.c: implement libbalsa_address_entry_addresses()
	and use it to move address-counting to libbalsa.

2004-12-08 15:11  PeterB

	* libbalsa/address.c: use InternetAddress methods to manage quoting
	and stringifying.
	* libbalsa/address-entry.c: use a hash table to hold
	LibBalsaAddress objects; parse quoted strings more carefully.

2004-12-07 18:57  PeterB

	* src/sendmsg-window.c: use libbalsa_wrap_rfc2646() to ensure
	space-stuffing.
	* libbalsa/misc.c: append spaces for DelSp=Yes.
	* libbalsa/gmime-gpgme-context.h: replace GMIME_CHECK_* macros with
	G_TYPE_*.
	* libbalsa/mailbox_mbox.c: simplify From_ line armoring.

2004-12-06 16:23  PeterB

	* libbalsa/: address.c, address.h: parse string with group address;
	implement libbalsa_address_set_copy_member() to make a copy of a
	LibBalsaAddress containing only one mailbox.
	* libbalsa/address-entry.c: parse entry text with group address;
	make only one completion item per address.
	* libbalsa/address-book-vcard.c: when not in dist_list_mode and a
	completion item has more than one address, make multiple
	single-address LibBalsaAddress objects.
	* libbalsa/: address.c, address.h, message.c: implement and use
	libbalsa_address_new_list_from_gmime(); do not ignore RFC 2822
	group addresses.

2004-12-04 08:39  PeterB

	* src/: balsa-index.c, balsa-index.h, message-window.c: remove
	balsa_index_next_.*_msgno api; implement balsa_index_select() and
	use it to manage highlighting in the mailbox index.


<!doctype article PUBLIC "-//Davenport//DTD DocBook V3.1//EN" []>

<article id="balsa">

  <artheader>
    <title>Balsa User's Guide</title>
    <author>
      <firstname>Peter</firstname>
      <surname>Williams</surname>
      
      <affiliation>
	<address>
          <email>peter@newton.cx</email>
        </address>
      </affiliation>
    </author>

    <pubdate>19 December 1999</pubdate>

    <abstract>
      <para>Balsa is a graphical mail client. While it is still in 
      active development, Balsa has many features such as: IMAP and
      POP3 support; sendmail or direct SMTP support; optional 
      multithreaded retrieval and sending of messages; support for all
      configurations of local mail folders; automatic mail checking;
      mail printing; inline attachment viewing; and the proverbial
      much, much more.</para>

      <para>This document will introduce a person who understands
      email to using Balsa. However, it will not explain email to a
      confused individual. If you're looking for that, try asking a
      friend; they'll explain it best.</para>
    </abstract>
  </artheader>

  <sect1 id="introduction">
    <title>Introduction</title>

    <para>Balsa is a graphical mail client similar to Eudora on
    Windows. It supports the standard features of any good reader and
    has new features added continually. See the abstract above for
    a quick feature rundown.</para>

    <para>Balsa is written using GTK+ and Gnome. It is based on libmutt,
    the backend code to Mutt, but expands far beyond being a graphical
    Mutt.</para>

    <para>If you want to learn more about Balsa, your best bet is the
    mailing list <email>balsa-list@gnome.org</email>, which can be 
    subscribed to by sending a message with a subject of subscribe to
    <email>balsa-list-request@gnome.org</email>. Bugs can be reported
    via <application>bug-buddy</application>, <application>gnome-bug
    </application> or to <email>submit@bugs.gnome.org</email>.</para>
  </sect1>

  <sect1 id="getting-started">
    <title>Getting Started with Balsa</title>

    <para>If you're starting Balsa for the first time, the first thing
    you'll see is a druid that will set up Balsa's basic settings. Balsa
    can guess most of what it needs to know about you. It will also 
    create five standard local mailboxes: the Inbox, Outbox, Sentbox, Draftbox,
    and Trash. (These can be changed to be IMAP or POP3 mailboxes 
    later.)</para>

    <para>Don't worry. Balsa cooperates with other <acronym>MUA</>'s very well.
    They share the same locking semantics for mailboxes. If Balsa shares
    the same mail directory as <application>Pine</> or <application>Mutt</>,
    it will detect new folders as they are created. So if you have to telnet in
    to your mail machine, you won't be stuck.</>

    <para>There are many more settings in Balsa's 
    <link linkend="deadend">preferences window</link>, but most of
    them do not need to be changed.</para>

    <para>Once Balsa is configured, you will proceed on to the 
    <link linkend="win-main">main window</link>.</para>
  </sect1>

  <sect1 id="win-main">
    <title>The Main Window</title>

    <para>Balsa's main window has three major areas. To the left is the
    mailbox list. This displays all the mailboxes Balsa knows about; it will
    scan for ones in your local mail directory. (This means Balsa works well
    with <application>procmail</application>.) It will also list IMAP or
    POP3 mailboxes that you have configured.</para>

    <para>At the top-right is a notebook view of all the currently open
    mailboxes. You can browse messages, manipulate them, and switch between
    open mailboxes here.</para>

    <para>At the bottom-right of Balsa's main window is the message view. This
    displays the message selected in the message listing. You can save attachments,
    view attachments, and read incoming email here.</para>

    <sect2 id="subwin-mblist">
       <title>The Mailbox List</title>

       <para>The mailbox list in the main window lists all of your mailboxes.
       Balsa will automatically detect your local mailboxes by searching
       for mailboxes under your local mail directory (probably ~/mail). This
       lets Balsa coexist with <application>pine</application> and
       <application>procmail</application> well.</para>
  
       <para>Your mailboxes will be displayed as a tree view, with mailboxes
       in subdirectories of your local mail directory initially hidden but
       accessible by expanding the tree. POP3 and IMAP mailboxes will also
       be displayed as being at the top level of the tree.</para>

       <para>Useful mailbox list menu items are:</para>

      <variablelist>
        <varlistentry><term><GUIMenu>Mailboxes</GUIMenu><GUIMenuItem>Open</GUIMenuItem></term>
        <listitem><para>Open the mailbox selected in the mailbox list.</para></listitem></varlistentry>

        <varlistentry><term><GUIMenu>Mailboxes</GUIMenu><GUIMenuItem>Close</GUIMenuItem></term>
        <listitem><para>Close the mailbox selected in the mailbox list.</para></listitem></varlistentry>

        <varlistentry><term><GUIMenu>Mailboxes</GUIMenu><GUIMenuItem>Close Current</GUIMenuItem></term>
        <listitem><para>Close the mailbox shown in the message index.</para></listitem></varlistentry>

        <varlistentry><term><GUIMenu>Mailboxes</GUIMenu><GUIMenuItem>Commit</GUIMenuItem></term>
        <listitem><para>Commit changes to the mailbox shown in the mailbox list.</para></listitem></varlistentry>

        <varlistentry><term><GUIMenu>Mailboxes</GUIMenu><GUIMenuItem>Commit Current</GUIMenuItem></term>
        <listitem><para>Commit changes to the mailbox shown in the message index.</para></listitem></varlistentry>

        <varlistentry><term><GUIMenu>Mailboxes</GUIMenu><GUIMenuItem>Add</GUIMenuItem></term>
        <listitem><para>Create a new local mailbox.</para></listitem></varlistentry>

        <varlistentry><term><GUIMenu>Mailboxes</GUIMenu><GUIMenuItem>Edit</GUIMenuItem></term>
        <listitem><para>Edit the properties of the mailbox selected in the mailbox list.</para></listitem></varlistentry>

        <varlistentry><term><GUIMenu>Mailboxes</GUIMenu><GUIMenuItem>Delete</GUIMenuItem></term>
        <listitem><para>Remove the currently selected maibox -- delete its data as well as Balsa's record of it.</para></listitem></varlistentry>
      </variablelist>

      <para>You can assign keybindings to these commands, and all menu items in GNOME, by
      clicking and releasing on the menu, selecting the item, and pressing a key combination.</para>
    </sect2>

    <sect2 id="subwin-msgindex">
      <title>The Message Index</title>

      <para>The message index displays the messages in the current folder,
      and lets you choose which folder's messages to view. Click on the
      notebook tabs, or double-click on a folder in the 
      <link linkend="subwin-mblist">mailbox list</link> to bring it to the
      front.</para>
 
      <para>From the message index you can do a lot. Clicking on a message
      will cause it to be displayed in the message view. Right-clicking on
      it will give a popup menu letting you reply to the message (or forward
      it, etc.) and move it to another folder (using the Transfer menu item).
      Double-clicking on a message will open it in a separate window.</para>

      <para>There are some useful hotkeys for the message index.</para>

      <variablelist>
        <varlistentry><term>n</term><listitem><para>Go to the next message</para>
        </listitem></varlistentry>

        <varlistentry><term>p</term><listitem><para>Go to the previous message</para>
        </listitem></varlistentry>

        <varlistentry><term>d</term><listitem><para>Delete the current message</para>
        </listitem></varlistentry>

        <varlistentry><term>u</term><listitem><para>Undelete the current message</para>
        </listitem></varlistentry>

        <varlistentry><term>r</term><listitem><para>Reply to the current message</para>
        </listitem></varlistentry>

        <varlistentry><term>a</term><listitem><para>Reply-to-all the current message</para>
        </listitem></varlistentry>

        <varlistentry><term>f</term><listitem><para>Forward the current message</para>
        </listitem></varlistentry>

      </variablelist>

      <para>There are also menu items for many of the same functions.</para>

      <variablelist>
        <varlistentry><term><GUIMenu>Mailboxes</GUIMenu>
        <GUIMenuItem>Close Current</GUIMenuItem></term>
        <listitem><para>Close the currently displayed mailbox.</para>
        </listitem></varlistentry>

        <varlistentry><term><GUIMenu>Mailboxes</GUIMenu>
        <GUIMenuItem>Commit Current</GUIMenuItem></term>
        <listitem><para>Commits your changes the currently displayed mailbox.</para>
        </listitem></varlistentry>

        <varlistentry><term><GUIMenu>Message</GUIMenu>
        <GUIMenuItem>Reply</GUIMenuItem></term>
        <listitem><para>Replies to the current message.</para>
        </listitem></varlistentry>

        <varlistentry><term><GUIMenu>Message</GUIMenu>
        <GUIMenuItem>Reply to All</GUIMenuItem></term>
        <listitem><para>Replies-to-all the current message.</para>
        </listitem></varlistentry>

        <varlistentry><term><GUIMenu>Message</GUIMenu>
        <GUIMenuItem>Forward</GUIMenuItem></term>
        <listitem><para>Forwards to the current message.</para>
        </listitem></varlistentry>

        <varlistentry><term><GUIMenu>Message</GUIMenu>
        <GUIMenuItem>Continue</GUIMenuItem></term>
        <listitem><para>Continues the current message -- opens it unmodified in a composition
        window. This works for any message.</para>
        </listitem></varlistentry>

        <varlistentry><term><GUIMenu>Message</GUIMenu>
        <GUIMenuItem>Delete</GUIMenuItem></term>
        <listitem><para>Deletes to the current message.</para>
        </listitem></varlistentry>

        <varlistentry><term><GUIMenu>Message</GUIMenu>
        <GUIMenuItem>Undelete</GUIMenuItem></term>
        <listitem><para>Undeletes to the current message.</para>
        </listitem></varlistentry>

      </variablelist>
    </sect2>

    <sect2 id="subwin-msgview">
      <title>The Message View</title>

      <para>The message view displays the message that is selected in message list. It
      will attempt to display images in the message. Balsa does not understand HTML. (Someday,
      maybe.) Attachments will be shown as blue links that look like &quot;--APPLICATION--&quot;.
      Clicking on the link will let you save (but not view) it.</para>

      <para>You are not restricted to that pane. Double-click on a message in the message index
      to open it in a separate window.</para>

      <para>Balsa's message view is a little deficient. It will not line-wrap messages and
      cannot handle MIME data other than images. Hopefully this will be fixed one day.</para>
    </sect2>
  </sect1>

  <sect1 id="win-config">
    <title>The Preferences Window</>

    <para>Balsa has many more options than the initial druid reveals. To access the configuration
    window, select <guimenu>Settings</><guimenuitem>preferences</>. You will see a notebook. The
    tabs and options are explained below</.

    <sect2 id="cfgtab-identity">
      <title>Identity</>

      <para>This page lets you specify how you present yourself to the rest of the world.</>

      <variablelist>
        <varlistentry><term>Your Name</><listitem><para>This doesn't <emphasis>have</> to be your
        name, I guess. But it's the word prefixing your email address in mail you send.</></></>

        <varlistentry><term>E-Mail address</><listitem><para>As you wish it to appear in your 
        &quot;From&quot; header.</></></>

        <varlistentry><term>Reply-To address</><listitem><para>The address that you wish people
        to reply to your email with (if you have a home and a work address, for instance).</></></>

        <varlistentry><term>Signature file</><listitem><para>The file to append to all your messages.
        You also get to control when the signature is appended.</></></>
     </>
   </>

   <sect2 id="cfgtab-mail-servers">
     <title>Mail Servers</>

     <para>This page lets you specify how you get remove POP3 mail, send mail, etc.</>

     <variablelist>
       <varlistentry><term>Remote Mailbox Servers</><listitem><para>These are POP3 servers that you recieve
       email from. The three buttons let you create, modify, and remove records. POP3 mailboxes
       will not show up in the mailbox list.</></></>

       <varlistentry><term>Local Mail Directrory</><listitem><para>This is the directory that Balsa
       will scan looking for mail folders.</></></>

       <varlistentry><term>Remote SMTP Server</><listitem><para>If your computer is not equipped with sendmail
       or you do not wish to use it, select this radio button and enter a hostname to contact via
       SMTP.</></></>

       <varlistentry><term>Local Mail User Agent</><listitem><para>Balsa will attempt to use sendmail to
       send mail. Unfortunately, you cannot specify the command to execute right now.</></></>

       <varlistentry><term>Check Mail Automatically Every...</><listitem><para>If selected, Balsa will connect
       to your POP3 servers at the given interval and check for mail. <note><para>Using &quot;0&quot; as
       an interval is a <emphasis>really</> bad idea.</></></></></>
     </>
   </>
 
   <sect2 id="cfgtab-display">
     <title>Display</title>

     <para>This page controls how Balsa appears to you.</para>
   </>  
  </>

  <sect1 id="common-tasks">
    <title>Common Tasks with Balsa</title>

    <para>This section explains many of the things you might want to do
    with Balsa.</para>

    <itemizedlist mark="bullet">
       <listitem><para><link linkend="ct-create-new-mb">Creating new mailboxes</link>
       </para></listitem>

       <listitem><para><link linkend="ct-move-msg">Moving messages around</link>
       </para></listitem>

       <listitem><para><link linkend="ct-main-folder-imap">Making one of the main folders IMAP-based</link>
       </para></listitem>

    </itemizedlist>

    <sect2 id="ct-create-new-mb">
      <title>Creating New Mailboxes</title>

      <para>You can create new local and IMAP mailboxes by right-clicking in
      the mailbox list and selecting New Mailbox. This will start a dialog that
      will let you name the mailbox and specify its location.</para>

      <para>To create a new POP3 mailbox, go to the configuration dialog, select
      the Mailboxes section, and click Add in the POP3 area. A dialog will be
      displayed that will let you set up the new mailbox.</para>

      <note><para>Under Sawmill, this
      dialog may be obscured, causing the appearance that Balsa has locked up. Move
      the configuration dialog and see if the new dialog was hidden.</para></note> 

      <note><para>The mailbox
      may not appear in the list immediately, or in the current session of Balsa at
      all, but it exists. Yes, this is a bug.</para></note>
    </sect2>

    <sect2 id="ct-move-msg">
      <title>Moving Messages</title>

      <para>The easiest way to move messages around is to select them in the
        <link linkend="subwin-msgindex">message index</link> and use the Transfer
        context menu. It will let you choose a mailbox in the 
        <link linkend="subwin-mblist">mailbox list</link> and the messages will
        be moved there. (Moving messages to the current folder used to be a coredump
        but is now a noop)</para>
    </sect2>

    <sect2 id="ct-main-folder-imap">
      <title>I want one of the main folders to be IMAP</title>

      <para>This can be done. It's ugly, but possible.</para>

      <para>First, create the IMAP folder as you want it configured. It will appear as
      something like &quot;INBOX on host.domain.org&quot;. Exit Balsa. (I told you this
      was bad.)</para>
 
      <para>Open up ~/.balsarc in your favorite editor. There will be a visible organization
      to the file; find the place called &quot;Accounts&quot;. There will be at least five
      definitions that look like &quot;Inbox = {Type = local;Name = (etc.)&quot;. There will
      also be one that says something like &quot;m1 = {Type = IMAP;Name = (etc.)&quot;. Edit
      the file to replace &quot;m1&quot; (or whatever number) with &quot;Inbox&quot;, and
      it would be wise to change the &quot;Name&quot; field to &quot;Inbox&quot;. Change the
      Inbox entry to be the opposite; Inbox becomes m1 and Name becomes Local Inbox (for
      example).</para>

      <para>Close the .balsarc and restart <application>Balsa</application>. Your Inbox
      will now be an IMAP mailbox. Hopefully you can figure out how to make your other mailboxes
      IMAP-based from these instructions.</para>
    </sect2>
  </sect1>

  <sect1 id="its-not-working">
    <title>It's not Working!!!</title>

    <para>This is a FAQ for when Balsa appears to lock up, or other things
    that you think should be happening aren't. If you can't figure out how
    to do something but Balsa lets you do it, that's a bug. Report it</para>

    <itemizedlist mark="bullet">
      <listitem><para><link linkend="inw-main-to-imap">I want one of the main folders to be IMAP
      </link></para></listitem>

      <listitem><para><link linkend="inw-frozen">Balsa's frozen!
      </link></para></listitem>

      <listitem><para><link linkend="inw-no-print">It won't print!
      </link></para></listitem>

      <listitem><para><link linkend="inw-didnt-delete">I though I deleted that message!
      </link></para></listitem>

      <listitem><para><link linkend="inw-spooky-win">What's that window that flashed on the screen?
      </></></>
    </itemizedlist>

    <sect2 id="inw-main-to-imap">
      <title>I want a basic mailbox to use IMAP</title>
      <para>See <link linkend="ct-main-folder-imap">this section</link>.</para>
    </sect2>

    <sect2 id="inw-frozen">
      <title>Balsa's frozen!</title>
      <para>Odds are it isn't. Watch out for:</para>
      <itemizedlist mark="bullet">
        <listitem><para>If you don't have threading, Balsa will stop responding
        when it sends and receives email. Use threading, if possible.</para></listitem>

        <listitem><para>Balsa is opening or closing a large mailbox. This could
        take a while, especially when this file is accessed via NFS.</para></listitem>

        <listitem><para>A dialog box is being displayed but it is obscured by
        another one. This seems to happen under Sawmill. Try moving the windows
        around and see if there's a hidden dialog somewhere.</para></listitem>
      </itemizedlist>
    </sect2>

    <sect2 id="inw-no-print">
      <title>It won't print!</title>

      <para>Your print command is probably wrong. It defaults to 
      &quot;a2ps -d -q %s&quot;. Use the configuration window to change
      it to something that works.</para>
    </sect2>

    <sect2 id="inw-didnt-delete">
      <title>I thought I deleted that message!</title>

      <para>There are some problems with libmutt and deleting messages. We believe
      them to be solved now, but they may be lingering. Known causes of messages
      seeming to be deleted but not really are:</para>

      <itemizedlist mark="bullet">
        <listitem><para>Mail arrives in the folder before the deletion is committed.
        This is believed to be solved.</para></listitem>

        <listitem><para>Many messages were deleted and the folder was closed and reopened
        quickly. This is also believed to be solved.</para></listitem>

      </itemizedlist>
    </sect2>

    <sect2 id="inw-spooky-win">
      <title>What's that window that flashed on the screen?</>

      <para>Were you checking your mail? Probably. This is the window that displays
      progress for retrieving POP3 mail. If you don't have any POP3 accounts, it will
      still appear -- but it'll disappear almost instantly.</>
    </>
  </sect1>

  <sect1 id="deadend">
    <title>Unfinished Documentation</title>
    <para>This is a reference to something that doesn't exist yet. Oops.</para>
  </sect1>

  <glossary>
    <glossentry>
      <glossterm>libmutt</glossterm>
      <glossdef><para>The library based on Mutt's code used by Balsa to handle local mail.</para></glossdef>
    </glossentry>
   
    <glossentry>
      <glossterm>mailbox list</glossterm>
      <glossdef><para>The list of mailboxes found in Balsa's lefthand pane.</para></glossdef>
    </glossentry>

    <glossentry>
      <glossterm>message index</glossterm>
      <glossdef><para>The list of messages in Balsa's upper-righthand pane.</para></glossdef>
    </glossentry>

    <glossentry>
      <glossterm>message view</glossterm>
      <glossdef><para>The message display in Balsa's lower-righthand pane.</para></glossdef>
    </glossentry>

  </glossary>
</article>

